<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <meta http-equiv="Content-Security-Policy" content="
    script-src 'self' 'unsafe-inline' 'unsafe-eval' blob: data: https://api.mapbox.com https://cdn.jsdelivr.net;
    frame-src 'self';
    connect-src 'self' ws://localhost:* wss://localhost:* http://localhost:* https://localhost:* https://api.teksimap.co.za https://api.mapbox.com https://events.mapbox.com;
    style-src 'self' 'unsafe-inline' https://api.mapbox.com https://cdnjs.cloudflare.com https://fonts.googleapis.com;
    font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com;
    img-src 'self' data: blob: https://api.mapbox.com;
">
    <title>Multi-Taxi Path with Mapbox</title>
    <link
      href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css"
      rel="stylesheet"
    />
    <link
      href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.1.1/mapbox-gl-directions.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
      integrity="sha512-..."
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.0/mapbox-gl-geocoder.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./css/clientCrowdSource.css" />
    <link rel="stylesheet" href="./css/popup.css" />
    <script type="module" crossorigin src="/assets/clientCrowdSource-CCsYhe3v.js"></script>
    <link rel="modulepreload" crossorigin href="/assets/AddressSelection-CWIIN_Gi.js">
    <link rel="modulepreload" crossorigin href="/assets/axios-D4YhIzwJ.js">
    <link rel="modulepreload" crossorigin href="/assets/logout-DBLdyFVo.js">
    <link rel="modulepreload" crossorigin href="/assets/popup-CwFhKe62.js">
  </head>
  <body class="has-map-layout">
    <div class="wrapper">
      <!-- Top navigation bar -->
      <div class="topnav">
        <div class="logo">
          <a href="../../index.html">
            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQwIiBoZWlnaHQ9IjYwIiB2aWV3Qm94PSIwIDAgMjQwIDYwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KICA8ZGVmcz4NCiAgICA8IS0tIEdyYWRpZW50cyAtLT4NCiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImdvbGRHcmFkaWVudCIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMCUiPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3R5bGU9InN0b3AtY29sb3I6I0ZGRDcwMDtzdG9wLW9wYWNpdHk6MSIgLz4NCiAgICAgIDxzdG9wIG9mZnNldD0iNTAlIiBzdHlsZT0ic3RvcC1jb2xvcjojRkZBNTAwO3N0b3Atb3BhY2l0eToxIiAvPg0KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdHlsZT0ic3RvcC1jb2xvcjojRkZENzAwO3N0b3Atb3BhY2l0eToxIiAvPg0KICAgIDwvbGluZWFyR3JhZGllbnQ+DQogICAgDQogICAgPGxpbmVhckdyYWRpZW50IGlkPSJ3aGl0ZUdyYWRpZW50IiB4MT0iMCUiIHkxPSIwJSIgeDI9IjEwMCUiIHkyPSIxMDAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRkZGRkY7c3RvcC1vcGFjaXR5OjEiIC8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNGMEYwRjA7c3RvcC1vcGFjaXR5OjEiIC8+DQogICAgPC9saW5lYXJHcmFkaWVudD4NCiAgICANCiAgICA8IS0tIEVuaGFuY2VkIGdsb3cgZWZmZWN0IC0tPg0KICAgIDxmaWx0ZXIgaWQ9Imdsb3ciPg0KICAgICAgPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMS41IiByZXN1bHQ9ImNvbG9yZWRCbHVyIi8+DQogICAgICA8ZmVNZXJnZT4gDQogICAgICAgIDxmZU1lcmdlTm9kZSBpbj0iY29sb3JlZEJsdXIiLz4NCiAgICAgICAgPGZlTWVyZ2VOb2RlIGluPSJTb3VyY2VHcmFwaGljIi8+DQogICAgICA8L2ZlTWVyZ2U+DQogICAgPC9maWx0ZXI+DQogICAgDQogICAgPCEtLSBTdWJ0bGUgc2hhZG93IGZvciBkZXB0aCAtLT4NCiAgICA8ZmlsdGVyIGlkPSJ0ZXh0U2hhZG93Ij4NCiAgICAgIDxmZURyb3BTaGFkb3cgZHg9IjAuNSIgZHk9IjAuNSIgc3RkRGV2aWF0aW9uPSIwLjUiIGZsb29kLWNvbG9yPSIjMDAwMDAwIiBmbG9vZC1vcGFjaXR5PSIwLjIiLz4NCiAgICA8L2ZpbHRlcj4NCiAgPC9kZWZzPg0KICANCiAgPCEtLSBDdXN0b20gc3R5bGVkICJUZWtzaU1hcCIgdGV4dCB3aXRoIGVuaGFuY2VkIHN0eWxpbmcgLS0+DQogIDwhLS0gVCB3aXRoIHVuaXF1ZSBzdHlsaW5nIC0tPg0KICA8dGV4dCB4PSI2MCIgeT0iMzIiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIyNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9InVybCgjZ29sZEdyYWRpZW50KSIgZmlsdGVyPSJ1cmwoI2dsb3cpIHVybCgjdGV4dFNoYWRvdykiPg0KICAgIFQNCiAgPC90ZXh0Pg0KICANCiAgPCEtLSBlIHdpdGggc2xpZ2h0IHJvdGF0aW9uIC0tPg0KICA8dGV4dCB4PSI3OCIgeT0iMzIiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIyNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9InVybCgjZ29sZEdyYWRpZW50KSIgdHJhbnNmb3JtPSJyb3RhdGUoMiA3OCAzMikiIGZpbHRlcj0idXJsKCN0ZXh0U2hhZG93KSI+DQogICAgZQ0KICA8L3RleHQ+DQogIA0KICA8IS0tIGsgd2l0aCBjdXN0b20gc3R5bGluZyAtLT4NCiAgPHRleHQgeD0iOTYiIHk9IjMyIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMjQiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSJ1cmwoI2dvbGRHcmFkaWVudCkiIGZpbHRlcj0idXJsKCN0ZXh0U2hhZG93KSI+DQogICAgaw0KICA8L3RleHQ+DQogIA0KICA8IS0tIHMgd2l0aCBzbGlnaHQgc3R5bGluZyAtLT4NCiAgPHRleHQgeD0iMTE0IiB5PSIzMiIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjI0IiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0idXJsKCNnb2xkR3JhZGllbnQpIiB0cmFuc2Zvcm09InJvdGF0ZSgtMSAxMTQgMzIpIiBmaWx0ZXI9InVybCgjdGV4dFNoYWRvdykiPg0KICAgIHMNCiAgPC90ZXh0Pg0KICANCiAgPCEtLSBpIHdpdGggZG90IHN0eWxpbmcgLS0+DQogIDx0ZXh0IHg9IjEzMiIgeT0iMzIiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIyNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9InVybCgjZ29sZEdyYWRpZW50KSIgZmlsdGVyPSJ1cmwoI3RleHRTaGFkb3cpIj4NCiAgICBpDQogIDwvdGV4dD4NCiAgDQogIDwhLS0gTWFwIHBhcnQgd2l0aCBXSElURSBjb2xvciBmb3IgYmx1ZSBiYWNrZ3JvdW5kcyAtLT4NCiAgPHRleHQgeD0iMTUwIiB5PSIzMiIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjI0IiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0idXJsKCN3aGl0ZUdyYWRpZW50KSIgZmlsdGVyPSJ1cmwoI3RleHRTaGFkb3cpIj4NCiAgICBNDQogIDwvdGV4dD4NCiAgDQogIDx0ZXh0IHg9IjE3NCIgeT0iMzIiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIyNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9InVybCgjd2hpdGVHcmFkaWVudCkiIGZpbHRlcj0idXJsKCN0ZXh0U2hhZG93KSI+DQogICAgYQ0KICA8L3RleHQ+DQogIA0KICA8dGV4dCB4PSIxOTIiIHk9IjMyIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMjQiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSJ1cmwoI3doaXRlR3JhZGllbnQpIiBmaWx0ZXI9InVybCgjdGV4dFNoYWRvdykiPg0KICAgIHANCiAgPC90ZXh0Pg0KICANCiAgPCEtLSA0IGRlY29yYXRpdmUgcGFydGljbGVzIC0gaW1wcm92ZWQgcG9zaXRpb25pbmcgYW5kIHNpemluZyBmb3IgYmV0dGVyIHZpc3VhbCBiYWxhbmNlIC0tPg0KICA8Y2lyY2xlIGN4PSIyMTAiIGN5PSIxNSIgcj0iMi41IiBmaWxsPSJ1cmwoI2dvbGRHcmFkaWVudCkiIG9wYWNpdHk9IjAuNyIvPg0KICA8Y2lyY2xlIGN4PSIyMTUiIGN5PSI0NSIgcj0iMS44IiBmaWxsPSIjRkZBNTAwIiBvcGFjaXR5PSIwLjYiLz4NCiAgPGNpcmNsZSBjeD0iMjIwIiBjeT0iOCIgcj0iMi4yIiBmaWxsPSJ1cmwoI2dvbGRHcmFkaWVudCkiIG9wYWNpdHk9IjAuOCIvPg0KICA8Y2lyY2xlIGN4PSIyMjUiIGN5PSI0MiIgcj0iMiIgZmlsbD0iI0ZGQTUwMCIgb3BhY2l0eT0iMC41Ii8+DQo8L3N2Zz4NCg==" alt="TeksiMap Logo" class="h-10 w-auto" />
          </a>
        </div>
        
        <!-- Burger button for mobile -->
        <div class="burger" onclick="toggleMobileMenu()">
          <div class="bar"></div>
          <div class="bar"></div>
          <div class="bar"></div>
        </div>
        
        <div class="nav_group" id="mobileMenu">
          <a href="client.html">Find route</a>
          <a href="clientCrowdSource.html">Suggest route (Advanced)</a>
          <a href="route-suggestion.html">Suggest route</a>
          <a href="../authentication/profile.html">Profile</a>
          <a href="help.html">Help</a>
        </div>
      </div>

      <!-- Popup -->
      <div id="popup-container"></div>

      <!-- Mobile sidebar toggle button -->
      <button id="sidebarToggle" class="sidebar-toggle-btn">
        <i class="fas fa-bars"></i>
      </button>

      <div class="page-content">
        <!--Ui section-->
        <div id="ui_container">
          <!-- Mobile close button -->
          <button class="sidebar-close-btn">
            <i class="fas fa-times"></i>
          </button>
          
          <!-- Route Section-->
          <div class="labelContainer sessionSectionLabels">
            <h3>Session :</h3>
          </div>

          <div class="sessionInfoContainer">
            <!-- Transparent container -->
            <div class="TransparentCover sessionInfoContainerCover">
              <i
                class="fa-solid fa-lock"
                style="color: #919191; font-size: 24px"
              ></i>
            </div>
            <!-- Taxi rank info section  -->
            <div class="taxiRInfo_container">
              <div class="routeTypeSelection_container">
                <p>Route Type :</p>
                <select name="routeType" id="routeType">
                  <option value="Straight">Straight</option>
                  <option value="Loop">Loop</option>
                </select>
              </div>

              <div class="taxiRInput_container">
                <div class="inputTR group1">
                  <div class="inputcontainer startingInput">
                    <input
                      title="Search for an existing taxi rank where the taxi will start."
                      placeholder="Search existing starting taxiRank..."
                    />
                    <ul></ul>
                  </div>
                  <button
                    title="Create a new taxi rank location as the starting point if it does not already exist."
                  >
                    Create new TaxiRank
                  </button>
                </div>

                <div class="inputTR group2">
                  <div class="inputcontainer destInput">
                    <input
                      title="Search for an existing taxi rank where the taxi will End."
                      placeholder="Search existing destination taxiRank..."
                    />
                    <ul></ul>
                  </div>
                  <button
                    title="Create a new taxi rank location as the ending point if it does not already exist."
                  >
                    Create new TaxiRank
                  </button>
                </div>
              </div>
            </div>

            <!-- Price slidder  -->

            <div class="price-slider-container">
              <div class="price-display">
                Selected Price:R<span id="selectedPrice">0</span>
              </div>
              <input
                type="range"
                min="0"
                max="1000"
                value="0"
                class="slider"
                id="priceRange"
              />
              <div class="price-labels">
                <span>R0</span>
                <span>R1000</span>
              </div>
            </div>

            <button class="saveSession">Save</button>
          </div>

          <!-- Route Section-->
          <div class="labelContainer routeSectionLabels">
            <h3>Route :</h3>
          </div>

          <!--Route list -->

          <div class="addRoute_container">
            <div class="addRoute">
              <div class="route_div" data-name="1" style="background-color: #eba9b7">
                Route 1<button
                  class="routeButton"
                  style="background-color: #eba9b7"
                >
                  <i
                    class="fa fa-times"
                    style="font-size: 14px; color: black"
                    aria-hidden="true"
                  ></i>
                </button>
              </div>
              <!-- <div class="route_div" style="background-color: #BCF9F9;"> Route 2<button class="routeButton" style="background-color: #BCF9F9;"> <i class="fa fa-times" style="font-size: 12px; color: black;" aria-hidden="true"></i></button></div>
           <div class="route_div" style="background-color: #F9E1BC"> Route 3<button class="routeButton" style="background-color: #F9E1BC"> <i class="fa fa-times" style="font-size: 12px; color: black;" aria-hidden="true"></i></button></div>
           <div class="route_div" style="background-color: #C1F9BC"> Route 4<button class="routeButton" style="background-color: #C1F9BC"> <i class="fa fa-times" style="font-size: 12px; color: black;" aria-hidden="true"></i></button></div>
           <div class="route_div" style="background-color: #A9C6EB;"> Route 5<button class="routeButton" style="background-color: #A9C6EB;"> <i class="fa fa-times" style="font-size: 12px; color: black;" aria-hidden="true"></i></button></div> -->
            </div>
          </div>

          <div class="routeInfoContainer">
            <div class="TransparentCover routeInfoContainerCover">
              <i
                class="fa-solid fa-lock"
                style="color: #919191; font-size: 24px"
              ></i>
            </div>
            <!-- Route ID -->
            <h2 class="routelb">Route #<span id="routeId">1</span></h2>

            <!-- TextArea -->
            <textarea placeholder="message..."></textarea>

            <button class="add_button">Draw Another route</button>
          </div>

          <button class="sendBtn">Send Route</button>
        </div>

        <!--Context menu-->
        <div class="menu_wrapper">
          <button id="close_button">
            <i
              class="fa fa-times"
              style="font-size: 20px; color: red"
              aria-hidden="true"
            ></i>
          </button>
          <div class="input_line name">
            <label>Name:</label>
            <input placeholder="e.g Nkowankowa Taxi Rank" />
          </div>
          <div class="input_line prov">
            <label>Province:</label>
            <input placeholder="e.g Limpopo" />
          </div>
          <div class="input_line address">
            <label>Address:</label>
            <textarea></textarea>
            <ul id="suggestions"></ul>
          </div>

          <button id="update_button">Update</button>
        </div>

        <!-- final marker  Context menu -->
        <div class="menu finalMarker">
          <p id="title">Confirm final Marker</p>
          <button class="close_button" id="del_close_button">
            <i
              class="fa fa-times"
              style="font-size: 20px; color: rblackd"
              aria-hidden="true"
            ></i>
          </button>
          <div class="Information">
            <p>Do you want to end the route ?</p>
          </div>
          <div class="btnContainer">
            <button class="btn no">No</button>
            <button class="btn yes">Yes</button>
          </div>
        </div>

        <!-- Confirm editted marker -->
        <div class="menu editMarker">
          <p id="title">Confirm location selected</p>
          <button class="close_button" id="del_close_button">
            <i
              class="fa fa-times"
              style="font-size: 20px; color: rblackd"
              aria-hidden="true"
            ></i>
          </button>
          <div class="Information">
            <p>Do you want to edit the waypoint to this location ?</p>
          </div>
          <div class="btnContainer">
            <button class="btn no">No</button>
            <button class="btn yes">Yes</button>
          </div>
        </div>

        <!-- New Session Confirmation Menu -->
        <div class="menu newSession">
          <p id="title">Create a new Session</p>
          <button class="close_button" id="newSession_close_button">
            <i
              class="fa fa-times"
              style="font-size: 20px; color: rblackd"
              aria-hidden="true"
            ></i>
          </button>
          <div class="Information">
            <p>Are you sure you want to create a new Session?</p>
            <p style="color: #ff6b6b; font-weight: bold; margin-top: 10px;">Warning: This would cancel everything and you will start from the beginning.</p>
          </div>
          <div class="btnContainer">
            <button class="btn no">No</button>
            <button class="btn yes">Yes</button>
          </div>
        </div>

        <!-- Clear Route Confirmation Menu -->
        <div class="menu clearRoute">
          <p id="title">Clear Current Route</p>
          <button class="close_button" id="clearRoute_close_button">
            <i
              class="fa fa-times"
              style="font-size: 20px; color: rblackd"
              aria-hidden="true"
            ></i>
          </button>
          <div class="Information">
            <p>Are you sure you want to clear the current route?</p>
            <p style="color: #ff6b6b; font-weight: bold; margin-top: 10px;">This will remove the route line and waypoints, but keep your starting and destination markers.</p>
          </div>
          <div class="btnContainer">
            <button class="btn no">No</button>
            <button class="btn yes">Yes</button>
          </div>
        </div>

        <!-- Remove Route Confirmation Menu -->
        <div class="menu removeRoute">
          <p id="title">Remove route</p>
          <button class="close_button" id="removeRoute_close_button">
            <i
              class="fa fa-times"
              style="font-size: 20px; color: rblackd"
              aria-hidden="true"
            ></i>
          </button>
          <div class="Information">
            <p id="removeRouteMessage">Do you want to remove the route Route 1?</p>
          </div>
          <div class="btnContainer">
            <button class="btn no">No</button>
            <button class="btn yes">Yes</button>
          </div>
        </div>

        <!-- Choosing Marker -->
        <div class="listmenu">
          <p id="title">Modify Marker</p>
          <button class="close_button" id="del_close_button">
            <i
              class="fa fa-times"
              style="font-size: 20px; color: rblackd"
              aria-hidden="true"
            ></i>
          </button>
          <div class="btnListContainer">
            <button class="btnMenu Edit">Edit Marker</button>
            <button class="btnMenu Remove">Remove Marker</button>
          </div>
        </div>

        <!--Map-->
        <div class="map_container">
          <div class="draw_flag">
            <p>Draw:<span>OFF</span></p>
          </div>
          <div id="map"></div>
        </div>
      </div>
    </div>

    <!-- Load popup -->
    <script>
      fetch("popup.html")
        .then((res) => res.text())
        .then((html) => {
          document.getElementById("popup-container").innerHTML = html;
        });

      // Mobile menu toggle functionality
      function toggleMobileMenu() {
        const menu = document.getElementById("mobileMenu");
        const isShown = menu.classList.toggle("show");
        
        // Adjust z-index to ensure menu appears above other elements
        const topnav = document.querySelector(".topnav");
        if (isShown) {
          topnav.style.zIndex = "3001";
        } else {
          topnav.style.zIndex = "1000";
        }
      }

      // Sidebar toggle functionality for all screen sizes
      document.addEventListener('DOMContentLoaded', function() {
        const sidebarToggle = document.getElementById('sidebarToggle');
        const uiContainer = document.getElementById('ui_container');
        const sidebarCloseBtn = document.querySelector('.sidebar-close-btn');
        
        if (sidebarToggle && uiContainer) {
          // Initialize sidebar state
          let isSidebarVisible = true;
          
          // Toggle sidebar function
          function toggleSidebar() {
            if (window.innerWidth <= 768) {
              // Mobile behavior
              if (uiContainer.classList.contains('sidebar-open')) {
                uiContainer.classList.remove('sidebar-open');
                sidebarToggle.classList.remove('hidden');
              } else {
                uiContainer.classList.add('sidebar-open');
                sidebarToggle.classList.add('hidden');
              }
            } else {
              // Desktop/Laptop behavior
              if (isSidebarVisible) {
                uiContainer.classList.add('sidebar-hidden');
                uiContainer.classList.remove('sidebar-visible');
                sidebarToggle.classList.remove('hidden');
                isSidebarVisible = false;
              } else {
                uiContainer.classList.remove('sidebar-hidden');
                uiContainer.classList.add('sidebar-visible');
                sidebarToggle.classList.add('hidden');
                isSidebarVisible = true;
              }
            }
          }

          // Toggle button click
          sidebarToggle.addEventListener('click', toggleSidebar);

          // Close button click (mobile only)
          if (sidebarCloseBtn) {
            sidebarCloseBtn.addEventListener('click', function() {
              if (window.innerWidth <= 768) {
                uiContainer.classList.remove('sidebar-open');
                sidebarToggle.classList.remove('hidden');
              } else {
                uiContainer.classList.add('sidebar-hidden');
                uiContainer.classList.remove('sidebar-visible');
                sidebarToggle.classList.remove('hidden');
                isSidebarVisible = false;
              }
            });
          }

          // Close sidebar when clicking outside (mobile only)
          document.addEventListener('click', function(e) {
            if (window.innerWidth <= 768) {
              if (!uiContainer.contains(e.target) && !sidebarToggle.contains(e.target)) {
                uiContainer.classList.remove('sidebar-open');
                sidebarToggle.classList.remove('hidden');
              }
            }
          });

          // Handle window resize
          window.addEventListener('resize', function() {
            if (window.innerWidth > 768) {
              // Reset mobile classes when switching to desktop
              uiContainer.classList.remove('sidebar-open');
              if (!isSidebarVisible) {
                uiContainer.classList.add('sidebar-hidden');
                uiContainer.classList.remove('sidebar-visible');
                sidebarToggle.classList.remove('hidden');
              } else {
                uiContainer.classList.remove('sidebar-hidden');
                uiContainer.classList.add('sidebar-visible');
                sidebarToggle.classList.add('hidden');
              }
            } else {
              // Reset desktop classes when switching to mobile
              uiContainer.classList.remove('sidebar-hidden', 'sidebar-visible');
              sidebarToggle.classList.remove('hidden');
            }
          });
        }
      });
    </script>

    <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
    <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.1.1/mapbox-gl-directions.js"></script>
    <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.0/mapbox-gl-geocoder.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@turf/turf@6/turf.min.js"></script>
  </body>
</html>
