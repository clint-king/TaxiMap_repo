import{B as lr}from"./AddressSelection-CWIIN_Gi.js";/* empty css                    *//* empty css               *//* empty css              */import"./logout-DBLdyFVo.js";import{a as Ln}from"./axios-D4YhIzwJ.js";import{p as qo}from"./popup-CwFhKe62.js";document.addEventListener("DOMContentLoaded",function(){const a=document.getElementById("authButtons"),u=document.getElementById("fullNav");localStorage.getItem("userProfile")||sessionStorage.getItem("userProfile")?(a.style.display="none",u.style.display="block"):(a.style.display="block",u.style.display="none")});var Ge=63710088e-1,Hs={centimeters:Ge*100,centimetres:Ge*100,degrees:360/(2*Math.PI),feet:Ge*3.28084,inches:Ge*39.37,kilometers:Ge/1e3,kilometres:Ge/1e3,meters:Ge,metres:Ge,miles:Ge/1609.344,millimeters:Ge*1e3,millimetres:Ge*1e3,nauticalmiles:Ge/1852,radians:1,yards:Ge*1.0936};function Nt(a,u,f={}){const h={type:"Feature"};return(f.id===0||f.id)&&(h.id=f.id),f.bbox&&(h.bbox=f.bbox),h.properties=u||{},h.geometry=a,h}function Pt(a,u,f={}){if(!a)throw new Error("coordinates is required");if(!Array.isArray(a))throw new Error("coordinates must be an Array");if(a.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ls(a[0])||!ls(a[1]))throw new Error("coordinates must contain numbers");return Nt({type:"Point",coordinates:a},u,f)}function Bo(a,u,f={}){for(const l of a){if(l.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(l[l.length-1].length!==l[0].length)throw new Error("First and last Position are not equivalent.");for(let d=0;d<l[l.length-1].length;d++)if(l[l.length-1][d]!==l[0][d])throw new Error("First and last Position are not equivalent.")}return Nt({type:"Polygon",coordinates:a},u,f)}function In(a,u,f={}){if(a.length<2)throw new Error("coordinates must be an array of two or more positions");return Nt({type:"LineString",coordinates:a},u,f)}function $t(a,u={}){const f={type:"FeatureCollection"};return u.id&&(f.id=u.id),u.bbox&&(f.bbox=u.bbox),f.features=a,f}function Ws(a,u="kilometers"){const f=Hs[u];if(!f)throw new Error(u+" units is invalid");return a*f}function Zs(a,u="kilometers"){const f=Hs[u];if(!f)throw new Error(u+" units is invalid");return a/f}function ji(a){return a%(2*Math.PI)*180/Math.PI}function tt(a){return a%360*Math.PI/180}function ls(a){return!isNaN(a)&&a!==null&&!Array.isArray(a)}function jt(a){if(!a)throw new Error("coord is required");if(!Array.isArray(a)){if(a.type==="Feature"&&a.geometry!==null&&a.geometry.type==="Point")return[...a.geometry.coordinates];if(a.type==="Point")return[...a.coordinates]}if(Array.isArray(a)&&a.length>=2&&!Array.isArray(a[0])&&!Array.isArray(a[1]))return[...a];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function $s(a){return a.type==="Feature"?a.geometry:a}function js(a,u,f={}){if(f.final===!0)return Go(a,u);const h=jt(a),l=jt(u),d=tt(h[0]),y=tt(l[0]),g=tt(h[1]),w=tt(l[1]),L=Math.sin(y-d)*Math.cos(w),E=Math.cos(g)*Math.sin(w)-Math.sin(g)*Math.cos(w)*Math.cos(y-d);return ji(Math.atan2(L,E))}function Go(a,u){let f=js(u,a);return f=(f+180)%360,f}function Yo(a,u,f,h={}){const l=jt(a),d=tt(l[0]),y=tt(l[1]),g=tt(f),w=Zs(u,h.units),L=Math.asin(Math.sin(y)*Math.cos(w)+Math.cos(y)*Math.sin(w)*Math.cos(g)),E=d+Math.atan2(Math.sin(g)*Math.sin(w)*Math.cos(y),Math.cos(w)-Math.sin(y)*Math.sin(L)),_=ji(E),T=ji(L);return Pt([_,T],h.properties)}function Js(a,u,f={}){var h=jt(a),l=jt(u),d=tt(l[1]-h[1]),y=tt(l[0]-h[0]),g=tt(h[1]),w=tt(l[1]),L=Math.pow(Math.sin(d/2),2)+Math.pow(Math.sin(y/2),2)*Math.cos(g)*Math.cos(w);return Ws(2*Math.atan2(Math.sqrt(L),Math.sqrt(1-L)),f.units)}function zo(a,u,f={}){const l=$s(a).coordinates;let d=0;for(let y=0;y<l.length&&!(u>=d&&y===l.length-1);y++)if(d>=u){const g=u-d;if(g){const w=js(l[y],l[y-1])-180;return Yo(l[y],g,w,f)}else return Pt(l[y])}else d+=Js(l[y],l[y+1],f);return Pt(l[l.length-1])}function pi(a,u,f){if(a!==null)for(var h,l,d,y,g,w,L,E=0,_=0,T,A=a.type,R=A==="FeatureCollection",B=A==="Feature",z=R?a.features.length:1,U=0;U<z;U++){L=R?a.features[U].geometry:B?a.geometry:a,T=L?L.type==="GeometryCollection":!1,g=T?L.geometries.length:1;for(var I=0;I<g;I++){var N=0,p=0;if(y=T?L.geometries[I]:L,y!==null){w=y.coordinates;var x=y.type;switch(E=0,x){case null:break;case"Point":if(u(w,_,U,N,p)===!1)return!1;_++,N++;break;case"LineString":case"MultiPoint":for(h=0;h<w.length;h++){if(u(w[h],_,U,N,p)===!1)return!1;_++,x==="MultiPoint"&&N++}x==="LineString"&&N++;break;case"Polygon":case"MultiLineString":for(h=0;h<w.length;h++){for(l=0;l<w[h].length-E;l++){if(u(w[h][l],_,U,N,p)===!1)return!1;_++}x==="MultiLineString"&&N++,x==="Polygon"&&p++}x==="Polygon"&&N++;break;case"MultiPolygon":for(h=0;h<w.length;h++){for(p=0,l=0;l<w[h].length;l++){for(d=0;d<w[h][l].length-E;d++){if(u(w[h][l][d],_,U,N,p)===!1)return!1;_++}p++}N++}break;case"GeometryCollection":for(h=0;h<y.geometries.length;h++)if(pi(y.geometries[h],u)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function cs(a,u){if(a.type==="Feature")u(a,0);else if(a.type==="FeatureCollection")for(var f=0;f<a.features.length&&u(a.features[f],f)!==!1;f++);}function cr(a,u){var f,h,l,d,y,g,w,L,E,_,T=0,A=a.type==="FeatureCollection",R=a.type==="Feature",B=A?a.features.length:1;for(f=0;f<B;f++){for(g=A?a.features[f].geometry:R?a.geometry:a,L=A?a.features[f].properties:R?a.properties:{},E=A?a.features[f].bbox:R?a.bbox:void 0,_=A?a.features[f].id:R?a.id:void 0,w=g?g.type==="GeometryCollection":!1,y=w?g.geometries.length:1,l=0;l<y;l++){if(d=w?g.geometries[l]:g,d===null){if(u(null,T,L,E,_)===!1)return!1;continue}switch(d.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(u(d,T,L,E,_)===!1)return!1;break}case"GeometryCollection":{for(h=0;h<d.geometries.length;h++)if(u(d.geometries[h],T,L,E,_)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}T++}}function Xo(a,u){cr(a,function(f,h,l,d,y){var g=f===null?null:f.type;switch(g){case null:case"Point":case"LineString":case"Polygon":return u(Nt(f,l,{bbox:d,id:y}),h,0)===!1?!1:void 0}var w;switch(g){case"MultiPoint":w="Point";break;case"MultiLineString":w="LineString";break;case"MultiPolygon":w="Polygon";break}for(var L=0;L<f.coordinates.length;L++){var E=f.coordinates[L],_={type:w,coordinates:E};if(u(Nt(_,l),h,L)===!1)return!1}})}function Uo(a,u){Xo(a,function(f,h,l){var d=0;if(f.geometry){var y=f.geometry.type;if(!(y==="Point"||y==="MultiPoint")){var g,w=0,L=0,E=0;if(pi(f,function(_,T,A,R,B){if(g===void 0||h>w||R>L||B>E){g=_,w=h,L=R,E=B,d=0;return}var z=In([g,_],f.properties);if(u(z,h,l,B,d)===!1)return!1;d++,g=_})===!1)return!1}}})}function Vo(a,u,f){var h=f,l=!1;return Uo(a,function(d,y,g,w,L){l===!1&&f===void 0?h=d:h=u(h,d,y,g,w,L),l=!0}),h}function Ho(a,u={}){if(a.bbox!=null&&u.recompute!==!0)return a.bbox;const f=[1/0,1/0,-1/0,-1/0];return pi(a,h=>{f[0]>h[0]&&(f[0]=h[0]),f[1]>h[1]&&(f[1]=h[1]),f[2]<h[0]&&(f[2]=h[0]),f[3]<h[1]&&(f[3]=h[1])}),f}const vt=11102230246251565e-32,Ae=134217729,Wo=(3+8*vt)*vt;function Ui(a,u,f,h,l){let d,y,g,w,L=u[0],E=h[0],_=0,T=0;E>L==E>-L?(d=L,L=u[++_]):(d=E,E=h[++T]);let A=0;if(_<a&&T<f)for(E>L==E>-L?(y=L+d,g=d-(y-L),L=u[++_]):(y=E+d,g=d-(y-E),E=h[++T]),d=y,g!==0&&(l[A++]=g);_<a&&T<f;)E>L==E>-L?(y=d+L,w=y-d,g=d-(y-w)+(L-w),L=u[++_]):(y=d+E,w=y-d,g=d-(y-w)+(E-w),E=h[++T]),d=y,g!==0&&(l[A++]=g);for(;_<a;)y=d+L,w=y-d,g=d-(y-w)+(L-w),L=u[++_],d=y,g!==0&&(l[A++]=g);for(;T<f;)y=d+E,w=y-d,g=d-(y-w)+(E-w),E=h[++T],d=y,g!==0&&(l[A++]=g);return(d!==0||A===0)&&(l[A++]=d),A}function Zo(a,u){let f=u[0];for(let h=1;h<a;h++)f+=u[h];return f}function Tn(a){return new Float64Array(a)}const $o=(3+16*vt)*vt,jo=(2+12*vt)*vt,Jo=(9+64*vt)*vt*vt,Ut=Tn(4),hs=Tn(8),fs=Tn(12),gs=Tn(16),qe=Tn(4);function Qo(a,u,f,h,l,d,y){let g,w,L,E,_,T,A,R,B,z,U,I,N,p,x,S,C,M;const P=a-l,q=f-l,Y=u-d,V=h-d;p=P*V,T=Ae*P,A=T-(T-P),R=P-A,T=Ae*V,B=T-(T-V),z=V-B,x=R*z-(p-A*B-R*B-A*z),S=Y*q,T=Ae*Y,A=T-(T-Y),R=Y-A,T=Ae*q,B=T-(T-q),z=q-B,C=R*z-(S-A*B-R*B-A*z),U=x-C,_=x-U,Ut[0]=x-(U+_)+(_-C),I=p+U,_=I-p,N=p-(I-_)+(U-_),U=N-S,_=N-U,Ut[1]=N-(U+_)+(_-S),M=I+U,_=M-I,Ut[2]=I-(M-_)+(U-_),Ut[3]=M;let Z=Zo(4,Ut),G=jo*y;if(Z>=G||-Z>=G||(_=a-P,g=a-(P+_)+(_-l),_=f-q,L=f-(q+_)+(_-l),_=u-Y,w=u-(Y+_)+(_-d),_=h-V,E=h-(V+_)+(_-d),g===0&&w===0&&L===0&&E===0)||(G=Jo*y+Wo*Math.abs(Z),Z+=P*E+V*g-(Y*L+q*w),Z>=G||-Z>=G))return Z;p=g*V,T=Ae*g,A=T-(T-g),R=g-A,T=Ae*V,B=T-(T-V),z=V-B,x=R*z-(p-A*B-R*B-A*z),S=w*q,T=Ae*w,A=T-(T-w),R=w-A,T=Ae*q,B=T-(T-q),z=q-B,C=R*z-(S-A*B-R*B-A*z),U=x-C,_=x-U,qe[0]=x-(U+_)+(_-C),I=p+U,_=I-p,N=p-(I-_)+(U-_),U=N-S,_=N-U,qe[1]=N-(U+_)+(_-S),M=I+U,_=M-I,qe[2]=I-(M-_)+(U-_),qe[3]=M;const ne=Ui(4,Ut,4,qe,hs);p=P*E,T=Ae*P,A=T-(T-P),R=P-A,T=Ae*E,B=T-(T-E),z=E-B,x=R*z-(p-A*B-R*B-A*z),S=Y*L,T=Ae*Y,A=T-(T-Y),R=Y-A,T=Ae*L,B=T-(T-L),z=L-B,C=R*z-(S-A*B-R*B-A*z),U=x-C,_=x-U,qe[0]=x-(U+_)+(_-C),I=p+U,_=I-p,N=p-(I-_)+(U-_),U=N-S,_=N-U,qe[1]=N-(U+_)+(_-S),M=I+U,_=M-I,qe[2]=I-(M-_)+(U-_),qe[3]=M;const j=Ui(ne,hs,4,qe,fs);p=g*E,T=Ae*g,A=T-(T-g),R=g-A,T=Ae*E,B=T-(T-E),z=E-B,x=R*z-(p-A*B-R*B-A*z),S=w*L,T=Ae*w,A=T-(T-w),R=w-A,T=Ae*L,B=T-(T-L),z=L-B,C=R*z-(S-A*B-R*B-A*z),U=x-C,_=x-U,qe[0]=x-(U+_)+(_-C),I=p+U,_=I-p,N=p-(I-_)+(U-_),U=N-S,_=N-U,qe[1]=N-(U+_)+(_-S),M=I+U,_=M-I,qe[2]=I-(M-_)+(U-_),qe[3]=M;const ie=Ui(j,fs,4,qe,gs);return gs[ie-1]}function Ko(a,u,f,h,l,d){const y=(u-d)*(f-l),g=(a-l)*(h-d),w=y-g,L=Math.abs(y+g);return Math.abs(w)>=$o*L?w:-Qo(a,u,f,h,l,d,L)}function eu(a,u){var f,h,l=0,d,y,g,w,L,E,_,T=a[0],A=a[1],R=u.length;for(f=0;f<R;f++){h=0;var B=u[f],z=B.length-1;if(E=B[0],E[0]!==B[z][0]&&E[1]!==B[z][1])throw new Error("First and last coordinates in a ring must be the same");for(y=E[0]-T,g=E[1]-A,h;h<z;h++){if(_=B[h+1],w=_[0]-T,L=_[1]-A,g===0&&L===0){if(w<=0&&y>=0||y<=0&&w>=0)return 0}else if(L>=0&&g<=0||L<=0&&g>=0){if(d=Ko(y,w,g,L,0,0),d===0)return 0;(d>0&&L>0&&g<=0||d<0&&L<=0&&g>0)&&l++}E=_,g=L,y=w}}return l%2!==0}function tu(a,u,f={}){if(!a)throw new Error("point is required");if(!u)throw new Error("polygon is required");const h=jt(a),l=$s(u),d=l.type,y=u.bbox;let g=l.coordinates;if(y&&nu(h,y)===!1)return!1;d==="Polygon"&&(g=[g]);let w=!1;for(var L=0;L<g.length;++L){const E=eu(h,g[L]);if(E===0)return!f.ignoreBoundary;E&&(w=!0)}return w}function nu(a,u){return u[0]<=a[0]&&u[1]<=a[1]&&u[2]>=a[0]&&u[3]>=a[1]}let Qs=class{constructor(u=[],f=iu){if(this.data=u,this.length=this.data.length,this.compare=f,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(u){this.data.push(u),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const u=this.data[0],f=this.data.pop();return this.length--,this.length>0&&(this.data[0]=f,this._down(0)),u}peek(){return this.data[0]}_up(u){const{data:f,compare:h}=this,l=f[u];for(;u>0;){const d=u-1>>1,y=f[d];if(h(l,y)>=0)break;f[u]=y,u=d}f[u]=l}_down(u){const{data:f,compare:h}=this,l=this.length>>1,d=f[u];for(;u<l;){let y=(u<<1)+1,g=f[y];const w=y+1;if(w<this.length&&h(f[w],g)<0&&(y=w,g=f[w]),h(g,d)>=0)break;f[u]=g,u=y}f[u]=d}};function iu(a,u){return a<u?-1:a>u?1:0}function Ks(a,u){return a.p.x>u.p.x?1:a.p.x<u.p.x?-1:a.p.y!==u.p.y?a.p.y>u.p.y?1:-1:1}function ru(a,u){return a.rightSweepEvent.p.x>u.rightSweepEvent.p.x?1:a.rightSweepEvent.p.x<u.rightSweepEvent.p.x?-1:a.rightSweepEvent.p.y!==u.rightSweepEvent.p.y?a.rightSweepEvent.p.y<u.rightSweepEvent.p.y?1:-1:1}class ds{constructor(u,f,h,l){this.p={x:u[0],y:u[1]},this.featureId=f,this.ringId=h,this.eventId=l,this.otherEvent=null,this.isLeftEndpoint=null}isSamePoint(u){return this.p.x===u.p.x&&this.p.y===u.p.y}}function su(a,u){if(a.type==="FeatureCollection"){const f=a.features;for(let h=0;h<f.length;h++)ms(f[h],u)}else ms(a,u)}let Un=0,Vn=0,Hn=0;function ms(a,u){const f=a.type==="Feature"?a.geometry:a;let h=f.coordinates;(f.type==="Polygon"||f.type==="MultiLineString")&&(h=[h]),f.type==="LineString"&&(h=[[h]]);for(let l=0;l<h.length;l++)for(let d=0;d<h[l].length;d++){let y=h[l][d][0],g=null;Vn=Vn+1;for(let w=0;w<h[l][d].length-1;w++){g=h[l][d][w+1];const L=new ds(y,Un,Vn,Hn),E=new ds(g,Un,Vn,Hn+1);L.otherEvent=E,E.otherEvent=L,Ks(L,E)>0?(E.isLeftEndpoint=!0,L.isLeftEndpoint=!1):(L.isLeftEndpoint=!0,E.isLeftEndpoint=!1),u.push(L),u.push(E),y=g,Hn=Hn+1}}Un=Un+1}class au{constructor(u){this.leftSweepEvent=u,this.rightSweepEvent=u.otherEvent}}function ou(a,u){if(a===null||u===null||a.leftSweepEvent.ringId===u.leftSweepEvent.ringId&&(a.rightSweepEvent.isSamePoint(u.leftSweepEvent)||a.rightSweepEvent.isSamePoint(u.leftSweepEvent)||a.rightSweepEvent.isSamePoint(u.rightSweepEvent)||a.leftSweepEvent.isSamePoint(u.leftSweepEvent)||a.leftSweepEvent.isSamePoint(u.rightSweepEvent)))return!1;const f=a.leftSweepEvent.p.x,h=a.leftSweepEvent.p.y,l=a.rightSweepEvent.p.x,d=a.rightSweepEvent.p.y,y=u.leftSweepEvent.p.x,g=u.leftSweepEvent.p.y,w=u.rightSweepEvent.p.x,L=u.rightSweepEvent.p.y,E=(L-g)*(l-f)-(w-y)*(d-h),_=(w-y)*(h-g)-(L-g)*(f-y),T=(l-f)*(h-g)-(d-h)*(f-y);if(E===0)return!1;const A=_/E,R=T/E;if(A>=0&&A<=1&&R>=0&&R<=1){const B=f+A*(l-f),z=h+A*(d-h);return[B,z]}return!1}function uu(a,u){u=u||!1;const f=[],h=new Qs([],ru);for(;a.length;){const l=a.pop();if(l.isLeftEndpoint){const d=new au(l);for(let y=0;y<h.data.length;y++){const g=h.data[y];if(u&&g.leftSweepEvent.featureId===l.featureId)continue;const w=ou(d,g);w!==!1&&f.push(w)}h.push(d)}else l.isLeftEndpoint===!1&&h.pop()}return f}function lu(a,u){const f=new Qs([],Ks);return su(a,f),uu(f,u)}var cu=lu;function hu(a,u,f={}){const{removeDuplicates:h=!0,ignoreSelfIntersections:l=!0}=f;let d=[];a.type==="FeatureCollection"?d=d.concat(a.features):a.type==="Feature"?d.push(a):(a.type==="LineString"||a.type==="Polygon"||a.type==="MultiLineString"||a.type==="MultiPolygon")&&d.push(Nt(a)),u.type==="FeatureCollection"?d=d.concat(u.features):u.type==="Feature"?d.push(u):(u.type==="LineString"||u.type==="Polygon"||u.type==="MultiLineString"||u.type==="MultiPolygon")&&d.push(Nt(u));const y=cu($t(d),l);let g=[];if(h){const w={};y.forEach(L=>{const E=L.join(",");w[E]||(w[E]=!0,g.push(L))})}else g=y;return $t(g.map(w=>Pt(w)))}function ea(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}function fu(a){if(Object.prototype.hasOwnProperty.call(a,"__esModule"))return a;var u=a.default;if(typeof u=="function"){var f=function h(){return this instanceof h?Reflect.construct(u,arguments,this.constructor):u.apply(this,arguments)};f.prototype=u.prototype}else f={};return Object.defineProperty(f,"__esModule",{value:!0}),Object.keys(a).forEach(function(h){var l=Object.getOwnPropertyDescriptor(a,h);Object.defineProperty(f,h,l.get?l:{enumerable:!0,get:function(){return a[h]}})}),f}function gu(a,u={}){const f=Ho(a),h=(f[0]+f[2])/2,l=(f[1]+f[3])/2;return Pt([h,l],u.properties,u)}var ni={exports:{}},du=ni.exports,vs;function mu(){return vs||(vs=1,function(a,u){(function(f,h){a.exports=h()})(du,function(){function f(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function h(i,e,t){return e=E(e),function(n,r){if(r&&(typeof r=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}(n)}(i,T()?Reflect.construct(e,t||[],E(i).constructor):e.apply(i,t))}function l(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function d(i,e,t){if(T())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var r=new(i.bind.apply(i,n));return t&&A(r,t.prototype),r}function y(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,z(n.key),n)}}function g(i,e,t){return e&&y(i.prototype,e),t&&y(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function w(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!t){if(Array.isArray(i)||(t=U(i))||e){t&&(i=t);var n=0,r=function(){};return{s:r,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(m){throw m},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,c=!1;return{s:function(){t=t.call(i)},n:function(){var m=t.next();return o=m.done,m},e:function(m){c=!0,s=m},f:function(){try{o||t.return==null||t.return()}finally{if(c)throw s}}}}function L(){return L=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(i,e,t){var n=function(s,o){for(;!{}.hasOwnProperty.call(s,o)&&(s=E(s))!==null;);return s}(i,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(arguments.length<3?i:t):r.value}},L.apply(null,arguments)}function E(i){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(i)}function _(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&A(i,e)}function T(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(T=function(){return!!i})()}function A(i,e){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},A(i,e)}function R(i,e,t,n){var r=L(E(1&n?i.prototype:i),e,t);return 2&n&&typeof r=="function"?function(s){return r.apply(t,s)}:r}function B(i){return function(e){if(Array.isArray(e))return f(e)}(i)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(i)||U(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function z(i){var e=function(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i,"string");return typeof e=="symbol"?e:e+""}function U(i,e){if(i){if(typeof i=="string")return f(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?f(i,e):void 0}}function I(i){var e=typeof Map=="function"?new Map:void 0;return I=function(t){if(t===null||!function(r){try{return Function.toString.call(r).indexOf("[native code]")!==-1}catch{return typeof r=="function"}}(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return d(t,arguments,E(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),A(n,t)},I(i)}var N=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return g(i,[{key:"getEndCapStyle",value:function(){return this._endCapStyle}},{key:"isSingleSided",value:function(){return this._isSingleSided}},{key:"setQuadrantSegments",value:function(e){this._quadrantSegments=e,this._quadrantSegments===0&&(this._joinStyle=i.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=i.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),e<=0&&(this._quadrantSegments=1),this._joinStyle!==i.JOIN_ROUND&&(this._quadrantSegments=i.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this._joinStyle}},{key:"setJoinStyle",value:function(e){this._joinStyle=e}},{key:"setSimplifyFactor",value:function(e){this._simplifyFactor=e<0?0:e}},{key:"getSimplifyFactor",value:function(){return this._simplifyFactor}},{key:"getQuadrantSegments",value:function(){return this._quadrantSegments}},{key:"setEndCapStyle",value:function(e){this._endCapStyle=e}},{key:"getMitreLimit",value:function(){return this._mitreLimit}},{key:"setMitreLimit",value:function(e){this._mitreLimit=e}},{key:"setSingleSided",value:function(e){this._isSingleSided=e}}],[{key:"constructor_",value:function(){if(this._quadrantSegments=i.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=i.CAP_ROUND,this._joinStyle=i.JOIN_ROUND,this._mitreLimit=i.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=i.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var e=arguments[0];this.setQuadrantSegments(e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this.setQuadrantSegments(t),this.setEndCapStyle(n)}else if(arguments.length===4){var r=arguments[0],s=arguments[1],o=arguments[2],c=arguments[3];this.setQuadrantSegments(r),this.setEndCapStyle(s),this.setJoinStyle(o),this.setMitreLimit(c)}}}},{key:"bufferDistanceError",value:function(e){var t=Math.PI/2/e;return 1-Math.cos(t/2)}}])}();N.CAP_ROUND=1,N.CAP_FLAT=2,N.CAP_SQUARE=3,N.JOIN_ROUND=1,N.JOIN_MITRE=2,N.JOIN_BEVEL=3,N.DEFAULT_QUADRANT_SEGMENTS=8,N.DEFAULT_MITRE_LIMIT=5,N.DEFAULT_SIMPLIFY_FACTOR=.01;var p=function(i){function e(t){var n;return l(this,e),(n=h(this,e,[t])).name=Object.keys({Exception:e})[0],n}return _(e,i),g(e,[{key:"toString",value:function(){return this.message}}])}(I(Error)),x=function(i){function e(t){var n;return l(this,e),(n=h(this,e,[t])).name=Object.keys({IllegalArgumentException:e})[0],n}return _(e,i),g(e)}(p),S=function(){return g(function i(){l(this,i)},[{key:"filter",value:function(i){}}])}();function C(){}function M(){}function P(){}var q,Y,V,Z,G,ne,j,ie,ae=function(){return g(function i(){l(this,i)},null,[{key:"equalsWithTolerance",value:function(i,e,t){return Math.abs(i-e)<=t}}])}(),le=function(){return g(function i(e,t){l(this,i),this.low=t||0,this.high=e||0},null,[{key:"toBinaryString",value:function(i){var e,t="";for(e=2147483648;e>0;e>>>=1)t+=(i.high&e)===e?"1":"0";for(e=2147483648;e>0;e>>>=1)t+=(i.low&e)===e?"1":"0";return t}}])}();function F(){}function ee(){}F.NaN=NaN,F.isNaN=function(i){return Number.isNaN(i)},F.isInfinite=function(i){return!Number.isFinite(i)},F.MAX_VALUE=Number.MAX_VALUE,F.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,F.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,typeof Float64Array=="function"&&typeof Int32Array=="function"?(ne=2146435072,j=new Float64Array(1),ie=new Int32Array(j.buffer),F.doubleToLongBits=function(i){j[0]=i;var e=0|ie[0],t=0|ie[1];return(t&ne)===ne&&1048575&t&&e!==0&&(e=0,t=2146959360),new le(t,e)},F.longBitsToDouble=function(i){return ie[0]=i.low,ie[1]=i.high,j[0]}):(q=1023,Y=Math.log2,V=Math.floor,Z=Math.pow,G=function(){for(var i=53;i>0;i--){var e=Z(2,i)-1;if(V(Y(e))+1===i)return e}return 0}(),F.doubleToLongBits=function(i){var e,t,n,r,s,o,c,m,v;if(i<0||1/i===Number.NEGATIVE_INFINITY?(o=1<<31,i=-i):o=0,i===0)return new le(m=o,v=0);if(i===1/0)return new le(m=2146435072|o,v=0);if(i!=i)return new le(m=2146959360,v=0);if(r=0,v=0,(e=V(i))>1)if(e<=G)(r=V(Y(e)))<=20?(v=0,m=e<<20-r&1048575):(v=e%(t=Z(2,n=r-20))<<32-n,m=e/t&1048575);else for(n=e,v=0;(n=V(t=n/2))!==0;)r++,v>>>=1,v|=(1&m)<<31,m>>>=1,t!==n&&(m|=524288);if(c=r+q,s=e===0,e=i-e,r<52&&e!==0)for(n=0;;){if((t=2*e)>=1?(e=t-1,s?(c--,s=!1):(n<<=1,n|=1,r++)):(e=t,s?--c==0&&(r++,s=!1):(n<<=1,r++)),r===20)m|=n,n=0;else if(r===52){v|=n;break}if(t===1){r<20?m|=n<<20-r:r<52&&(v|=n<<52-r);break}}return m|=c<<20,new le(m|=o,v)},F.longBitsToDouble=function(i){var e,t,n,r,s=i.high,o=i.low,c=s&1<<31?-1:1;for(n=((2146435072&s)>>20)-q,r=0,t=1<<19,e=1;e<=20;e++)s&t&&(r+=Z(2,-e)),t>>>=1;for(t=1<<31,e=21;e<=52;e++)o&t&&(r+=Z(2,-e)),t>>>=1;if(n===-1023){if(r===0)return 0*c;n=-1022}else{if(n===1024)return r===0?c/0:NaN;r+=1}return c*r*Z(2,n)});var Q=function(i){function e(t){var n;return l(this,e),(n=h(this,e,[t])).name=Object.keys({RuntimeException:e})[0],n}return _(e,i),g(e)}(p),me=function(i){function e(){var t;return l(this,e),t=h(this,e),e.constructor_.apply(t,arguments),t}return _(e,i),g(e,null,[{key:"constructor_",value:function(){if(arguments.length===0)Q.constructor_.call(this);else if(arguments.length===1){var t=arguments[0];Q.constructor_.call(this,t)}}}])}(Q),J=function(){function i(){l(this,i)}return g(i,null,[{key:"shouldNeverReachHere",value:function(){if(arguments.length===0)i.shouldNeverReachHere(null);else if(arguments.length===1){var e=arguments[0];throw new me("Should never reach here"+(e!==null?": "+e:""))}}},{key:"isTrue",value:function(){if(arguments.length===1){var e=arguments[0];i.isTrue(e,null)}else if(arguments.length===2){var t=arguments[1];if(!arguments[0])throw t===null?new me:new me(t)}}},{key:"equals",value:function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];i.equals(e,t,null)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];if(!r.equals(n))throw new me("Expected "+n+" but encountered "+r+(s!==null?": "+s:""))}}}])}(),fe=new ArrayBuffer(8),ge=new Float64Array(fe),ye=new Int32Array(fe),O=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return g(i,[{key:"getM",value:function(){return F.NaN}},{key:"setOrdinate",value:function(e,t){switch(e){case i.X:this.x=t;break;case i.Y:this.y=t;break;case i.Z:this.setZ(t);break;default:throw new x("Invalid ordinate index: "+e)}}},{key:"equals2D",value:function(){if(arguments.length===1){var e=arguments[0];return this.x===e.x&&this.y===e.y}if(arguments.length===2){var t=arguments[0],n=arguments[1];return!!ae.equalsWithTolerance(this.x,t.x,n)&&!!ae.equalsWithTolerance(this.y,t.y,n)}}},{key:"setM",value:function(e){throw new x("Invalid ordinate index: "+i.M)}},{key:"getZ",value:function(){return this.z}},{key:"getOrdinate",value:function(e){switch(e){case i.X:return this.x;case i.Y:return this.y;case i.Z:return this.getZ()}throw new x("Invalid ordinate index: "+e)}},{key:"equals3D",value:function(e){return this.x===e.x&&this.y===e.y&&(this.getZ()===e.getZ()||F.isNaN(this.getZ())&&F.isNaN(e.getZ()))}},{key:"equals",value:function(e){return e instanceof i&&this.equals2D(e)}},{key:"equalInZ",value:function(e,t){return ae.equalsWithTolerance(this.getZ(),e.getZ(),t)}},{key:"setX",value:function(e){this.x=e}},{key:"compareTo",value:function(e){var t=e;return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0}},{key:"getX",value:function(){return this.x}},{key:"setZ",value:function(e){this.z=e}},{key:"clone",value:function(){try{return null}catch(e){if(e instanceof CloneNotSupportedException)return J.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw e}}},{key:"copy",value:function(){return new i(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}},{key:"distance3D",value:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.getZ()-e.getZ();return Math.sqrt(t*t+n*n+r*r)}},{key:"getY",value:function(){return this.y}},{key:"setY",value:function(e){this.y=e}},{key:"distance",value:function(e){var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)}},{key:"hashCode",value:function(){var e=17;return e=37*(e=37*e+i.hashCode(this.x))+i.hashCode(this.y)}},{key:"setCoordinate",value:function(e){this.x=e.x,this.y=e.y,this.z=e.getZ()}},{key:"interfaces_",get:function(){return[C,M,P]}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)i.constructor_.call(this,0,0);else if(arguments.length===1){var e=arguments[0];i.constructor_.call(this,e.x,e.y,e.getZ())}else if(arguments.length===2){var t=arguments[0],n=arguments[1];i.constructor_.call(this,t,n,i.NULL_ORDINATE)}else if(arguments.length===3){var r=arguments[0],s=arguments[1],o=arguments[2];this.x=r,this.y=s,this.z=o}}},{key:"hashCode",value:function(e){return ge[0]=e,ye[0]^ye[1]}}])}(),Ie=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return g(i,[{key:"compare",value:function(e,t){var n=i.compare(e.x,t.x);if(n!==0)return n;var r=i.compare(e.y,t.y);return r!==0?r:this._dimensionsToTest<=2?0:i.compare(e.getZ(),t.getZ())}},{key:"interfaces_",get:function(){return[ee]}}],[{key:"constructor_",value:function(){if(this._dimensionsToTest=2,arguments.length===0)i.constructor_.call(this,2);else if(arguments.length===1){var e=arguments[0];if(e!==2&&e!==3)throw new x("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}}},{key:"compare",value:function(e,t){return e<t?-1:e>t?1:F.isNaN(e)?F.isNaN(t)?0:-1:F.isNaN(t)?1:0}}])}();O.DimensionalComparator=Ie,O.NULL_ORDINATE=F.NaN,O.X=0,O.Y=1,O.Z=2,O.M=3;var de=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return g(i,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(e){if(!(e instanceof i))return!1;var t=e;return this.isNull()?t.isNull():this._maxx===t.getMaxX()&&this._maxy===t.getMaxY()&&this._minx===t.getMinX()&&this._miny===t.getMinY()}},{key:"intersection",value:function(e){if(this.isNull()||e.isNull()||!this.intersects(e))return new i;var t=this._minx>e._minx?this._minx:e._minx,n=this._miny>e._miny?this._miny:e._miny;return new i(t,this._maxx<e._maxx?this._maxx:e._maxx,n,this._maxy<e._maxy?this._maxy:e._maxy)}},{key:"isNull",value:function(){return this._maxx<this._minx}},{key:"getMaxX",value:function(){return this._maxx}},{key:"covers",value:function(){if(arguments.length===1){if(arguments[0]instanceof O){var e=arguments[0];return this.covers(e.x,e.y)}if(arguments[0]instanceof i){var t=arguments[0];return!this.isNull()&&!t.isNull()&&t.getMinX()>=this._minx&&t.getMaxX()<=this._maxx&&t.getMinY()>=this._miny&&t.getMaxY()<=this._maxy}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}}},{key:"intersects",value:function(){if(arguments.length===1){if(arguments[0]instanceof i){var e=arguments[0];return!this.isNull()&&!e.isNull()&&!(e._minx>this._maxx||e._maxx<this._minx||e._miny>this._maxy||e._maxy<this._miny)}if(arguments[0]instanceof O){var t=arguments[0];return this.intersects(t.x,t.y)}}else if(arguments.length===2){if(arguments[0]instanceof O&&arguments[1]instanceof O){var n=arguments[0],r=arguments[1];return!this.isNull()&&!((n.x<r.x?n.x:r.x)>this._maxx)&&!((n.x>r.x?n.x:r.x)<this._minx)&&!((n.y<r.y?n.y:r.y)>this._maxy)&&!((n.y>r.y?n.y:r.y)<this._miny)}if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var s=arguments[0],o=arguments[1];return!this.isNull()&&!(s>this._maxx||s<this._minx||o>this._maxy||o<this._miny)}}}},{key:"getMinY",value:function(){return this._miny}},{key:"getDiameter",value:function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return Math.sqrt(e*e+t*t)}},{key:"getMinX",value:function(){return this._minx}},{key:"expandToInclude",value:function(){if(arguments.length===1){if(arguments[0]instanceof O){var e=arguments[0];this.expandToInclude(e.x,e.y)}else if(arguments[0]instanceof i){var t=arguments[0];if(t.isNull())return null;this.isNull()?(this._minx=t.getMinX(),this._maxx=t.getMaxX(),this._miny=t.getMinY(),this._maxy=t.getMaxY()):(t._minx<this._minx&&(this._minx=t._minx),t._maxx>this._maxx&&(this._maxx=t._maxx),t._miny<this._miny&&(this._miny=t._miny),t._maxy>this._maxy&&(this._maxy=t._maxy))}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}}},{key:"minExtent",value:function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e<t?e:t}},{key:"getWidth",value:function(){return this.isNull()?0:this._maxx-this._minx}},{key:"compareTo",value:function(e){var t=e;return this.isNull()?t.isNull()?0:-1:t.isNull()?1:this._minx<t._minx?-1:this._minx>t._minx?1:this._miny<t._miny?-1:this._miny>t._miny?1:this._maxx<t._maxx?-1:this._maxx>t._maxx?1:this._maxy<t._maxy?-1:this._maxy>t._maxy?1:0}},{key:"translate",value:function(e,t){if(this.isNull())return null;this.init(this.getMinX()+e,this.getMaxX()+e,this.getMinY()+t,this.getMaxY()+t)}},{key:"copy",value:function(){return new i(this)}},{key:"toString",value:function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}},{key:"setToNull",value:function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}},{key:"disjoint",value:function(e){return!(!this.isNull()&&!e.isNull())||e._minx>this._maxx||e._maxx<this._minx||e._miny>this._maxy||e._maxy<this._miny}},{key:"getHeight",value:function(){return this.isNull()?0:this._maxy-this._miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e>t?e:t}},{key:"expandBy",value:function(){if(arguments.length===1){var e=arguments[0];this.expandBy(e,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=t,this._maxx+=t,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}},{key:"contains",value:function(){if(arguments.length===1){if(arguments[0]instanceof i){var e=arguments[0];return this.covers(e)}if(arguments[0]instanceof O){var t=arguments[0];return this.covers(t)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.covers(n,r)}}},{key:"centre",value:function(){return this.isNull()?null:new O((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof O){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof i){var t=arguments[0];this._minx=t._minx,this._maxx=t._maxx,this._miny=t._miny,this._maxy=t._maxy}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(arguments.length===4){var s=arguments[0],o=arguments[1],c=arguments[2],m=arguments[3];s<o?(this._minx=s,this._maxx=o):(this._minx=o,this._maxx=s),c<m?(this._miny=c,this._maxy=m):(this._miny=m,this._maxy=c)}}},{key:"getMaxY",value:function(){return this._maxy}},{key:"distance",value:function(e){if(this.intersects(e))return 0;var t=0;this._maxx<e._minx?t=e._minx-this._maxx:this._minx>e._maxx&&(t=this._minx-e._maxx);var n=0;return this._maxy<e._miny?n=e._miny-this._maxy:this._miny>e._maxy&&(n=this._miny-e._maxy),t===0?n:n===0?t:Math.sqrt(t*t+n*n)}},{key:"hashCode",value:function(){var e=17;return e=37*(e=37*(e=37*(e=37*e+O.hashCode(this._minx))+O.hashCode(this._maxx))+O.hashCode(this._miny))+O.hashCode(this._maxy)}},{key:"interfaces_",get:function(){return[C,P]}}],[{key:"constructor_",value:function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof O){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof i){var t=arguments[0];this.init(t)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(arguments.length===4){var s=arguments[0],o=arguments[1],c=arguments[2],m=arguments[3];this.init(s,o,c,m)}}},{key:"intersects",value:function(){if(arguments.length===3){var e=arguments[0],t=arguments[1],n=arguments[2];return n.x>=(e.x<t.x?e.x:t.x)&&n.x<=(e.x>t.x?e.x:t.x)&&n.y>=(e.y<t.y?e.y:t.y)&&n.y<=(e.y>t.y?e.y:t.y)}if(arguments.length===4){var r=arguments[0],s=arguments[1],o=arguments[2],c=arguments[3],m=Math.min(o.x,c.x),v=Math.max(o.x,c.x),b=Math.min(r.x,s.x),D=Math.max(r.x,s.x);return!(b>v)&&!(D<m)&&(m=Math.min(o.y,c.y),v=Math.max(o.y,c.y),b=Math.min(r.y,s.y),D=Math.max(r.y,s.y),!(b>v)&&!(D<m))}}}])}(),K=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return g(i,[{key:"isGeometryCollection",value:function(){return this.getTypeCode()===i.TYPECODE_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this._factory}},{key:"getGeometryN",value:function(e){return this}},{key:"getArea",value:function(){return 0}},{key:"isRectangle",value:function(){return!1}},{key:"equalsExact",value:function(e){return this===e||this.equalsExact(e,0)}},{key:"geometryChanged",value:function(){this.apply(i.geometryChangedFilter)}},{key:"geometryChangedAction",value:function(){this._envelope=null}},{key:"equalsNorm",value:function(e){return e!==null&&this.norm().equalsExact(e.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){var e;if(arguments.length===1){var t=arguments[0];return e=t,this.getTypeCode()!==e.getTypeCode()?this.getTypeCode()-e.getTypeCode():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(arguments.length===2){var n=arguments[0],r=arguments[1];return e=n,this.getTypeCode()!==e.getTypeCode()?this.getTypeCode()-e.getTypeCode():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(n,r)}}},{key:"getUserData",value:function(){return this._userData}},{key:"getSRID",value:function(){return this._SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(e){if(e.getTypeCode()===i.TYPECODE_GEOMETRYCOLLECTION)throw new x("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(e,t,n){return n===0?e.equals(t):e.distance(t)<=n}},{key:"norm",value:function(){var e=this.copy();return e.normalize(),e}},{key:"reverse",value:function(){var e=this.reverseInternal();return this.envelope!=null&&(e.envelope=this.envelope.copy()),e.setSRID(this.getSRID()),e}},{key:"copy",value:function(){var e=this.copyInternal();return e.envelope=this._envelope==null?null:this._envelope.copy(),e._SRID=this._SRID,e._userData=this._userData,e}},{key:"getPrecisionModel",value:function(){return this._factory.getPrecisionModel()}},{key:"getEnvelopeInternal",value:function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new de(this._envelope)}},{key:"setSRID",value:function(e){this._SRID=e}},{key:"setUserData",value:function(e){this._userData=e}},{key:"compare",value:function(e,t){for(var n=e.iterator(),r=t.iterator();n.hasNext()&&r.hasNext();){var s=n.next(),o=r.next(),c=s.compareTo(o);if(c!==0)return c}return n.hasNext()?1:r.hasNext()?-1:0}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isEquivalentClass",value:function(e){return this.getClass()===e.getClass()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getTypeCode()===i.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===i.TYPECODE_MULTIPOINT||this.getTypeCode()===i.TYPECODE_MULTILINESTRING||this.getTypeCode()===i.TYPECODE_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[M,C,P]}},{key:"getClass",value:function(){return i}}],[{key:"hasNonEmptyElements",value:function(e){for(var t=0;t<e.length;t++)if(!e[t].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(e){for(var t=0;t<e.length;t++)if(e[t]===null)return!0;return!1}}])}();K.constructor_=function(i){i&&(this._envelope=null,this._userData=null,this._factory=i,this._SRID=i.getSRID())},K.TYPECODE_POINT=0,K.TYPECODE_MULTIPOINT=1,K.TYPECODE_LINESTRING=2,K.TYPECODE_LINEARRING=3,K.TYPECODE_MULTILINESTRING=4,K.TYPECODE_POLYGON=5,K.TYPECODE_MULTIPOLYGON=6,K.TYPECODE_GEOMETRYCOLLECTION=7,K.TYPENAME_POINT="Point",K.TYPENAME_MULTIPOINT="MultiPoint",K.TYPENAME_LINESTRING="LineString",K.TYPENAME_LINEARRING="LinearRing",K.TYPENAME_MULTILINESTRING="MultiLineString",K.TYPENAME_POLYGON="Polygon",K.TYPENAME_MULTIPOLYGON="MultiPolygon",K.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",K.geometryChangedFilter={get interfaces_(){return[S]},filter:function(i){i.geometryChangedAction()}};var k=function(){function i(){l(this,i)}return g(i,null,[{key:"toLocationSymbol",value:function(e){switch(e){case i.EXTERIOR:return"e";case i.BOUNDARY:return"b";case i.INTERIOR:return"i";case i.NONE:return"-"}throw new x("Unknown location value: "+e)}}])}();k.INTERIOR=0,k.BOUNDARY=1,k.EXTERIOR=2,k.NONE=-1;var Ne=function(){return g(function i(){l(this,i)},[{key:"add",value:function(){}},{key:"addAll",value:function(){}},{key:"isEmpty",value:function(){}},{key:"iterator",value:function(){}},{key:"size",value:function(){}},{key:"toArray",value:function(){}},{key:"remove",value:function(){}}])}(),Re=function(i){function e(t){var n;return l(this,e),(n=h(this,e,[t])).name=Object.keys({NoSuchElementException:e})[0],n}return _(e,i),g(e)}(p),Ce=function(i){function e(t){var n;return l(this,e),(n=h(this,e,[t])).name=Object.keys({UnsupportedOperationException:e})[0],n}return _(e,i),g(e)}(p),Be=function(i){function e(){return l(this,e),h(this,e,arguments)}return _(e,i),g(e,[{key:"contains",value:function(){}}])}(Ne),De=function(i){function e(t){var n;return l(this,e),(n=h(this,e)).map=new Map,t instanceof Ne&&n.addAll(t),n}return _(e,i),g(e,[{key:"contains",value:function(t){var n=t.hashCode?t.hashCode():t;return!!this.map.has(n)}},{key:"add",value:function(t){var n=t.hashCode?t.hashCode():t;return!this.map.has(n)&&!!this.map.set(n,t)}},{key:"addAll",value:function(t){var n,r=w(t);try{for(r.s();!(n=r.n()).done;){var s=n.value;this.add(s)}}catch(o){r.e(o)}finally{r.f()}return!0}},{key:"remove",value:function(){throw new Ce}},{key:"size",value:function(){return this.map.size}},{key:"isEmpty",value:function(){return this.map.size===0}},{key:"toArray",value:function(){return Array.from(this.map.values())}},{key:"iterator",value:function(){return new it(this.map)}},{key:Symbol.iterator,value:function(){return this.map}}])}(Be),it=function(){return g(function i(e){l(this,i),this.iterator=e.values();var t=this.iterator.next(),n=t.done,r=t.value;this.done=n,this.value=r},[{key:"next",value:function(){if(this.done)throw new Re;var i=this.value,e=this.iterator.next(),t=e.done,n=e.value;return this.done=t,this.value=n,i}},{key:"hasNext",value:function(){return!this.done}},{key:"remove",value:function(){throw new Ce}}])}(),H=function(){function i(){l(this,i)}return g(i,null,[{key:"opposite",value:function(e){return e===i.LEFT?i.RIGHT:e===i.RIGHT?i.LEFT:e}}])}();H.ON=0,H.LEFT=1,H.RIGHT=2;var bn=function(i){function e(t){var n;return l(this,e),(n=h(this,e,[t])).name=Object.keys({EmptyStackException:e})[0],n}return _(e,i),g(e)}(p),On=function(i){function e(t){var n;return l(this,e),(n=h(this,e,[t])).name=Object.keys({IndexOutOfBoundsException:e})[0],n}return _(e,i),g(e)}(p),ct=function(i){function e(){return l(this,e),h(this,e,arguments)}return _(e,i),g(e,[{key:"get",value:function(){}},{key:"set",value:function(){}},{key:"isEmpty",value:function(){}}])}(Ne),Ii=function(i){function e(){var t;return l(this,e),(t=h(this,e)).array=[],t}return _(e,i),g(e,[{key:"add",value:function(t){return this.array.push(t),!0}},{key:"get",value:function(t){if(t<0||t>=this.size())throw new On;return this.array[t]}},{key:"push",value:function(t){return this.array.push(t),t}},{key:"pop",value:function(){if(this.array.length===0)throw new bn;return this.array.pop()}},{key:"peek",value:function(){if(this.array.length===0)throw new bn;return this.array[this.array.length-1]}},{key:"empty",value:function(){return this.array.length===0}},{key:"isEmpty",value:function(){return this.empty()}},{key:"search",value:function(t){return this.array.indexOf(t)}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}}])}(ct);function he(i,e){return i.interfaces_&&i.interfaces_.indexOf(e)>-1}var _t=function(){return g(function i(e){l(this,i),this.str=e},[{key:"append",value:function(i){this.str+=i}},{key:"setCharAt",value:function(i,e){this.str=this.str.substr(0,i)+e+this.str.substr(i+1)}},{key:"toString",value:function(){return this.str}}])}(),kt=function(){function i(e){l(this,i),this.value=e}return g(i,[{key:"intValue",value:function(){return this.value}},{key:"compareTo",value:function(e){return this.value<e?-1:this.value>e?1:0}}],[{key:"compare",value:function(e,t){return e<t?-1:e>t?1:0}},{key:"isNan",value:function(e){return Number.isNaN(e)}},{key:"valueOf",value:function(e){return new i(e)}}])}(),Ni=function(){return g(function i(){l(this,i)},null,[{key:"isWhitespace",value:function(i){return i<=32&&i>=0||i===127}},{key:"toUpperCase",value:function(i){return i.toUpperCase()}}])}(),ue=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return g(i,[{key:"le",value:function(e){return this._hi<e._hi||this._hi===e._hi&&this._lo<=e._lo}},{key:"extractSignificantDigits",value:function(e,t){var n=this.abs(),r=i.magnitude(n._hi),s=i.TEN.pow(r);(n=n.divide(s)).gt(i.TEN)?(n=n.divide(i.TEN),r+=1):n.lt(i.ONE)&&(n=n.multiply(i.TEN),r-=1);for(var o=r+1,c=new _t,m=i.MAX_PRINT_DIGITS-1,v=0;v<=m;v++){e&&v===o&&c.append(".");var b=Math.trunc(n._hi);if(b<0)break;var D=!1,X=0;b>9?(D=!0,X="9"):X="0"+b,c.append(X),n=n.subtract(i.valueOf(b)).multiply(i.TEN),D&&n.selfAdd(i.TEN);var $=!0,te=i.magnitude(n._hi);if(te<0&&Math.abs(te)>=m-v&&($=!1),!$)break}return t[0]=r,c.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this._hi+this._lo}},{key:"subtract",value:function(){if(arguments[0]instanceof i){var e=arguments[0];return this.add(e.negate())}if(typeof arguments[0]=="number"){var t=arguments[0];return this.add(-t)}}},{key:"equals",value:function(){if(arguments.length===1&&arguments[0]instanceof i){var e=arguments[0];return this._hi===e._hi&&this._lo===e._lo}}},{key:"isZero",value:function(){return this._hi===0&&this._lo===0}},{key:"selfSubtract",value:function(){if(arguments[0]instanceof i){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e._hi,-e._lo)}if(typeof arguments[0]=="number"){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t,0)}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(e){return this.le(e)?this:e}},{key:"selfDivide",value:function(){if(arguments.length===1){if(arguments[0]instanceof i){var e=arguments[0];return this.selfDivide(e._hi,e._lo)}if(typeof arguments[0]=="number"){var t=arguments[0];return this.selfDivide(t,0)}}else if(arguments.length===2){var n,r,s,o,c=arguments[0],m=arguments[1],v=null,b=null,D=null,X=null;return s=this._hi/c,X=(v=(D=i.SPLIT*s)-(v=D-s))*(b=(X=i.SPLIT*c)-(b=X-c))-(o=s*c)+v*(r=c-b)+(n=s-v)*b+n*r,X=s+(D=(this._hi-o-X+this._lo-s*m)/c),this._hi=X,this._lo=s-X+D,this}}},{key:"dump",value:function(){return"DD<"+this._hi+", "+this._lo+">"}},{key:"divide",value:function(){if(arguments[0]instanceof i){var e,t,n,r,s=arguments[0],o=null,c=null,m=null,v=null;return e=(n=this._hi/s._hi)-(o=(m=i.SPLIT*n)-(o=m-n)),v=o*(c=(v=i.SPLIT*s._hi)-(c=v-s._hi))-(r=n*s._hi)+o*(t=s._hi-c)+e*c+e*t,new i(v=n+(m=(this._hi-r-v+this._lo-n*s._lo)/s._hi),n-v+m)}if(typeof arguments[0]=="number"){var b=arguments[0];return F.isNaN(b)?i.createNaN():i.copy(this).selfDivide(b,0)}}},{key:"ge",value:function(e){return this._hi>e._hi||this._hi===e._hi&&this._lo>=e._lo}},{key:"pow",value:function(e){if(e===0)return i.valueOf(1);var t=new i(this),n=i.valueOf(1),r=Math.abs(e);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(t),(r/=2)>0&&(t=t.sqr());else n=t;return e<0?n.reciprocal():n}},{key:"ceil",value:function(){if(this.isNaN())return i.NaN;var e=Math.ceil(this._hi),t=0;return e===this._hi&&(t=Math.ceil(this._lo)),new i(e,t)}},{key:"compareTo",value:function(e){var t=e;return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0}},{key:"rint",value:function(){return this.isNaN()?this:this.add(.5).floor()}},{key:"setValue",value:function(){if(arguments[0]instanceof i){var e=arguments[0];return this.init(e),this}if(typeof arguments[0]=="number"){var t=arguments[0];return this.init(t),this}}},{key:"max",value:function(e){return this.ge(e)?this:e}},{key:"sqrt",value:function(){if(this.isZero())return i.valueOf(0);if(this.isNegative())return i.NaN;var e=1/Math.sqrt(this._hi),t=this._hi*e,n=i.valueOf(t),r=this.subtract(n.sqr())._hi*(.5*e);return n.add(r)}},{key:"selfAdd",value:function(){if(arguments.length===1){if(arguments[0]instanceof i){var e=arguments[0];return this.selfAdd(e._hi,e._lo)}if(typeof arguments[0]=="number"){var t,n,r,s,o,c=arguments[0],m=null;return m=(r=this._hi+c)-(s=r-this._hi),n=(o=(m=c-s+(this._hi-m))+this._lo)+(r-(t=r+o)),this._hi=t+n,this._lo=n+(t-this._hi),this}}else if(arguments.length===2){var v,b,D,X,$=arguments[0],te=arguments[1],se=null,_e=null,ve=null;D=this._hi+$,b=this._lo+te,_e=D-(ve=D-this._hi),se=b-(X=b-this._lo);var Ee=(v=D+(ve=(_e=$-ve+(this._hi-_e))+b))+(ve=(se=te-X+(this._lo-se))+(ve+(D-v))),Oe=ve+(v-Ee);return this._hi=Ee,this._lo=Oe,this}}},{key:"selfMultiply",value:function(){if(arguments.length===1){if(arguments[0]instanceof i){var e=arguments[0];return this.selfMultiply(e._hi,e._lo)}if(typeof arguments[0]=="number"){var t=arguments[0];return this.selfMultiply(t,0)}}else if(arguments.length===2){var n,r,s=arguments[0],o=arguments[1],c=null,m=null,v=null,b=null;c=(v=i.SPLIT*this._hi)-this._hi,b=i.SPLIT*s,c=v-c,n=this._hi-c,m=b-s;var D=(v=this._hi*s)+(b=c*(m=b-m)-v+c*(r=s-m)+n*m+n*r+(this._hi*o+this._lo*s)),X=b+(c=v-D);return this._hi=D,this._lo=X,this}}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return i.NaN;var e=Math.floor(this._hi),t=0;return e===this._hi&&(t=Math.floor(this._lo)),new i(e,t)}},{key:"negate",value:function(){return this.isNaN()?this:new i(-this._hi,-this._lo)}},{key:"clone",value:function(){try{return null}catch(e){if(e instanceof CloneNotSupportedException)return null;throw e}}},{key:"multiply",value:function(){if(arguments[0]instanceof i){var e=arguments[0];return e.isNaN()?i.createNaN():i.copy(this).selfMultiply(e)}if(typeof arguments[0]=="number"){var t=arguments[0];return F.isNaN(t)?i.createNaN():i.copy(this).selfMultiply(t,0)}}},{key:"isNaN",value:function(){return F.isNaN(this._hi)}},{key:"intValue",value:function(){return Math.trunc(this._hi)}},{key:"toString",value:function(){var e=i.magnitude(this._hi);return e>=-3&&e<=20?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var e=this.getSpecialNumberString();if(e!==null)return e;var t=new Array(1).fill(null),n=this.extractSignificantDigits(!0,t),r=t[0]+1,s=n;if(n.charAt(0)===".")s="0"+n;else if(r<0)s="0."+i.stringOfChar("0",-r)+n;else if(n.indexOf(".")===-1){var o=r-n.length;s=n+i.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+s:s}},{key:"reciprocal",value:function(){var e,t,n,r,s=null,o=null,c=null,m=null;e=(n=1/this._hi)-(s=(c=i.SPLIT*n)-(s=c-n)),o=(m=i.SPLIT*this._hi)-this._hi;var v=n+(c=(1-(r=n*this._hi)-(m=s*(o=m-o)-r+s*(t=this._hi-o)+e*o+e*t)-n*this._lo)/this._hi);return new i(v,n-v+c)}},{key:"toSciNotation",value:function(){if(this.isZero())return i.SCI_NOT_ZERO;var e=this.getSpecialNumberString();if(e!==null)return e;var t=new Array(1).fill(null),n=this.extractSignificantDigits(!1,t),r=i.SCI_NOT_EXPONENT_CHAR+t[0];if(n.charAt(0)==="0")throw new IllegalStateException("Found leading zero: "+n);var s="";n.length>1&&(s=n.substring(1));var o=n.charAt(0)+"."+s;return this.isNegative()?"-"+o+r:o+r}},{key:"abs",value:function(){return this.isNaN()?i.NaN:this.isNegative()?this.negate():new i(this)}},{key:"isPositive",value:function(){return this._hi>0||this._hi===0&&this._lo>0}},{key:"lt",value:function(e){return this._hi<e._hi||this._hi===e._hi&&this._lo<e._lo}},{key:"add",value:function(){if(arguments[0]instanceof i){var e=arguments[0];return i.copy(this).selfAdd(e)}if(typeof arguments[0]=="number"){var t=arguments[0];return i.copy(this).selfAdd(t)}}},{key:"init",value:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var e=arguments[0];this._hi=e,this._lo=0}else if(arguments[0]instanceof i){var t=arguments[0];this._hi=t._hi,this._lo=t._lo}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}}},{key:"gt",value:function(e){return this._hi>e._hi||this._hi===e._hi&&this._lo>e._lo}},{key:"isNegative",value:function(){return this._hi<0||this._hi===0&&this._lo<0}},{key:"trunc",value:function(){return this.isNaN()?i.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}},{key:"interfaces_",get:function(){return[P,C,M]}}],[{key:"constructor_",value:function(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof i){var t=arguments[0];this.init(t)}else if(typeof arguments[0]=="string"){var n=arguments[0];i.constructor_.call(this,i.parse(n))}}else if(arguments.length===2){var r=arguments[0],s=arguments[1];this.init(r,s)}}},{key:"determinant",value:function(){if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];return i.determinant(i.valueOf(e),i.valueOf(t),i.valueOf(n),i.valueOf(r))}if(arguments[3]instanceof i&&arguments[2]instanceof i&&arguments[0]instanceof i&&arguments[1]instanceof i){var s=arguments[1],o=arguments[2],c=arguments[3];return arguments[0].multiply(c).selfSubtract(s.multiply(o))}}},{key:"sqr",value:function(e){return i.valueOf(e).selfMultiply(e)}},{key:"valueOf",value:function(){if(typeof arguments[0]=="string"){var e=arguments[0];return i.parse(e)}if(typeof arguments[0]=="number")return new i(arguments[0])}},{key:"sqrt",value:function(e){return i.valueOf(e).sqrt()}},{key:"parse",value:function(e){for(var t=0,n=e.length;Ni.isWhitespace(e.charAt(t));)t++;var r=!1;if(t<n){var s=e.charAt(t);s!=="-"&&s!=="+"||(t++,s==="-"&&(r=!0))}for(var o=new i,c=0,m=0,v=0,b=!1;!(t>=n);){var D=e.charAt(t);if(t++,Ni.isDigit(D)){var X=D-"0";o.selfMultiply(i.TEN),o.selfAdd(X),c++}else{if(D!=="."){if(D==="e"||D==="E"){var $=e.substring(t);try{v=kt.parseInt($)}catch(Ee){throw Ee instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+$+" in string "+e):Ee}break}throw new NumberFormatException("Unexpected character '"+D+"' at position "+t+" in string "+e)}m=c,b=!0}}var te=o;b||(m=c);var se=c-m-v;if(se===0)te=o;else if(se>0){var _e=i.TEN.pow(se);te=o.divide(_e)}else if(se<0){var ve=i.TEN.pow(-se);te=o.multiply(ve)}return r?te.negate():te}},{key:"createNaN",value:function(){return new i(F.NaN,F.NaN)}},{key:"copy",value:function(e){return new i(e)}},{key:"magnitude",value:function(e){var t=Math.abs(e),n=Math.log(t)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=t&&(r+=1),r}},{key:"stringOfChar",value:function(e,t){for(var n=new _t,r=0;r<t;r++)n.append(e);return n.toString()}}])}();ue.PI=new ue(3.141592653589793,12246467991473532e-32),ue.TWO_PI=new ue(6.283185307179586,24492935982947064e-32),ue.PI_2=new ue(1.5707963267948966,6123233995736766e-32),ue.E=new ue(2.718281828459045,14456468917292502e-32),ue.NaN=new ue(F.NaN,F.NaN),ue.EPS=123259516440783e-46,ue.SPLIT=134217729,ue.MAX_PRINT_DIGITS=32,ue.TEN=ue.valueOf(10),ue.ONE=ue.valueOf(1),ue.SCI_NOT_EXPONENT_CHAR="E",ue.SCI_NOT_ZERO="0.0E0";var Si=function(){function i(){l(this,i)}return g(i,null,[{key:"orientationIndex",value:function(e,t,n){var r=i.orientationIndexFilter(e,t,n);if(r<=1)return r;var s=ue.valueOf(t.x).selfAdd(-e.x),o=ue.valueOf(t.y).selfAdd(-e.y),c=ue.valueOf(n.x).selfAdd(-t.x),m=ue.valueOf(n.y).selfAdd(-t.y);return s.selfMultiply(m).selfSubtract(o.selfMultiply(c)).signum()}},{key:"signOfDet2x2",value:function(){if(arguments[3]instanceof ue&&arguments[2]instanceof ue&&arguments[0]instanceof ue&&arguments[1]instanceof ue){var e=arguments[1],t=arguments[2],n=arguments[3];return arguments[0].multiply(n).selfSubtract(e.multiply(t)).signum()}if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var r=arguments[0],s=arguments[1],o=arguments[2],c=arguments[3],m=ue.valueOf(r),v=ue.valueOf(s),b=ue.valueOf(o),D=ue.valueOf(c);return m.multiply(D).selfSubtract(v.multiply(b)).signum()}}},{key:"intersection",value:function(e,t,n,r){var s=new ue(e.y).selfSubtract(t.y),o=new ue(t.x).selfSubtract(e.x),c=new ue(e.x).selfMultiply(t.y).selfSubtract(new ue(t.x).selfMultiply(e.y)),m=new ue(n.y).selfSubtract(r.y),v=new ue(r.x).selfSubtract(n.x),b=new ue(n.x).selfMultiply(r.y).selfSubtract(new ue(r.x).selfMultiply(n.y)),D=o.multiply(b).selfSubtract(v.multiply(c)),X=m.multiply(c).selfSubtract(s.multiply(b)),$=s.multiply(v).selfSubtract(m.multiply(o)),te=D.selfDivide($).doubleValue(),se=X.selfDivide($).doubleValue();return F.isNaN(te)||F.isInfinite(te)||F.isNaN(se)||F.isInfinite(se)?null:new O(te,se)}},{key:"orientationIndexFilter",value:function(e,t,n){var r=null,s=(e.x-n.x)*(t.y-n.y),o=(e.y-n.y)*(t.x-n.x),c=s-o;if(s>0){if(o<=0)return i.signum(c);r=s+o}else{if(!(s<0)||o>=0)return i.signum(c);r=-s-o}var m=i.DP_SAFE_EPSILON*r;return c>=m||-c>=m?i.signum(c):2}},{key:"signum",value:function(e){return e>0?1:e<0?-1:0}}])}();Si.DP_SAFE_EPSILON=1e-15;var pe=function(){return g(function i(){l(this,i)},[{key:"getM",value:function(i){if(this.hasM()){var e=this.getDimension()-this.getMeasures();return this.getOrdinate(i,e)}return F.NaN}},{key:"setOrdinate",value:function(i,e,t){}},{key:"getZ",value:function(i){return this.hasZ()?this.getOrdinate(i,2):F.NaN}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(i,e){}},{key:"getCoordinate",value:function(){}},{key:"getCoordinateCopy",value:function(i){}},{key:"createCoordinate",value:function(){}},{key:"getDimension",value:function(){}},{key:"hasM",value:function(){return this.getMeasures()>0}},{key:"getX",value:function(i){}},{key:"hasZ",value:function(){return this.getDimension()-this.getMeasures()>2}},{key:"getMeasures",value:function(){return 0}},{key:"expandEnvelope",value:function(i){}},{key:"copy",value:function(){}},{key:"getY",value:function(i){}},{key:"toCoordinateArray",value:function(){}},{key:"interfaces_",get:function(){return[M]}}])}();pe.X=0,pe.Y=1,pe.Z=2,pe.M=3;var ce=function(){function i(){l(this,i)}return g(i,null,[{key:"index",value:function(e,t,n){return Si.orientationIndex(e,t,n)}},{key:"isCCW",value:function(){if(arguments[0]instanceof Array){var e=arguments[0],t=e.length-1;if(t<3)throw new x("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=e[0],r=0,s=1;s<=t;s++){var o=e[s];o.y>n.y&&(n=o,r=s)}var c=r;do(c-=1)<0&&(c=t);while(e[c].equals2D(n)&&c!==r);var m=r;do m=(m+1)%t;while(e[m].equals2D(n)&&m!==r);var v=e[c],b=e[m];if(v.equals2D(n)||b.equals2D(n)||v.equals2D(b))return!1;var D=i.index(v,n,b);return D===0?v.x>b.x:D>0}if(he(arguments[0],pe)){var X=arguments[0],$=X.size()-1;if($<3)throw new x("Ring has fewer than 4 points, so orientation cannot be determined");for(var te=X.getCoordinate(0),se=0,_e=1;_e<=$;_e++){var ve=X.getCoordinate(_e);ve.y>te.y&&(te=ve,se=_e)}var Ee=null,Oe=se;do(Oe-=1)<0&&(Oe=$),Ee=X.getCoordinate(Oe);while(Ee.equals2D(te)&&Oe!==se);var Pe=null,bt=se;do bt=(bt+1)%$,Pe=X.getCoordinate(bt);while(Pe.equals2D(te)&&bt!==se);if(Ee.equals2D(te)||Pe.equals2D(te)||Ee.equals2D(Pe))return!1;var yn=i.index(Ee,te,Pe);return yn===0?Ee.x>Pe.x:yn>0}}}])}();ce.CLOCKWISE=-1,ce.RIGHT=ce.CLOCKWISE,ce.COUNTERCLOCKWISE=1,ce.LEFT=ce.COUNTERCLOCKWISE,ce.COLLINEAR=0,ce.STRAIGHT=ce.COLLINEAR;var Oa=function(){return g(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this._minCoord}},{key:"getRightmostSide",value:function(i,e){var t=this.getRightmostSideOfSegment(i,e);return t<0&&(t=this.getRightmostSideOfSegment(i,e-1)),t<0&&(this._minCoord=null,this.checkForRightmostCoordinate(i)),t}},{key:"findRightmostEdgeAtVertex",value:function(){var i=this._minDe.getEdge().getCoordinates();J.isTrue(this._minIndex>0&&this._minIndex<i.length,"rightmost point expected to be interior vertex of edge");var e=i[this._minIndex-1],t=i[this._minIndex+1],n=ce.index(this._minCoord,t,e),r=!1;(e.y<this._minCoord.y&&t.y<this._minCoord.y&&n===ce.COUNTERCLOCKWISE||e.y>this._minCoord.y&&t.y>this._minCoord.y&&n===ce.CLOCKWISE)&&(r=!0),r&&(this._minIndex=this._minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(i,e){var t=i.getEdge().getCoordinates();if(e<0||e+1>=t.length||t[e].y===t[e+1].y)return-1;var n=H.LEFT;return t[e].y<t[e+1].y&&(n=H.RIGHT),n}},{key:"getEdge",value:function(){return this._orientedDe}},{key:"checkForRightmostCoordinate",value:function(i){for(var e=i.getEdge().getCoordinates(),t=0;t<e.length-1;t++)(this._minCoord===null||e[t].x>this._minCoord.x)&&(this._minDe=i,this._minIndex=t,this._minCoord=e[t])}},{key:"findRightmostEdgeAtNode",value:function(){var i=this._minDe.getNode().getEdges();this._minDe=i.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(i){for(var e=i.iterator();e.hasNext();){var t=e.next();t.isForward()&&this.checkForRightmostCoordinate(t)}J.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===H.LEFT&&(this._orientedDe=this._minDe.getSym())}}],[{key:"constructor_",value:function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}}])}(),ht=function(i){function e(t,n){var r;return l(this,e),(r=h(this,e,[n?t+" [ "+n+" ]":t])).pt=n?new O(n):void 0,r.name=Object.keys({TopologyException:e})[0],r}return _(e,i),g(e,[{key:"getCoordinate",value:function(){return this.pt}}])}(Q),Pa=function(){return g(function i(){l(this,i),this.array=[]},[{key:"addLast",value:function(i){this.array.push(i)}},{key:"removeFirst",value:function(){return this.array.shift()}},{key:"isEmpty",value:function(){return this.array.length===0}}])}(),oe=function(i){function e(t){var n;return l(this,e),(n=h(this,e)).array=[],t instanceof Ne&&n.addAll(t),n}return _(e,i),g(e,[{key:"interfaces_",get:function(){return[ct,Ne]}},{key:"ensureCapacity",value:function(){}},{key:"add",value:function(t){return arguments.length===1?this.array.push(t):this.array.splice(arguments[0],0,arguments[1]),!0}},{key:"clear",value:function(){this.array=[]}},{key:"addAll",value:function(t){var n,r=w(t);try{for(r.s();!(n=r.n()).done;){var s=n.value;this.array.push(s)}}catch(o){r.e(o)}finally{r.f()}}},{key:"set",value:function(t,n){var r=this.array[t];return this.array[t]=n,r}},{key:"iterator",value:function(){return new Aa(this)}},{key:"get",value:function(t){if(t<0||t>=this.size())throw new On;return this.array[t]}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"sort",value:function(t){t?this.array.sort(function(n,r){return t.compare(n,r)}):this.array.sort()}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"remove",value:function(t){for(var n=0,r=this.array.length;n<r;n++)if(this.array[n]===t)return!!this.array.splice(n,1);return!1}},{key:Symbol.iterator,value:function(){return this.array.values()}}])}(ct),Aa=function(){return g(function i(e){l(this,i),this.arrayList=e,this.position=0},[{key:"next",value:function(){if(this.position===this.arrayList.size())throw new Re;return this.arrayList.get(this.position++)}},{key:"hasNext",value:function(){return this.position<this.arrayList.size()}},{key:"set",value:function(i){return this.arrayList.set(this.position-1,i)}},{key:"remove",value:function(){this.arrayList.remove(this.arrayList.get(this.position))}}])}(),Da=function(){return g(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"clearVisitedEdges",value:function(){for(var i=this._dirEdgeList.iterator();i.hasNext();)i.next().setVisited(!1)}},{key:"getRightmostCoordinate",value:function(){return this._rightMostCoord}},{key:"computeNodeDepth",value:function(i){for(var e=null,t=i.getEdges().iterator();t.hasNext();){var n=t.next();if(n.isVisited()||n.getSym().isVisited()){e=n;break}}if(e===null)throw new ht("unable to find edge to compute depths at "+i.getCoordinate());i.getEdges().computeDepths(e);for(var r=i.getEdges().iterator();r.hasNext();){var s=r.next();s.setVisited(!0),this.copySymDepths(s)}}},{key:"computeDepth",value:function(i){this.clearVisitedEdges();var e=this._finder.getEdge();e.getNode(),e.getLabel(),e.setEdgeDepths(H.RIGHT,i),this.copySymDepths(e),this.computeDepths(e)}},{key:"create",value:function(i){this.addReachable(i),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var i=this._dirEdgeList.iterator();i.hasNext();){var e=i.next();e.getDepth(H.RIGHT)>=1&&e.getDepth(H.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}}},{key:"computeDepths",value:function(i){var e=new De,t=new Pa,n=i.getNode();for(t.addLast(n),e.add(n),i.setVisited(!0);!t.isEmpty();){var r=t.removeFirst();e.add(r),this.computeNodeDepth(r);for(var s=r.getEdges().iterator();s.hasNext();){var o=s.next().getSym();if(!o.isVisited()){var c=o.getNode();e.contains(c)||(t.addLast(c),e.add(c))}}}}},{key:"compareTo",value:function(i){var e=i;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0}},{key:"getEnvelope",value:function(){if(this._env===null){for(var i=new de,e=this._dirEdgeList.iterator();e.hasNext();)for(var t=e.next().getEdge().getCoordinates(),n=0;n<t.length-1;n++)i.expandToInclude(t[n]);this._env=i}return this._env}},{key:"addReachable",value:function(i){var e=new Ii;for(e.add(i);!e.empty();){var t=e.pop();this.add(t,e)}}},{key:"copySymDepths",value:function(i){var e=i.getSym();e.setDepth(H.LEFT,i.getDepth(H.RIGHT)),e.setDepth(H.RIGHT,i.getDepth(H.LEFT))}},{key:"add",value:function(i,e){i.setVisited(!0),this._nodes.add(i);for(var t=i.getEdges().iterator();t.hasNext();){var n=t.next();this._dirEdgeList.add(n);var r=n.getSym().getNode();r.isVisited()||e.push(r)}}},{key:"getNodes",value:function(){return this._nodes}},{key:"getDirectedEdges",value:function(){return this._dirEdgeList}},{key:"interfaces_",get:function(){return[C]}}],[{key:"constructor_",value:function(){this._finder=null,this._dirEdgeList=new oe,this._nodes=new oe,this._rightMostCoord=null,this._env=null,this._finder=new Oa}}])}(),wi=function(){return g(function i(){l(this,i)},null,[{key:"intersection",value:function(i,e,t,n){var r=i.x<e.x?i.x:e.x,s=i.y<e.y?i.y:e.y,o=i.x>e.x?i.x:e.x,c=i.y>e.y?i.y:e.y,m=t.x<n.x?t.x:n.x,v=t.y<n.y?t.y:n.y,b=t.x>n.x?t.x:n.x,D=t.y>n.y?t.y:n.y,X=((r>m?r:m)+(o<b?o:b))/2,$=((s>v?s:v)+(c<D?c:D))/2,te=i.x-X,se=i.y-$,_e=e.x-X,ve=e.y-$,Ee=t.x-X,Oe=t.y-$,Pe=n.x-X,bt=n.y-$,yn=se-ve,is=_e-te,rs=te*ve-_e*se,ss=Oe-bt,as=Pe-Ee,os=Ee*bt-Pe*Oe,us=yn*as-ss*is,zi=(is*os-as*rs)/us,Xi=(ss*rs-yn*os)/us;return F.isNaN(zi)||F.isInfinite(zi)||F.isNaN(Xi)||F.isInfinite(Xi)?null:new O(zi+X,Xi+$)}}])}(),Ue=function(){return g(function i(){l(this,i)},null,[{key:"arraycopy",value:function(i,e,t,n,r){for(var s=0,o=e;o<e+r;o++)t[n+s]=i[o],s++}},{key:"getProperty",value:function(i){return{"line.separator":`
`}[i]}}])}(),ln=function(){function i(){l(this,i)}return g(i,null,[{key:"log10",value:function(e){var t=Math.log(e);return F.isInfinite(t)||F.isNaN(t)?t:t/i.LOG_10}},{key:"min",value:function(e,t,n,r){var s=e;return t<s&&(s=t),n<s&&(s=n),r<s&&(s=r),s}},{key:"clamp",value:function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1],n=arguments[2];return e<t?t:e>n?n:e}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],s=arguments[1],o=arguments[2];return r<s?s:r>o?o:r}}},{key:"wrap",value:function(e,t){return e<0?t- -e%t:e%t}},{key:"max",value:function(){if(arguments.length===3){var e=arguments[1],t=arguments[2],n=arguments[0];return e>n&&(n=e),t>n&&(n=t),n}if(arguments.length===4){var r=arguments[1],s=arguments[2],o=arguments[3],c=arguments[0];return r>c&&(c=r),s>c&&(c=s),o>c&&(c=o),c}}},{key:"average",value:function(e,t){return(e+t)/2}}])}();ln.LOG_10=Math.log(10);var rt=function(){function i(){l(this,i)}return g(i,null,[{key:"segmentToSegment",value:function(e,t,n,r){if(e.equals(t))return i.pointToSegment(e,n,r);if(n.equals(r))return i.pointToSegment(r,e,t);var s=!1;if(de.intersects(e,t,n,r)){var o=(t.x-e.x)*(r.y-n.y)-(t.y-e.y)*(r.x-n.x);if(o===0)s=!0;else{var c=(e.y-n.y)*(r.x-n.x)-(e.x-n.x)*(r.y-n.y),m=((e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y))/o,v=c/o;(v<0||v>1||m<0||m>1)&&(s=!0)}}else s=!0;return s?ln.min(i.pointToSegment(e,n,r),i.pointToSegment(t,n,r),i.pointToSegment(n,e,t),i.pointToSegment(r,e,t)):0}},{key:"pointToSegment",value:function(e,t,n){if(t.x===n.x&&t.y===n.y)return e.distance(t);var r=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y),s=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/r;if(s<=0)return e.distance(t);if(s>=1)return e.distance(n);var o=((t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y))/r;return Math.abs(o)*Math.sqrt(r)}},{key:"pointToLinePerpendicular",value:function(e,t,n){var r=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y),s=((t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y))/r;return Math.abs(s)*Math.sqrt(r)}},{key:"pointToSegmentString",value:function(e,t){if(t.length===0)throw new x("Line array must contain at least one vertex");for(var n=e.distance(t[0]),r=0;r<t.length-1;r++){var s=i.pointToSegment(e,t[r],t[r+1]);s<n&&(n=s)}return n}}])}(),pr=function(){return g(function i(){l(this,i)},[{key:"create",value:function(){if(arguments.length===1)arguments[0]instanceof Array||he(arguments[0],pe);else if(arguments.length!==2){if(arguments.length===3){var i=arguments[0],e=arguments[1];return this.create(i,e)}}}}])}(),Pn=function(){return g(function i(){l(this,i)},[{key:"filter",value:function(i){}}])}(),Fa=function(){return g(function i(){l(this,i)},null,[{key:"ofLine",value:function(i){var e=i.size();if(e<=1)return 0;var t=0,n=new O;i.getCoordinate(0,n);for(var r=n.x,s=n.y,o=1;o<e;o++){i.getCoordinate(o,n);var c=n.x,m=n.y,v=c-r,b=m-s;t+=Math.sqrt(v*v+b*b),r=c,s=m}return t}}])}(),_r=g(function i(){l(this,i)}),wt=function(){function i(){l(this,i)}return g(i,null,[{key:"copyCoord",value:function(e,t,n,r){for(var s=Math.min(e.getDimension(),n.getDimension()),o=0;o<s;o++)n.setOrdinate(r,o,e.getOrdinate(t,o))}},{key:"isRing",value:function(e){var t=e.size();return t===0||!(t<=3)&&e.getOrdinate(0,pe.X)===e.getOrdinate(t-1,pe.X)&&e.getOrdinate(0,pe.Y)===e.getOrdinate(t-1,pe.Y)}},{key:"scroll",value:function(){if(arguments.length===2){if(he(arguments[0],pe)&&Number.isInteger(arguments[1])){var e=arguments[0],t=arguments[1];i.scroll(e,t,i.isRing(e))}else if(he(arguments[0],pe)&&arguments[1]instanceof O){var n=arguments[0],r=arguments[1],s=i.indexOf(r,n);if(s<=0)return null;i.scroll(n,s)}}else if(arguments.length===3){var o=arguments[0],c=arguments[1],m=arguments[2];if(c<=0)return null;for(var v=o.copy(),b=m?o.size()-1:o.size(),D=0;D<b;D++)for(var X=0;X<o.getDimension();X++)o.setOrdinate(D,X,v.getOrdinate((c+D)%b,X));if(m)for(var $=0;$<o.getDimension();$++)o.setOrdinate(b,$,o.getOrdinate(0,$))}}},{key:"isEqual",value:function(e,t){var n=e.size();if(n!==t.size())return!1;for(var r=Math.min(e.getDimension(),t.getDimension()),s=0;s<n;s++)for(var o=0;o<r;o++){var c=e.getOrdinate(s,o),m=t.getOrdinate(s,o);if(e.getOrdinate(s,o)!==t.getOrdinate(s,o)&&(!F.isNaN(c)||!F.isNaN(m)))return!1}return!0}},{key:"minCoordinateIndex",value:function(){if(arguments.length===1){var e=arguments[0];return i.minCoordinateIndex(e,0,e.size()-1)}if(arguments.length===3){for(var t=arguments[0],n=arguments[2],r=-1,s=null,o=arguments[1];o<=n;o++){var c=t.getCoordinate(o);(s===null||s.compareTo(c)>0)&&(s=c,r=o)}return r}}},{key:"extend",value:function(e,t,n){var r=e.create(n,t.getDimension()),s=t.size();if(i.copy(t,0,r,0,s),s>0)for(var o=s;o<n;o++)i.copy(t,s-1,r,o,1);return r}},{key:"reverse",value:function(e){for(var t=e.size()-1,n=Math.trunc(t/2),r=0;r<=n;r++)i.swap(e,r,t-r)}},{key:"swap",value:function(e,t,n){if(t===n)return null;for(var r=0;r<e.getDimension();r++){var s=e.getOrdinate(t,r);e.setOrdinate(t,r,e.getOrdinate(n,r)),e.setOrdinate(n,r,s)}}},{key:"copy",value:function(e,t,n,r,s){for(var o=0;o<s;o++)i.copyCoord(e,t+o,n,r+o)}},{key:"ensureValidRing",value:function(e,t){var n=t.size();return n===0?t:n<=3?i.createClosedRing(e,t,4):t.getOrdinate(0,pe.X)===t.getOrdinate(n-1,pe.X)&&t.getOrdinate(0,pe.Y)===t.getOrdinate(n-1,pe.Y)?t:i.createClosedRing(e,t,n+1)}},{key:"indexOf",value:function(e,t){for(var n=0;n<t.size();n++)if(e.x===t.getOrdinate(n,pe.X)&&e.y===t.getOrdinate(n,pe.Y))return n;return-1}},{key:"createClosedRing",value:function(e,t,n){var r=e.create(n,t.getDimension()),s=t.size();i.copy(t,0,r,0,s);for(var o=s;o<n;o++)i.copy(t,0,r,o,1);return r}},{key:"minCoordinate",value:function(e){for(var t=null,n=0;n<e.size();n++){var r=e.getCoordinate(n);(t===null||t.compareTo(r)>0)&&(t=r)}return t}}])}(),W=function(){function i(){l(this,i)}return g(i,null,[{key:"toDimensionSymbol",value:function(e){switch(e){case i.FALSE:return i.SYM_FALSE;case i.TRUE:return i.SYM_TRUE;case i.DONTCARE:return i.SYM_DONTCARE;case i.P:return i.SYM_P;case i.L:return i.SYM_L;case i.A:return i.SYM_A}throw new x("Unknown dimension value: "+e)}},{key:"toDimensionValue",value:function(e){switch(Ni.toUpperCase(e)){case i.SYM_FALSE:return i.FALSE;case i.SYM_TRUE:return i.TRUE;case i.SYM_DONTCARE:return i.DONTCARE;case i.SYM_P:return i.P;case i.SYM_L:return i.L;case i.SYM_A:return i.A}throw new x("Unknown dimension symbol: "+e)}}])}();W.P=0,W.L=1,W.A=2,W.FALSE=-1,W.TRUE=-2,W.DONTCARE=-3,W.SYM_FALSE="F",W.SYM_TRUE="T",W.SYM_DONTCARE="*",W.SYM_P="0",W.SYM_L="1",W.SYM_A="2";var An=function(){return g(function i(){l(this,i)},[{key:"filter",value:function(i){}}])}(),Dn=function(){return g(function i(){l(this,i)},[{key:"filter",value:function(i,e){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}}])}(),cn=function(i){function e(){var t;return l(this,e),t=h(this,e),e.constructor_.apply(t,arguments),t}return _(e,i),g(e,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new de:this._points.expandEnvelope(new de)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getCoordinates",value:function(){return this._points.toCoordinateArray()}},{key:"copyInternal",value:function(){return new e(this._points.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof K){var t=arguments[0],n=arguments[1];if(!this.isEquivalentClass(t))return!1;var r=t;if(this._points.size()!==r._points.size())return!1;for(var s=0;s<this._points.size();s++)if(!this.equal(this._points.getCoordinate(s),r._points.getCoordinate(s),n))return!1;return!0}return R(e,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var n=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(n))){if(this._points.getCoordinate(t).compareTo(this._points.getCoordinate(n))>0){var r=this._points.copy();wt.reverse(r),this._points=r}return null}}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?W.FALSE:0}},{key:"isClosed",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"reverseInternal",value:function(){var t=this._points.copy();return wt.reverse(t),this.getFactory().createLineString(t)}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getTypeCode",value:function(){return K.TYPECODE_LINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return Fa.ofLine(this._points)}},{key:"getNumPoints",value:function(){return this._points.size()}},{key:"compareToSameClass",value:function(){if(arguments.length===1){for(var t=arguments[0],n=0,r=0;n<this._points.size()&&r<t._points.size();){var s=this._points.getCoordinate(n).compareTo(t._points.getCoordinate(r));if(s!==0)return s;n++,r++}return n<this._points.size()?1:r<t._points.size()?-1:0}if(arguments.length===2){var o=arguments[0];return arguments[1].compare(this._points,o._points)}}},{key:"apply",value:function(){if(he(arguments[0],Pn))for(var t=arguments[0],n=0;n<this._points.size();n++)t.filter(this._points.getCoordinate(n));else if(he(arguments[0],Dn)){var r=arguments[0];if(this._points.size()===0)return null;for(var s=0;s<this._points.size()&&(r.filter(this._points,s),!r.isDone());s++);r.isGeometryChanged()&&this.geometryChanged()}else he(arguments[0],An)?arguments[0].filter(this):he(arguments[0],S)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){throw new Ce}},{key:"isEquivalentClass",value:function(t){return t instanceof e}},{key:"getCoordinateN",value:function(t){return this._points.getCoordinate(t)}},{key:"getGeometryType",value:function(){return K.TYPENAME_LINESTRING}},{key:"getCoordinateSequence",value:function(){return this._points}},{key:"isEmpty",value:function(){return this._points.size()===0}},{key:"init",value:function(t){if(t===null&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),t.size()===1)throw new x("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t}},{key:"isCoordinate",value:function(t){for(var n=0;n<this._points.size();n++)if(this._points.getCoordinate(n).equals(t))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))}},{key:"interfaces_",get:function(){return[_r]}}],[{key:"constructor_",value:function(){if(this._points=null,arguments.length!==0){if(arguments.length===2){var t=arguments[0],n=arguments[1];K.constructor_.call(this,n),this.init(t)}}}}])}(K),kr=g(function i(){l(this,i)}),Ci=function(i){function e(){var t;return l(this,e),t=h(this,e),e.constructor_.apply(t,arguments),t}return _(e,i),g(e,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new de;var t=new de;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"copyInternal",value:function(){return new e(this._coordinates.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof K){var t=arguments[0],n=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),n))}return R(e,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return W.FALSE}},{key:"reverseInternal",value:function(){return this.getFactory().createPoint(this._coordinates.copy())}},{key:"getTypeCode",value:function(){return K.TYPECODE_POINT}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"getX",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(arguments.length===2){var n=arguments[0];return arguments[1].compare(this._coordinates,n._coordinates)}}},{key:"apply",value:function(){if(he(arguments[0],Pn)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(he(arguments[0],Dn)){var n=arguments[0];if(this.isEmpty())return null;n.filter(this._coordinates,0),n.isGeometryChanged()&&this.geometryChanged()}else he(arguments[0],An)?arguments[0].filter(this):he(arguments[0],S)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return K.TYPENAME_POINT}},{key:"getCoordinateSequence",value:function(){return this._coordinates}},{key:"getY",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return this._coordinates.size()===0}},{key:"init",value:function(t){t===null&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),J.isTrue(t.size()<=1),this._coordinates=t}},{key:"isSimple",value:function(){return!0}},{key:"interfaces_",get:function(){return[kr]}}],[{key:"constructor_",value:function(){this._coordinates=null;var t=arguments[0],n=arguments[1];K.constructor_.call(this,n),this.init(t)}}])}(K),xr=function(){function i(){l(this,i)}return g(i,null,[{key:"ofRing",value:function(){if(arguments[0]instanceof Array){var e=arguments[0];return Math.abs(i.ofRingSigned(e))}if(he(arguments[0],pe)){var t=arguments[0];return Math.abs(i.ofRingSigned(t))}}},{key:"ofRingSigned",value:function(){if(arguments[0]instanceof Array){var e=arguments[0];if(e.length<3)return 0;for(var t=0,n=e[0].x,r=1;r<e.length-1;r++){var s=e[r].x-n,o=e[r+1].y;t+=s*(e[r-1].y-o)}return t/2}if(he(arguments[0],pe)){var c=arguments[0],m=c.size();if(m<3)return 0;var v=new O,b=new O,D=new O;c.getCoordinate(0,b),c.getCoordinate(1,D);var X=b.x;D.x-=X;for(var $=0,te=1;te<m-1;te++)v.y=b.y,b.x=D.x,b.y=D.y,c.getCoordinate(te+1,D),D.x-=X,$+=b.x*(v.y-D.y);return $/2}}}])}(),Ct=function(){return g(function i(){l(this,i)},null,[{key:"sort",value:function(){var i=arguments,e=arguments[0];if(arguments.length===1)e.sort(function(X,$){return X.compareTo($)});else if(arguments.length===2)e.sort(function(X,$){return i[1].compare(X,$)});else if(arguments.length===3){var t=e.slice(arguments[1],arguments[2]);t.sort();var n=e.slice(0,arguments[1]).concat(t,e.slice(arguments[2],e.length));e.splice(0,e.length);var r,s=w(n);try{for(s.s();!(r=s.n()).done;){var o=r.value;e.push(o)}}catch(X){s.e(X)}finally{s.f()}}else if(arguments.length===4){var c=e.slice(arguments[1],arguments[2]);c.sort(function(X,$){return i[3].compare(X,$)});var m=e.slice(0,arguments[1]).concat(c,e.slice(arguments[2],e.length));e.splice(0,e.length);var v,b=w(m);try{for(b.s();!(v=b.n()).done;){var D=v.value;e.push(D)}}catch(X){b.e(X)}finally{b.f()}}}},{key:"asList",value:function(i){var e,t=new oe,n=w(i);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.add(r)}}catch(s){n.e(s)}finally{n.f()}return t}},{key:"copyOf",value:function(i,e){return i.slice(0,e)}}])}(),Er=g(function i(){l(this,i)}),Fn=function(i){function e(){var t;return l(this,e),t=h(this,e),e.constructor_.apply(t,arguments),t}return _(e,i),g(e,[{key:"computeEnvelopeInternal",value:function(){return this._shell.getEnvelopeInternal()}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),n=-1,r=this._shell.getCoordinates(),s=0;s<r.length;s++)t[++n]=r[s];for(var o=0;o<this._holes.length;o++)for(var c=this._holes[o].getCoordinates(),m=0;m<c.length;m++)t[++n]=c[m];return t}},{key:"getArea",value:function(){var t=0;t+=xr.ofRing(this._shell.getCoordinateSequence());for(var n=0;n<this._holes.length;n++)t-=xr.ofRing(this._holes[n].getCoordinateSequence());return t}},{key:"copyInternal",value:function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<this._holes.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)}},{key:"isRectangle",value:function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var t=this._shell.getCoordinateSequence(),n=this.getEnvelopeInternal(),r=0;r<5;r++){var s=t.getX(r);if(s!==n.getMinX()&&s!==n.getMaxX())return!1;var o=t.getY(r);if(o!==n.getMinY()&&o!==n.getMaxY())return!1}for(var c=t.getX(0),m=t.getY(0),v=1;v<=4;v++){var b=t.getX(v),D=t.getY(v);if(b!==c==(D!==m))return!1;c=b,m=D}return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof K){var t=arguments[0],n=arguments[1];if(!this.isEquivalentClass(t))return!1;var r=t,s=this._shell,o=r._shell;if(!s.equalsExact(o,n)||this._holes.length!==r._holes.length)return!1;for(var c=0;c<this._holes.length;c++)if(!this._holes[c].equalsExact(r._holes[c],n))return!1;return!0}return R(e,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){if(arguments.length===0){this._shell=this.normalized(this._shell,!0);for(var t=0;t<this._holes.length;t++)this._holes[t]=this.normalized(this._holes[t],!1);Ct.sort(this._holes)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];if(n.isEmpty())return null;var s=n.getCoordinateSequence(),o=wt.minCoordinateIndex(s,0,s.size()-2);wt.scroll(s,o,!0),ce.isCCW(s)===r&&wt.reverse(s)}}},{key:"getCoordinate",value:function(){return this._shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this._holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"reverseInternal",value:function(){for(var t=this.getExteriorRing().reverse(),n=new Array(this.getNumInteriorRing()).fill(null),r=0;r<n.length;r++)n[r]=this.getInteriorRingN(r).reverse();return this.getFactory().createPolygon(t,n)}},{key:"getTypeCode",value:function(){return K.TYPECODE_POLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var t=0;t+=this._shell.getLength();for(var n=0;n<this._holes.length;n++)t+=this._holes[n].getLength();return t}},{key:"getNumPoints",value:function(){for(var t=this._shell.getNumPoints(),n=0;n<this._holes.length;n++)t+=this._holes[n].getNumPoints();return t}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"normalized",value:function(t,n){var r=t.copy();return this.normalize(r,n),r}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var t=arguments[0],n=this._shell,r=t._shell;return n.compareToSameClass(r)}if(arguments.length===2){var s=arguments[1],o=arguments[0],c=this._shell,m=o._shell,v=c.compareToSameClass(m,s);if(v!==0)return v;for(var b=this.getNumInteriorRing(),D=o.getNumInteriorRing(),X=0;X<b&&X<D;){var $=this.getInteriorRingN(X),te=o.getInteriorRingN(X),se=$.compareToSameClass(te,s);if(se!==0)return se;X++}return X<b?1:X<D?-1:0}}},{key:"apply",value:function(){if(he(arguments[0],Pn)){var t=arguments[0];this._shell.apply(t);for(var n=0;n<this._holes.length;n++)this._holes[n].apply(t)}else if(he(arguments[0],Dn)){var r=arguments[0];if(this._shell.apply(r),!r.isDone())for(var s=0;s<this._holes.length&&(this._holes[s].apply(r),!r.isDone());s++);r.isGeometryChanged()&&this.geometryChanged()}else if(he(arguments[0],An))arguments[0].filter(this);else if(he(arguments[0],S)){var o=arguments[0];o.filter(this),this._shell.apply(o);for(var c=0;c<this._holes.length;c++)this._holes[c].apply(o)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var n=0;n<this._holes.length;n++)t[n+1]=this._holes[n];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)}},{key:"getGeometryType",value:function(){return K.TYPENAME_POLYGON}},{key:"getExteriorRing",value:function(){return this._shell}},{key:"isEmpty",value:function(){return this._shell.isEmpty()}},{key:"getInteriorRingN",value:function(t){return this._holes[t]}},{key:"interfaces_",get:function(){return[Er]}}],[{key:"constructor_",value:function(){this._shell=null,this._holes=null;var t=arguments[0],n=arguments[1],r=arguments[2];if(K.constructor_.call(this,r),t===null&&(t=this.getFactory().createLinearRing()),n===null&&(n=[]),K.hasNullElements(n))throw new x("holes must not contain null elements");if(t.isEmpty()&&K.hasNonEmptyElements(n))throw new x("shell is empty but holes are not");this._shell=t,this._holes=n}}])}(K),qa=function(i){function e(){return l(this,e),h(this,e,arguments)}return _(e,i),g(e)}(Be),Ir=function(i){function e(t){var n;return l(this,e),(n=h(this,e)).array=[],t instanceof Ne&&n.addAll(t),n}return _(e,i),g(e,[{key:"contains",value:function(t){var n,r=w(this.array);try{for(r.s();!(n=r.n()).done;)if(n.value.compareTo(t)===0)return!0}catch(s){r.e(s)}finally{r.f()}return!1}},{key:"add",value:function(t){if(this.contains(t))return!1;for(var n=0,r=this.array.length;n<r;n++)if(this.array[n].compareTo(t)===1)return!!this.array.splice(n,0,t);return this.array.push(t),!0}},{key:"addAll",value:function(t){var n,r=w(t);try{for(r.s();!(n=r.n()).done;){var s=n.value;this.add(s)}}catch(o){r.e(o)}finally{r.f()}return!0}},{key:"remove",value:function(){throw new Ce}},{key:"size",value:function(){return this.array.length}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"toArray",value:function(){return this.array.slice()}},{key:"iterator",value:function(){return new Ba(this.array)}}])}(qa),Ba=function(){return g(function i(e){l(this,i),this.array=e,this.position=0},[{key:"next",value:function(){if(this.position===this.array.length)throw new Re;return this.array[this.position++]}},{key:"hasNext",value:function(){return this.position<this.array.length}},{key:"remove",value:function(){throw new Ce}}])}(),Ye=function(i){function e(){var t;return l(this,e),t=h(this,e),e.constructor_.apply(t,arguments),t}return _(e,i),g(e,[{key:"computeEnvelopeInternal",value:function(){for(var t=new de,n=0;n<this._geometries.length;n++)t.expandToInclude(this._geometries[n].getEnvelopeInternal());return t}},{key:"getGeometryN",value:function(t){return this._geometries[t]}},{key:"getCoordinates",value:function(){for(var t=new Array(this.getNumPoints()).fill(null),n=-1,r=0;r<this._geometries.length;r++)for(var s=this._geometries[r].getCoordinates(),o=0;o<s.length;o++)t[++n]=s[o];return t}},{key:"getArea",value:function(){for(var t=0,n=0;n<this._geometries.length;n++)t+=this._geometries[n].getArea();return t}},{key:"copyInternal",value:function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof K){var t=arguments[0],n=arguments[1];if(!this.isEquivalentClass(t))return!1;var r=t;if(this._geometries.length!==r._geometries.length)return!1;for(var s=0;s<this._geometries.length;s++)if(!this._geometries[s].equalsExact(r._geometries[s],n))return!1;return!0}return R(e,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Ct.sort(this._geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var t=W.FALSE,n=0;n<this._geometries.length;n++)t=Math.max(t,this._geometries[n].getBoundaryDimension());return t}},{key:"reverseInternal",value:function(){for(var t=this._geometries.length,n=new oe(t),r=0;r<t;r++)n.add(this._geometries[r].reverse());return this.getFactory().buildGeometry(n)}},{key:"getTypeCode",value:function(){return K.TYPECODE_GEOMETRYCOLLECTION}},{key:"getDimension",value:function(){for(var t=W.FALSE,n=0;n<this._geometries.length;n++)t=Math.max(t,this._geometries[n].getDimension());return t}},{key:"getLength",value:function(){for(var t=0,n=0;n<this._geometries.length;n++)t+=this._geometries[n].getLength();return t}},{key:"getNumPoints",value:function(){for(var t=0,n=0;n<this._geometries.length;n++)t+=this._geometries[n].getNumPoints();return t}},{key:"getNumGeometries",value:function(){return this._geometries.length}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var t=arguments[0],n=new Ir(Ct.asList(this._geometries)),r=new Ir(Ct.asList(t._geometries));return this.compare(n,r)}if(arguments.length===2){for(var s=arguments[1],o=arguments[0],c=this.getNumGeometries(),m=o.getNumGeometries(),v=0;v<c&&v<m;){var b=this.getGeometryN(v),D=o.getGeometryN(v),X=b.compareToSameClass(D,s);if(X!==0)return X;v++}return v<c?1:v<m?-1:0}}},{key:"apply",value:function(){if(he(arguments[0],Pn))for(var t=arguments[0],n=0;n<this._geometries.length;n++)this._geometries[n].apply(t);else if(he(arguments[0],Dn)){var r=arguments[0];if(this._geometries.length===0)return null;for(var s=0;s<this._geometries.length&&(this._geometries[s].apply(r),!r.isDone());s++);r.isGeometryChanged()&&this.geometryChanged()}else if(he(arguments[0],An)){var o=arguments[0];o.filter(this);for(var c=0;c<this._geometries.length;c++)this._geometries[c].apply(o)}else if(he(arguments[0],S)){var m=arguments[0];m.filter(this);for(var v=0;v<this._geometries.length;v++)this._geometries[v].apply(m)}}},{key:"getBoundary",value:function(){return K.checkNotGeometryCollection(this),J.shouldNeverReachHere(),null}},{key:"getGeometryType",value:function(){return K.TYPENAME_GEOMETRYCOLLECTION}},{key:"isEmpty",value:function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0}}],[{key:"constructor_",value:function(){if(this._geometries=null,arguments.length!==0){if(arguments.length===2){var t=arguments[0],n=arguments[1];if(K.constructor_.call(this,n),t===null&&(t=[]),K.hasNullElements(t))throw new x("geometries must not contain null elements");this._geometries=t}}}}])}(K),Li=function(i){function e(){var t;return l(this,e),t=h(this,e),e.constructor_.apply(t,arguments),t}return _(e,i),g(e,[{key:"copyInternal",value:function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof K){var t=arguments[0],n=arguments[1];return!!this.isEquivalentClass(t)&&R(e,"equalsExact",this,1).call(this,t,n)}return R(e,"equalsExact",this,1).apply(this,arguments)}},{key:"getCoordinate",value:function(){if(arguments.length===1&&Number.isInteger(arguments[0])){var t=arguments[0];return this._geometries[t].getCoordinate()}return R(e,"getCoordinate",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return W.FALSE}},{key:"getTypeCode",value:function(){return K.TYPECODE_MULTIPOINT}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return K.TYPENAME_MULTIPOINT}},{key:"interfaces_",get:function(){return[kr]}}],[{key:"constructor_",value:function(){var t=arguments[0],n=arguments[1];Ye.constructor_.call(this,t,n)}}])}(Ye),hn=function(i){function e(){var t;return l(this,e),t=h(this,e),e.constructor_.apply(t,arguments),t}return _(e,i),g(e,[{key:"copyInternal",value:function(){return new e(this._points.copy(),this._factory)}},{key:"getBoundaryDimension",value:function(){return W.FALSE}},{key:"isClosed",value:function(){return!!this.isEmpty()||R(e,"isClosed",this,1).call(this)}},{key:"reverseInternal",value:function(){var t=this._points.copy();return wt.reverse(t),this.getFactory().createLinearRing(t)}},{key:"getTypeCode",value:function(){return K.TYPECODE_LINEARRING}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!R(e,"isClosed",this,1).call(this))throw new x("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new x("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return K.TYPENAME_LINEARRING}}],[{key:"constructor_",value:function(){var t=arguments[0],n=arguments[1];cn.constructor_.call(this,t,n),this.validateConstruction()}}])}(cn);hn.MINIMUM_VALID_SIZE=4;var Lt=function(i){function e(){var t;return l(this,e),t=h(this,e),e.constructor_.apply(t,arguments),t}return _(e,i),g(e,[{key:"setOrdinate",value:function(t,n){switch(t){case e.X:this.x=n;break;case e.Y:this.y=n;break;default:throw new x("Invalid ordinate index: "+t)}}},{key:"getZ",value:function(){return O.NULL_ORDINATE}},{key:"getOrdinate",value:function(t){switch(t){case e.X:return this.x;case e.Y:return this.y}throw new x("Invalid ordinate index: "+t)}},{key:"setZ",value:function(t){throw new x("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new e(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}}],[{key:"constructor_",value:function(){if(arguments.length===0)O.constructor_.call(this);else if(arguments.length===1){if(arguments[0]instanceof e){var t=arguments[0];O.constructor_.call(this,t.x,t.y)}else if(arguments[0]instanceof O){var n=arguments[0];O.constructor_.call(this,n.x,n.y)}}else if(arguments.length===2){var r=arguments[0],s=arguments[1];O.constructor_.call(this,r,s,O.NULL_ORDINATE)}}}])}(O);Lt.X=0,Lt.Y=1,Lt.Z=-1,Lt.M=-1;var Tt=function(i){function e(){var t;return l(this,e),t=h(this,e),e.constructor_.apply(t,arguments),t}return _(e,i),g(e,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(t,n){switch(t){case e.X:this.x=n;break;case e.Y:this.y=n;break;case e.M:this._m=n;break;default:throw new x("Invalid ordinate index: "+t)}}},{key:"setM",value:function(t){this._m=t}},{key:"getZ",value:function(){return O.NULL_ORDINATE}},{key:"getOrdinate",value:function(t){switch(t){case e.X:return this.x;case e.Y:return this.y;case e.M:return this._m}throw new x("Invalid ordinate index: "+t)}},{key:"setZ",value:function(t){throw new x("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new e(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ(),this._m=t.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)O.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof e){var t=arguments[0];O.constructor_.call(this,t.x,t.y),this._m=t._m}else if(arguments[0]instanceof O){var n=arguments[0];O.constructor_.call(this,n.x,n.y),this._m=this.getM()}}else if(arguments.length===3){var r=arguments[0],s=arguments[1],o=arguments[2];O.constructor_.call(this,r,s,O.NULL_ORDINATE),this._m=o}}}])}(O);Tt.X=0,Tt.Y=1,Tt.Z=-1,Tt.M=2;var Ti=function(i){function e(){var t;return l(this,e),t=h(this,e),e.constructor_.apply(t,arguments),t}return _(e,i),g(e,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(t,n){switch(t){case O.X:this.x=n;break;case O.Y:this.y=n;break;case O.Z:this.z=n;break;case O.M:this._m=n;break;default:throw new x("Invalid ordinate index: "+t)}}},{key:"setM",value:function(t){this._m=t}},{key:"getOrdinate",value:function(t){switch(t){case O.X:return this.x;case O.Y:return this.y;case O.Z:return this.getZ();case O.M:return this.getM()}throw new x("Invalid ordinate index: "+t)}},{key:"copy",value:function(){return new e(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ(),this._m=t.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)O.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof e){var t=arguments[0];O.constructor_.call(this,t),this._m=t._m}else if(arguments[0]instanceof O){var n=arguments[0];O.constructor_.call(this,n),this._m=this.getM()}}else if(arguments.length===4){var r=arguments[0],s=arguments[1],o=arguments[2],c=arguments[3];O.constructor_.call(this,r,s,o),this._m=c}}}])}(O),qn=function(){function i(){l(this,i)}return g(i,null,[{key:"measures",value:function(e){return e instanceof Lt?0:e instanceof Tt||e instanceof Ti?1:0}},{key:"dimension",value:function(e){return e instanceof Lt?2:e instanceof Tt?3:e instanceof Ti?4:3}},{key:"create",value:function(){if(arguments.length===1){var e=arguments[0];return i.create(e,0)}if(arguments.length===2){var t=arguments[0],n=arguments[1];return t===2?new Lt:t===3&&n===0?new O:t===3&&n===1?new Tt:t===4&&n===1?new Ti:new O}}}])}(),fn=function(i){function e(){var t;return l(this,e),t=h(this,e),e.constructor_.apply(t,arguments),t}return _(e,i),g(e,[{key:"getCoordinate",value:function(t){return this.get(t)}},{key:"addAll",value:function(){if(arguments.length===2&&typeof arguments[1]=="boolean"&&he(arguments[0],Ne)){for(var t=arguments[1],n=!1,r=arguments[0].iterator();r.hasNext();)this.add(r.next(),t),n=!0;return n}return R(e,"addAll",this,1).apply(this,arguments)}},{key:"clone",value:function(){for(var t=R(e,"clone",this,1).call(this),n=0;n<this.size();n++)t.add(n,this.get(n).clone());return t}},{key:"toCoordinateArray",value:function(){if(arguments.length===0)return this.toArray(e.coordArrayType);if(arguments.length===1){if(arguments[0])return this.toArray(e.coordArrayType);for(var t=this.size(),n=new Array(t).fill(null),r=0;r<t;r++)n[r]=this.get(t-r-1);return n}}},{key:"add",value:function(){if(arguments.length===1){var t=arguments[0];return R(e,"add",this,1).call(this,t)}if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var n=arguments[0],r=arguments[1];return this.add(n,r,!0),!0}if(arguments[0]instanceof O&&typeof arguments[1]=="boolean"){var s=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(s))return null;R(e,"add",this,1).call(this,s)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var o=arguments[0],c=arguments[1];return this.add(o,c),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var m=arguments[0],v=arguments[1];if(arguments[2])for(var b=0;b<m.length;b++)this.add(m[b],v);else for(var D=m.length-1;D>=0;D--)this.add(m[D],v);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof O){var X=arguments[0],$=arguments[1];if(!arguments[2]){var te=this.size();if(te>0&&(X>0&&this.get(X-1).equals2D($)||X<te&&this.get(X).equals2D($)))return null}R(e,"add",this,1).call(this,X,$)}}else if(arguments.length===4){var se=arguments[0],_e=arguments[1],ve=arguments[2],Ee=arguments[3],Oe=1;ve>Ee&&(Oe=-1);for(var Pe=ve;Pe!==Ee;Pe+=Oe)this.add(se[Pe],_e);return!0}}},{key:"closeRing",value:function(){if(this.size()>0){var t=this.get(0).copy();this.add(t,!1)}}}],[{key:"constructor_",value:function(){if(arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}}}])}(oe);fn.coordArrayType=new Array(0).fill(null);var Me=function(){function i(){l(this,i)}return g(i,null,[{key:"isRing",value:function(e){return!(e.length<4)&&!!e[0].equals2D(e[e.length-1])}},{key:"ptNotInList",value:function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(i.indexOf(r,t)<0)return r}return null}},{key:"scroll",value:function(e,t){var n=i.indexOf(t,e);if(n<0)return null;var r=new Array(e.length).fill(null);Ue.arraycopy(e,n,r,0,e.length-n),Ue.arraycopy(e,0,r,e.length-n,n),Ue.arraycopy(r,0,e,0,e.length)}},{key:"equals",value:function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];if(e===t)return!0;if(e===null||t===null||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].equals(t[n]))return!1;return!0}if(arguments.length===3){var r=arguments[0],s=arguments[1],o=arguments[2];if(r===s)return!0;if(r===null||s===null||r.length!==s.length)return!1;for(var c=0;c<r.length;c++)if(o.compare(r[c],s[c])!==0)return!1;return!0}}},{key:"intersection",value:function(e,t){for(var n=new fn,r=0;r<e.length;r++)t.intersects(e[r])&&n.add(e[r],!0);return n.toCoordinateArray()}},{key:"measures",value:function(e){if(e===null||e.length===0)return 0;var t,n=0,r=w(e);try{for(r.s();!(t=r.n()).done;){var s=t.value;n=Math.max(n,qn.measures(s))}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"hasRepeatedPoints",value:function(e){for(var t=1;t<e.length;t++)if(e[t-1].equals(e[t]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(e){return i.hasRepeatedPoints(e)?new fn(e,!1).toCoordinateArray():e}},{key:"reverse",value:function(e){for(var t=e.length-1,n=Math.trunc(t/2),r=0;r<=n;r++){var s=e[r];e[r]=e[t-r],e[t-r]=s}}},{key:"removeNull",value:function(e){for(var t=0,n=0;n<e.length;n++)e[n]!==null&&t++;var r=new Array(t).fill(null);if(t===0)return r;for(var s=0,o=0;o<e.length;o++)e[o]!==null&&(r[s++]=e[o]);return r}},{key:"copyDeep",value:function(){if(arguments.length===1){for(var e=arguments[0],t=new Array(e.length).fill(null),n=0;n<e.length;n++)t[n]=e[n].copy();return t}if(arguments.length===5)for(var r=arguments[0],s=arguments[1],o=arguments[2],c=arguments[3],m=arguments[4],v=0;v<m;v++)o[c+v]=r[s+v].copy()}},{key:"isEqualReversed",value:function(e,t){for(var n=0;n<e.length;n++){var r=e[n],s=t[e.length-n-1];if(r.compareTo(s)!==0)return!1}return!0}},{key:"envelope",value:function(e){for(var t=new de,n=0;n<e.length;n++)t.expandToInclude(e[n]);return t}},{key:"toCoordinateArray",value:function(e){return e.toArray(i.coordArrayType)}},{key:"dimension",value:function(e){if(e===null||e.length===0)return 3;var t,n=0,r=w(e);try{for(r.s();!(t=r.n()).done;){var s=t.value;n=Math.max(n,qn.dimension(s))}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"atLeastNCoordinatesOrNothing",value:function(e,t){return t.length>=e?t:[]}},{key:"indexOf",value:function(e,t){for(var n=0;n<t.length;n++)if(e.equals(t[n]))return n;return-1}},{key:"increasingDirection",value:function(e){for(var t=0;t<Math.trunc(e.length/2);t++){var n=e.length-1-t,r=e[t].compareTo(e[n]);if(r!==0)return r}return 1}},{key:"compare",value:function(e,t){for(var n=0;n<e.length&&n<t.length;){var r=e[n].compareTo(t[n]);if(r!==0)return r;n++}return n<t.length?-1:n<e.length?1:0}},{key:"minCoordinate",value:function(e){for(var t=null,n=0;n<e.length;n++)(t===null||t.compareTo(e[n])>0)&&(t=e[n]);return t}},{key:"extract",value:function(e,t,n){t=ln.clamp(t,0,e.length);var r=(n=ln.clamp(n,-1,e.length))-t+1;n<0&&(r=0),t>=e.length&&(r=0),n<t&&(r=0);var s=new Array(r).fill(null);if(r===0)return s;for(var o=0,c=t;c<=n;c++)s[o++]=e[c];return s}}])}(),Ga=function(){return g(function i(){l(this,i)},[{key:"compare",value:function(i,e){var t=i,n=e;return Me.compare(t,n)}},{key:"interfaces_",get:function(){return[ee]}}])}(),Ya=function(){return g(function i(){l(this,i)},[{key:"compare",value:function(i,e){var t=i,n=e;if(t.length<n.length)return-1;if(t.length>n.length)return 1;if(t.length===0)return 0;var r=Me.compare(t,n);return Me.isEqualReversed(t,n)?0:r}},{key:"OLDcompare",value:function(i,e){var t=i,n=e;if(t.length<n.length)return-1;if(t.length>n.length)return 1;if(t.length===0)return 0;for(var r=Me.increasingDirection(t),s=Me.increasingDirection(n),o=r>0?0:t.length-1,c=s>0?0:t.length-1,m=0;m<t.length;m++){var v=t[o].compareTo(n[c]);if(v!==0)return v;o+=r,c+=s}return 0}},{key:"interfaces_",get:function(){return[ee]}}])}();Me.ForwardComparator=Ga,Me.BidirectionalComparator=Ya,Me.coordArrayType=new Array(0).fill(null);var Bn=function(){return g(function i(e){l(this,i),this.str=e},[{key:"append",value:function(i){this.str+=i}},{key:"setCharAt",value:function(i,e){this.str=this.str.substr(0,i)+e+this.str.substr(i+1)}},{key:"toString",value:function(){return this.str}}])}(),gn=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return g(i,[{key:"getM",value:function(e){return this.hasM()?this._coordinates[e].getM():F.NaN}},{key:"setOrdinate",value:function(e,t,n){switch(t){case pe.X:this._coordinates[e].x=n;break;case pe.Y:this._coordinates[e].y=n;break;default:this._coordinates[e].setOrdinate(t,n)}}},{key:"getZ",value:function(e){return this.hasZ()?this._coordinates[e].getZ():F.NaN}},{key:"size",value:function(){return this._coordinates.length}},{key:"getOrdinate",value:function(e,t){switch(t){case pe.X:return this._coordinates[e].x;case pe.Y:return this._coordinates[e].y;default:return this._coordinates[e].getOrdinate(t)}}},{key:"getCoordinate",value:function(){if(arguments.length===1){var e=arguments[0];return this._coordinates[e]}if(arguments.length===2){var t=arguments[0];arguments[1].setCoordinate(this._coordinates[t])}}},{key:"getCoordinateCopy",value:function(e){var t=this.createCoordinate();return t.setCoordinate(this._coordinates[e]),t}},{key:"createCoordinate",value:function(){return qn.create(this.getDimension(),this.getMeasures())}},{key:"getDimension",value:function(){return this._dimension}},{key:"getX",value:function(e){return this._coordinates[e].x}},{key:"getMeasures",value:function(){return this._measures}},{key:"expandEnvelope",value:function(e){for(var t=0;t<this._coordinates.length;t++)e.expandToInclude(this._coordinates[t]);return e}},{key:"copy",value:function(){for(var e=new Array(this.size()).fill(null),t=0;t<this._coordinates.length;t++){var n=this.createCoordinate();n.setCoordinate(this._coordinates[t]),e[t]=n}return new i(e,this._dimension,this._measures)}},{key:"toString",value:function(){if(this._coordinates.length>0){var e=new Bn(17*this._coordinates.length);e.append("("),e.append(this._coordinates[0]);for(var t=1;t<this._coordinates.length;t++)e.append(", "),e.append(this._coordinates[t]);return e.append(")"),e.toString()}return"()"}},{key:"getY",value:function(e){return this._coordinates[e].y}},{key:"toCoordinateArray",value:function(){return this._coordinates}},{key:"interfaces_",get:function(){return[pe,P]}}],[{key:"constructor_",value:function(){if(this._dimension=3,this._measures=0,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array){var e=arguments[0];i.constructor_.call(this,e,Me.dimension(e),Me.measures(e))}else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var n=0;n<t;n++)this._coordinates[n]=new O}else if(he(arguments[0],pe)){var r=arguments[0];if(r===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=r.getDimension(),this._measures=r.getMeasures(),this._coordinates=new Array(r.size()).fill(null);for(var s=0;s<this._coordinates.length;s++)this._coordinates[s]=r.getCoordinateCopy(s)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var o=arguments[0],c=arguments[1];i.constructor_.call(this,o,c,Me.measures(o))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var m=arguments[0],v=arguments[1];this._coordinates=new Array(m).fill(null),this._dimension=v;for(var b=0;b<m;b++)this._coordinates[b]=qn.create(v)}}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var D=arguments[0],X=arguments[1],$=arguments[2];this._dimension=X,this._measures=$,this._coordinates=D===null?new Array(0).fill(null):D}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var te=arguments[0],se=arguments[1],_e=arguments[2];this._coordinates=new Array(te).fill(null),this._dimension=se,this._measures=_e;for(var ve=0;ve<te;ve++)this._coordinates[ve]=this.createCoordinate()}}}}])}(),Ri=function(){function i(){l(this,i)}return g(i,[{key:"readResolve",value:function(){return i.instance()}},{key:"create",value:function(){if(arguments.length===1){if(arguments[0]instanceof Array)return new gn(arguments[0]);if(he(arguments[0],pe))return new gn(arguments[0])}else{if(arguments.length===2){var e=arguments[1];return e>3&&(e=3),e<2&&(e=2),new gn(arguments[0],e)}if(arguments.length===3){var t=arguments[2],n=arguments[1]-t;return t>1&&(t=1),n>3&&(n=3),n<2&&(n=2),new gn(arguments[0],n+t,t)}}}},{key:"interfaces_",get:function(){return[pr,P]}}],[{key:"instance",value:function(){return i.instanceObject}}])}();Ri.instanceObject=new Ri;var Mi=function(i){function e(){var t;return l(this,e),t=h(this,e),e.constructor_.apply(t,arguments),t}return _(e,i),g(e,[{key:"copyInternal",value:function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof K){var t=arguments[0],n=arguments[1];return!!this.isEquivalentClass(t)&&R(e,"equalsExact",this,1).call(this,t,n)}return R(e,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return K.TYPECODE_MULTIPOLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new oe,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getBoundary(),s=0;s<r.getNumGeometries();s++)t.add(r.getGeometryN(s));var o=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(o))}},{key:"getGeometryType",value:function(){return K.TYPENAME_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[Er]}}],[{key:"constructor_",value:function(){var t=arguments[0],n=arguments[1];Ye.constructor_.call(this,t,n)}}])}(Ye),Nr=function(){return g(function i(){l(this,i)},[{key:"get",value:function(){}},{key:"put",value:function(){}},{key:"size",value:function(){}},{key:"values",value:function(){}},{key:"entrySet",value:function(){}}])}(),za=function(i){function e(){var t;return l(this,e),(t=h(this,e)).map=new Map,t}return _(e,i),g(e,[{key:"get",value:function(t){return this.map.get(t)||null}},{key:"put",value:function(t,n){return this.map.set(t,n),n}},{key:"values",value:function(){for(var t=new oe,n=this.map.values(),r=n.next();!r.done;)t.add(r.value),r=n.next();return t}},{key:"entrySet",value:function(){var t=new De;return this.map.entries().forEach(function(n){return t.add(n)}),t}},{key:"size",value:function(){return this.map.size()}}])}(Nr),Ke=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return g(i,[{key:"equals",value:function(e){if(!(e instanceof i))return!1;var t=e;return this._modelType===t._modelType&&this._scale===t._scale}},{key:"compareTo",value:function(e){var t=e,n=this.getMaximumSignificantDigits(),r=t.getMaximumSignificantDigits();return kt.compare(n,r)}},{key:"getScale",value:function(){return this._scale}},{key:"isFloating",value:function(){return this._modelType===i.FLOATING||this._modelType===i.FLOATING_SINGLE}},{key:"getType",value:function(){return this._modelType}},{key:"toString",value:function(){var e="UNKNOWN";return this._modelType===i.FLOATING?e="Floating":this._modelType===i.FLOATING_SINGLE?e="Floating-Single":this._modelType===i.FIXED&&(e="Fixed (Scale="+this.getScale()+")"),e}},{key:"makePrecise",value:function(){if(typeof arguments[0]=="number"){var e=arguments[0];return F.isNaN(e)||this._modelType===i.FLOATING_SINGLE?e:this._modelType===i.FIXED?Math.round(e*this._scale)/this._scale:e}if(arguments[0]instanceof O){var t=arguments[0];if(this._modelType===i.FLOATING)return null;t.x=this.makePrecise(t.x),t.y=this.makePrecise(t.y)}}},{key:"getMaximumSignificantDigits",value:function(){var e=16;return this._modelType===i.FLOATING?e=16:this._modelType===i.FLOATING_SINGLE?e=6:this._modelType===i.FIXED&&(e=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),e}},{key:"setScale",value:function(e){this._scale=Math.abs(e)}},{key:"interfaces_",get:function(){return[P,C]}}],[{key:"constructor_",value:function(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=i.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof Ft){var e=arguments[0];this._modelType=e,e===i.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var t=arguments[0];this._modelType=i.FIXED,this.setScale(t)}else if(arguments[0]instanceof i){var n=arguments[0];this._modelType=n._modelType,this._scale=n._scale}}}},{key:"mostPrecise",value:function(e,t){return e.compareTo(t)>=0?e:t}}])}(),Ft=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return g(i,[{key:"readResolve",value:function(){return i.nameToTypeMap.get(this._name)}},{key:"toString",value:function(){return this._name}},{key:"interfaces_",get:function(){return[P]}}],[{key:"constructor_",value:function(){this._name=null;var e=arguments[0];this._name=e,i.nameToTypeMap.put(e,this)}}])}();Ft.nameToTypeMap=new za,Ke.Type=Ft,Ke.FIXED=new Ft("FIXED"),Ke.FLOATING=new Ft("FLOATING"),Ke.FLOATING_SINGLE=new Ft("FLOATING SINGLE"),Ke.maximumPreciseValue=9007199254740992;var bi=function(i){function e(){var t;return l(this,e),t=h(this,e),e.constructor_.apply(t,arguments),t}return _(e,i),g(e,[{key:"copyInternal",value:function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof K){var t=arguments[0],n=arguments[1];return!!this.isEquivalentClass(t)&&R(e,"equalsExact",this,1).call(this,t,n)}return R(e,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?W.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0}},{key:"getTypeCode",value:function(){return K.TYPECODE_MULTILINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getBoundary",value:function(){throw new Ce}},{key:"getGeometryType",value:function(){return K.TYPENAME_MULTILINESTRING}},{key:"interfaces_",get:function(){return[_r]}}],[{key:"constructor_",value:function(){var t=arguments[0],n=arguments[1];Ye.constructor_.call(this,t,n)}}])}(Ye),qt=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return g(i,[{key:"createEmpty",value:function(e){switch(e){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new x("Invalid dimension: "+e)}}},{key:"toGeometry",value:function(e){return e.isNull()?this.createPoint():e.getMinX()===e.getMaxX()&&e.getMinY()===e.getMaxY()?this.createPoint(new O(e.getMinX(),e.getMinY())):e.getMinX()===e.getMaxX()||e.getMinY()===e.getMaxY()?this.createLineString([new O(e.getMinX(),e.getMinY()),new O(e.getMaxX(),e.getMaxY())]):this.createPolygon(this.createLinearRing([new O(e.getMinX(),e.getMinY()),new O(e.getMinX(),e.getMaxY()),new O(e.getMaxX(),e.getMaxY()),new O(e.getMaxX(),e.getMinY()),new O(e.getMinX(),e.getMinY())]),null)}},{key:"createLineString",value:function(){if(arguments.length===0)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var e=arguments[0];return this.createLineString(e!==null?this.getCoordinateSequenceFactory().create(e):null)}if(he(arguments[0],pe))return new cn(arguments[0],this)}}},{key:"createMultiLineString",value:function(){return arguments.length===0?new bi(null,this):arguments.length===1?new bi(arguments[0],this):void 0}},{key:"buildGeometry",value:function(e){for(var t=null,n=!1,r=!1,s=e.iterator();s.hasNext();){var o=s.next(),c=o.getTypeCode();t===null&&(t=c),c!==t&&(n=!0),o instanceof Ye&&(r=!0)}if(t===null)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(i.toGeometryArray(e));var m=e.iterator().next();if(e.size()>1){if(m instanceof Fn)return this.createMultiPolygon(i.toPolygonArray(e));if(m instanceof cn)return this.createMultiLineString(i.toLineStringArray(e));if(m instanceof Ci)return this.createMultiPoint(i.toPointArray(e));J.shouldNeverReachHere("Unhandled geometry type: "+m.getGeometryType())}return m}},{key:"createMultiPointFromCoords",value:function(e){return this.createMultiPoint(e!==null?this.getCoordinateSequenceFactory().create(e):null)}},{key:"createPoint",value:function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof O){var e=arguments[0];return this.createPoint(e!==null?this.getCoordinateSequenceFactory().create([e]):null)}if(he(arguments[0],pe))return new Ci(arguments[0],this)}}},{key:"getCoordinateSequenceFactory",value:function(){return this._coordinateSequenceFactory}},{key:"createPolygon",value:function(){if(arguments.length===0)return this.createPolygon(null,null);if(arguments.length===1){if(he(arguments[0],pe)){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Array){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof hn){var n=arguments[0];return this.createPolygon(n,null)}}else if(arguments.length===2)return new Fn(arguments[0],arguments[1],this)}},{key:"getSRID",value:function(){return this._SRID}},{key:"createGeometryCollection",value:function(){return arguments.length===0?new Ye(null,this):arguments.length===1?new Ye(arguments[0],this):void 0}},{key:"getPrecisionModel",value:function(){return this._precisionModel}},{key:"createLinearRing",value:function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var e=arguments[0];return this.createLinearRing(e!==null?this.getCoordinateSequenceFactory().create(e):null)}if(he(arguments[0],pe))return new hn(arguments[0],this)}}},{key:"createMultiPolygon",value:function(){return arguments.length===0?new Mi(null,this):arguments.length===1?new Mi(arguments[0],this):void 0}},{key:"createMultiPoint",value:function(){if(arguments.length===0)return new Li(null,this);if(arguments.length===1){if(arguments[0]instanceof Array)return new Li(arguments[0],this);if(he(arguments[0],pe)){var e=arguments[0];if(e===null)return this.createMultiPoint(new Array(0).fill(null));for(var t=new Array(e.size()).fill(null),n=0;n<e.size();n++){var r=this.getCoordinateSequenceFactory().create(1,e.getDimension(),e.getMeasures());wt.copy(e,n,r,0,1),t[n]=this.createPoint(r)}return this.createMultiPoint(t)}}}},{key:"interfaces_",get:function(){return[P]}}],[{key:"constructor_",value:function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,arguments.length===0)i.constructor_.call(this,new Ke,0);else if(arguments.length===1){if(he(arguments[0],pr)){var e=arguments[0];i.constructor_.call(this,new Ke,0,e)}else if(arguments[0]instanceof Ke){var t=arguments[0];i.constructor_.call(this,t,0,i.getDefaultCoordinateSequenceFactory())}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];i.constructor_.call(this,n,r,i.getDefaultCoordinateSequenceFactory())}else if(arguments.length===3){var s=arguments[0],o=arguments[1],c=arguments[2];this._precisionModel=s,this._coordinateSequenceFactory=c,this._SRID=o}}},{key:"toMultiPolygonArray",value:function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)}},{key:"toGeometryArray",value:function(e){if(e===null)return null;var t=new Array(e.size()).fill(null);return e.toArray(t)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return Ri.instance()}},{key:"toMultiLineStringArray",value:function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)}},{key:"toLineStringArray",value:function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)}},{key:"toMultiPointArray",value:function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)}},{key:"toLinearRingArray",value:function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)}},{key:"toPointArray",value:function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)}},{key:"toPolygonArray",value:function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)}},{key:"createPointFromInternalCoord",value:function(e,t){return t.getPrecisionModel().makePrecise(e),t.getFactory().createPoint(e)}}])}(),Oi="XY",Xa="XYZ",Ua="XYM",Va="XYZM",Sr={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},wr="EMPTY",Gn=1,ft=2,xt=3,Cr=4,Bt=5,Ha=6;for(var Wa in Sr)Sr[Wa].toUpperCase();var Za=function(){return g(function i(e){l(this,i),this.wkt=e,this.index_=-1},[{key:"isAlpha_",value:function(i){return i>="a"&&i<="z"||i>="A"&&i<="Z"}},{key:"isNumeric_",value:function(i,e){return i>="0"&&i<="9"||i=="."&&!(e!==void 0&&e)}},{key:"isWhiteSpace_",value:function(i){return i==" "||i=="	"||i=="\r"||i==`
`}},{key:"nextChar_",value:function(){return this.wkt.charAt(++this.index_)}},{key:"nextToken",value:function(){var i,e=this.nextChar_(),t=this.index_,n=e;if(e=="(")i=ft;else if(e==",")i=Bt;else if(e==")")i=xt;else if(this.isNumeric_(e)||e=="-")i=Cr,n=this.readNumber_();else if(this.isAlpha_(e))i=Gn,n=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(e!=="")throw new Error("Unexpected character: "+e);i=Ha}return{position:t,value:n,type:i}}},{key:"readNumber_",value:function(){var i,e=this.index_,t=!1,n=!1;do i=="."?t=!0:i!="e"&&i!="E"||(n=!0),i=this.nextChar_();while(this.isNumeric_(i,t)||!n&&(i=="e"||i=="E")||n&&(i=="-"||i=="+"));return parseFloat(this.wkt.substring(e,this.index_--))}},{key:"readText_",value:function(){var i,e=this.index_;do i=this.nextChar_();while(this.isAlpha_(i));return this.wkt.substring(e,this.index_--).toUpperCase()}}])}(),$a=function(){return g(function i(e,t){l(this,i),this.lexer_=e,this.token_,this.layout_=Oi,this.factory=t},[{key:"consume_",value:function(){this.token_=this.lexer_.nextToken()}},{key:"isTokenType",value:function(i){return this.token_.type==i}},{key:"match",value:function(i){var e=this.isTokenType(i);return e&&this.consume_(),e}},{key:"parse",value:function(){return this.consume_(),this.parseGeometry_()}},{key:"parseGeometryLayout_",value:function(){var i=Oi,e=this.token_;if(this.isTokenType(Gn)){var t=e.value;t==="Z"?i=Xa:t==="M"?i=Ua:t==="ZM"&&(i=Va),i!==Oi&&this.consume_()}return i}},{key:"parseGeometryCollectionText_",value:function(){if(this.match(ft)){var i=[];do i.push(this.parseGeometry_());while(this.match(Bt));if(this.match(xt))return i}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePointText_",value:function(){if(this.match(ft)){var i=this.parsePoint_();if(this.match(xt))return i}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}},{key:"parseLineStringText_",value:function(){if(this.match(ft)){var i=this.parsePointList_();if(this.match(xt))return i}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePolygonText_",value:function(){if(this.match(ft)){var i=this.parseLineStringTextList_();if(this.match(xt))return i}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPointText_",value:function(){var i;if(this.match(ft)){if(i=this.token_.type==ft?this.parsePointTextList_():this.parsePointList_(),this.match(xt))return i}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiLineStringText_",value:function(){if(this.match(ft)){var i=this.parseLineStringTextList_();if(this.match(xt))return i}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPolygonText_",value:function(){if(this.match(ft)){var i=this.parsePolygonTextList_();if(this.match(xt))return i}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePoint_",value:function(){for(var i=[],e=this.layout_.length,t=0;t<e;++t){var n=this.token_;if(!this.match(Cr))break;i.push(n.value)}if(i.length==e)return i;throw new Error(this.formatErrorMessage_())}},{key:"parsePointList_",value:function(){for(var i=[this.parsePoint_()];this.match(Bt);)i.push(this.parsePoint_());return i}},{key:"parsePointTextList_",value:function(){for(var i=[this.parsePointText_()];this.match(Bt);)i.push(this.parsePointText_());return i}},{key:"parseLineStringTextList_",value:function(){for(var i=[this.parseLineStringText_()];this.match(Bt);)i.push(this.parseLineStringText_());return i}},{key:"parsePolygonTextList_",value:function(){for(var i=[this.parsePolygonText_()];this.match(Bt);)i.push(this.parsePolygonText_());return i}},{key:"isEmptyGeometry_",value:function(){var i=this.isTokenType(Gn)&&this.token_.value==wr;return i&&this.consume_(),i}},{key:"formatErrorMessage_",value:function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}},{key:"parseGeometry_",value:function(){var i=this.factory,e=function(se){return d(O,B(se))},t=function(se){var _e=se.map(function(ve){return i.createLinearRing(ve.map(e))});return _e.length>1?i.createPolygon(_e[0],_e.slice(1)):i.createPolygon(_e[0])},n=this.token_;if(this.match(Gn)){var r=n.value;if(this.layout_=this.parseGeometryLayout_(),r=="GEOMETRYCOLLECTION"){var s=this.parseGeometryCollectionText_();return i.createGeometryCollection(s)}switch(r){case"POINT":var o=this.parsePointText_();return o?i.createPoint(d(O,B(o))):i.createPoint();case"LINESTRING":var c=this.parseLineStringText_().map(e);return i.createLineString(c);case"LINEARRING":var m=this.parseLineStringText_().map(e);return i.createLinearRing(m);case"POLYGON":var v=this.parsePolygonText_();return v&&v.length!==0?t(v):i.createPolygon();case"MULTIPOINT":var b=this.parseMultiPointText_();if(!b||b.length===0)return i.createMultiPoint();var D=b.map(e).map(function(se){return i.createPoint(se)});return i.createMultiPoint(D);case"MULTILINESTRING":var X=this.parseMultiLineStringText_().map(function(se){return i.createLineString(se.map(e))});return i.createMultiLineString(X);case"MULTIPOLYGON":var $=this.parseMultiPolygonText_();if(!$||$.length===0)return i.createMultiPolygon();var te=$.map(t);return i.createMultiPolygon(te);default:throw new Error("Invalid geometry type: "+r)}}throw new Error(this.formatErrorMessage_())}}])}();function Lr(i){if(i.isEmpty())return"";var e=i.getCoordinate(),t=[e.x,e.y];return e.z===void 0||Number.isNaN(e.z)||t.push(e.z),e.m===void 0||Number.isNaN(e.m)||t.push(e.m),t.join(" ")}function dn(i){for(var e=i.getCoordinates().map(function(s){var o=[s.x,s.y];return s.z===void 0||Number.isNaN(s.z)||o.push(s.z),s.m===void 0||Number.isNaN(s.m)||o.push(s.m),o}),t=[],n=0,r=e.length;n<r;++n)t.push(e[n].join(" "));return t.join(", ")}function Tr(i){var e=[];e.push("("+dn(i.getExteriorRing())+")");for(var t=0,n=i.getNumInteriorRing();t<n;++t)e.push("("+dn(i.getInteriorRingN(t))+")");return e.join(", ")}var ja={Point:Lr,LineString:dn,LinearRing:dn,Polygon:Tr,MultiPoint:function(i){for(var e=[],t=0,n=i.getNumGeometries();t<n;++t)e.push("("+Lr(i.getGeometryN(t))+")");return e.join(", ")},MultiLineString:function(i){for(var e=[],t=0,n=i.getNumGeometries();t<n;++t)e.push("("+dn(i.getGeometryN(t))+")");return e.join(", ")},MultiPolygon:function(i){for(var e=[],t=0,n=i.getNumGeometries();t<n;++t)e.push("("+Tr(i.getGeometryN(t))+")");return e.join(", ")},GeometryCollection:function(i){for(var e=[],t=0,n=i.getNumGeometries();t<n;++t)e.push(Rr(i.getGeometryN(t)));return e.join(", ")}};function Rr(i){var e=i.getGeometryType(),t=ja[e];e=e.toUpperCase();var n=function(r){var s="";if(r.isEmpty())return s;var o=r.getCoordinate();return o.z===void 0||Number.isNaN(o.z)||(s+="Z"),o.m===void 0||Number.isNaN(o.m)||(s+="M"),s}(i);return n.length>0&&(e+=" "+n),i.isEmpty()?e+" "+wr:e+" ("+t(i)+")"}var Ja=function(){return g(function i(e){l(this,i),this.geometryFactory=e||new qt,this.precisionModel=this.geometryFactory.getPrecisionModel()},[{key:"read",value:function(i){var e=new Za(i);return new $a(e,this.geometryFactory).parse()}},{key:"write",value:function(i){return Rr(i)}}])}(),Pi=function(){return g(function i(e){l(this,i),this.parser=new Ja(e)},[{key:"write",value:function(i){return this.parser.write(i)}}],[{key:"toLineString",value:function(i,e){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+i.x+" "+i.y+", "+e.x+" "+e.y+" )"}}])}(),Se=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return g(i,[{key:"getIndexAlongSegment",value:function(e,t){return this.computeIntLineIndex(),this._intLineIndex[e][t]}},{key:"getTopologySummary",value:function(){var e=new Bn;return this.isEndPoint()&&e.append(" endpoint"),this._isProper&&e.append(" proper"),this.isCollinear()&&e.append(" collinear"),e.toString()}},{key:"computeIntersection",value:function(e,t,n,r){this._inputLines[0][0]=e,this._inputLines[0][1]=t,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(e,t,n,r)}},{key:"getIntersectionNum",value:function(){return this._result}},{key:"computeIntLineIndex",value:function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var e=arguments[0];this.getEdgeDistance(e,0)>this.getEdgeDistance(e,1)?(this._intLineIndex[e][0]=0,this._intLineIndex[e][1]=1):(this._intLineIndex[e][0]=1,this._intLineIndex[e][1]=0)}}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(e){this._precisionModel=e}},{key:"isInteriorIntersection",value:function(){if(arguments.length===0)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(arguments.length===1){for(var e=arguments[0],t=0;t<this._result;t++)if(!this._intPt[t].equals2D(this._inputLines[e][0])&&!this._intPt[t].equals2D(this._inputLines[e][1]))return!0;return!1}}},{key:"getIntersection",value:function(e){return this._intPt[e]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this._result!==i.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(e,t){return i.computeEdgeDistance(this._intPt[t],this._inputLines[e][0],this._inputLines[e][1])}},{key:"isCollinear",value:function(){return this._result===i.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return Pi.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Pi.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(e,t){return this._inputLines[e][t]}},{key:"isIntersection",value:function(e){for(var t=0;t<this._result;t++)if(this._intPt[t].equals2D(e))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(e,t){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[e][t]]}}],[{key:"constructor_",value:function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new O,this._intPt[1]=new O,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}},{key:"computeEdgeDistance",value:function(e,t,n){var r=Math.abs(n.x-t.x),s=Math.abs(n.y-t.y),o=-1;if(e.equals(t))o=0;else if(e.equals(n))o=r>s?r:s;else{var c=Math.abs(e.x-t.x),m=Math.abs(e.y-t.y);(o=r>s?c:m)!==0||e.equals(t)||(o=Math.max(c,m))}return J.isTrue(!(o===0&&!e.equals(t)),"Bad distance calculation"),o}},{key:"nonRobustComputeEdgeDistance",value:function(e,t,n){var r=e.x-t.x,s=e.y-t.y,o=Math.sqrt(r*r+s*s);return J.isTrue(!(o===0&&!e.equals(t)),"Invalid distance calculation"),o}}])}();Se.DONT_INTERSECT=0,Se.DO_INTERSECT=1,Se.COLLINEAR=2,Se.NO_INTERSECTION=0,Se.POINT_INTERSECTION=1,Se.COLLINEAR_INTERSECTION=2;var Rt=function(i){function e(){return l(this,e),h(this,e)}return _(e,i),g(e,[{key:"isInSegmentEnvelopes",value:function(t){var n=new de(this._inputLines[0][0],this._inputLines[0][1]),r=new de(this._inputLines[1][0],this._inputLines[1][1]);return n.contains(t)&&r.contains(t)}},{key:"computeIntersection",value:function(){if(arguments.length!==3)return R(e,"computeIntersection",this,1).apply(this,arguments);var t=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,de.intersects(n,r,t)&&ce.index(n,r,t)===0&&ce.index(r,n,t)===0)return this._isProper=!0,(t.equals(n)||t.equals(r))&&(this._isProper=!1),this._result=Se.POINT_INTERSECTION,null;this._result=Se.NO_INTERSECTION}},{key:"intersection",value:function(t,n,r,s){var o=this.intersectionSafe(t,n,r,s);return this.isInSegmentEnvelopes(o)||(o=new O(e.nearestEndpoint(t,n,r,s))),this._precisionModel!==null&&this._precisionModel.makePrecise(o),o}},{key:"checkDD",value:function(t,n,r,s,o){var c=Si.intersection(t,n,r,s),m=this.isInSegmentEnvelopes(c);Ue.out.println("DD in env = "+m+"  --------------------- "+c),o.distance(c)>1e-4&&Ue.out.println("Distance = "+o.distance(c))}},{key:"intersectionSafe",value:function(t,n,r,s){var o=wi.intersection(t,n,r,s);return o===null&&(o=e.nearestEndpoint(t,n,r,s)),o}},{key:"computeCollinearIntersection",value:function(t,n,r,s){var o=de.intersects(t,n,r),c=de.intersects(t,n,s),m=de.intersects(r,s,t),v=de.intersects(r,s,n);return o&&c?(this._intPt[0]=r,this._intPt[1]=s,Se.COLLINEAR_INTERSECTION):m&&v?(this._intPt[0]=t,this._intPt[1]=n,Se.COLLINEAR_INTERSECTION):o&&m?(this._intPt[0]=r,this._intPt[1]=t,!r.equals(t)||c||v?Se.COLLINEAR_INTERSECTION:Se.POINT_INTERSECTION):o&&v?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||c||m?Se.COLLINEAR_INTERSECTION:Se.POINT_INTERSECTION):c&&m?(this._intPt[0]=s,this._intPt[1]=t,!s.equals(t)||o||v?Se.COLLINEAR_INTERSECTION:Se.POINT_INTERSECTION):c&&v?(this._intPt[0]=s,this._intPt[1]=n,!s.equals(n)||o||m?Se.COLLINEAR_INTERSECTION:Se.POINT_INTERSECTION):Se.NO_INTERSECTION}},{key:"computeIntersect",value:function(t,n,r,s){if(this._isProper=!1,!de.intersects(t,n,r,s))return Se.NO_INTERSECTION;var o=ce.index(t,n,r),c=ce.index(t,n,s);if(o>0&&c>0||o<0&&c<0)return Se.NO_INTERSECTION;var m=ce.index(r,s,t),v=ce.index(r,s,n);return m>0&&v>0||m<0&&v<0?Se.NO_INTERSECTION:o===0&&c===0&&m===0&&v===0?this.computeCollinearIntersection(t,n,r,s):(o===0||c===0||m===0||v===0?(this._isProper=!1,t.equals2D(r)||t.equals2D(s)?this._intPt[0]=t:n.equals2D(r)||n.equals2D(s)?this._intPt[0]=n:o===0?this._intPt[0]=new O(r):c===0?this._intPt[0]=new O(s):m===0?this._intPt[0]=new O(t):v===0&&(this._intPt[0]=new O(n))):(this._isProper=!0,this._intPt[0]=this.intersection(t,n,r,s)),Se.POINT_INTERSECTION)}}],[{key:"nearestEndpoint",value:function(t,n,r,s){var o=t,c=rt.pointToSegment(t,r,s),m=rt.pointToSegment(n,r,s);return m<c&&(c=m,o=n),(m=rt.pointToSegment(r,t,n))<c&&(c=m,o=r),(m=rt.pointToSegment(s,t,n))<c&&(c=m,o=s),o}}])}(Se),Qa=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return g(i,[{key:"countSegment",value:function(e,t){if(e.x<this._p.x&&t.x<this._p.x)return null;if(this._p.x===t.x&&this._p.y===t.y)return this._isPointOnSegment=!0,null;if(e.y===this._p.y&&t.y===this._p.y){var n=e.x,r=t.x;return n>r&&(n=t.x,r=e.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(e.y>this._p.y&&t.y<=this._p.y||t.y>this._p.y&&e.y<=this._p.y){var s=ce.index(e,t,this._p);if(s===ce.COLLINEAR)return this._isPointOnSegment=!0,null;t.y<e.y&&(s=-s),s===ce.LEFT&&this._crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==k.EXTERIOR}},{key:"getLocation",value:function(){return this._isPointOnSegment?k.BOUNDARY:this._crossingCount%2==1?k.INTERIOR:k.EXTERIOR}},{key:"isOnSegment",value:function(){return this._isPointOnSegment}}],[{key:"constructor_",value:function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var e=arguments[0];this._p=e}},{key:"locatePointInRing",value:function(){if(arguments[0]instanceof O&&he(arguments[1],pe)){for(var e=arguments[1],t=new i(arguments[0]),n=new O,r=new O,s=1;s<e.size();s++)if(e.getCoordinate(s,n),e.getCoordinate(s-1,r),t.countSegment(n,r),t.isOnSegment())return t.getLocation();return t.getLocation()}if(arguments[0]instanceof O&&arguments[1]instanceof Array){for(var o=arguments[1],c=new i(arguments[0]),m=1;m<o.length;m++){var v=o[m],b=o[m-1];if(c.countSegment(v,b),c.isOnSegment())return c.getLocation()}return c.getLocation()}}}])}(),Ai=function(){function i(){l(this,i)}return g(i,null,[{key:"isOnLine",value:function(){if(arguments[0]instanceof O&&he(arguments[1],pe)){for(var e=arguments[0],t=arguments[1],n=new Rt,r=new O,s=new O,o=t.size(),c=1;c<o;c++)if(t.getCoordinate(c-1,r),t.getCoordinate(c,s),n.computeIntersection(e,r,s),n.hasIntersection())return!0;return!1}if(arguments[0]instanceof O&&arguments[1]instanceof Array){for(var m=arguments[0],v=arguments[1],b=new Rt,D=1;D<v.length;D++){var X=v[D-1],$=v[D];if(b.computeIntersection(m,X,$),b.hasIntersection())return!0}return!1}}},{key:"locateInRing",value:function(e,t){return Qa.locatePointInRing(e,t)}},{key:"isInRing",value:function(e,t){return i.locateInRing(e,t)!==k.EXTERIOR}}])}(),Ve=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return g(i,[{key:"setAllLocations",value:function(e){for(var t=0;t<this.location.length;t++)this.location[t]=e}},{key:"isNull",value:function(){for(var e=0;e<this.location.length;e++)if(this.location[e]!==k.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(e){for(var t=0;t<this.location.length;t++)this.location[t]===k.NONE&&(this.location[t]=e)}},{key:"isLine",value:function(){return this.location.length===1}},{key:"merge",value:function(e){if(e.location.length>this.location.length){var t=new Array(3).fill(null);t[H.ON]=this.location[H.ON],t[H.LEFT]=k.NONE,t[H.RIGHT]=k.NONE,this.location=t}for(var n=0;n<this.location.length;n++)this.location[n]===k.NONE&&n<e.location.length&&(this.location[n]=e.location[n])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var e=this.location[H.LEFT];this.location[H.LEFT]=this.location[H.RIGHT],this.location[H.RIGHT]=e}},{key:"toString",value:function(){var e=new _t;return this.location.length>1&&e.append(k.toLocationSymbol(this.location[H.LEFT])),e.append(k.toLocationSymbol(this.location[H.ON])),this.location.length>1&&e.append(k.toLocationSymbol(this.location[H.RIGHT])),e.toString()}},{key:"setLocations",value:function(e,t,n){this.location[H.ON]=e,this.location[H.LEFT]=t,this.location[H.RIGHT]=n}},{key:"get",value:function(e){return e<this.location.length?this.location[e]:k.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var e=0;e<this.location.length;e++)if(this.location[e]===k.NONE)return!0;return!1}},{key:"setLocation",value:function(){if(arguments.length===1){var e=arguments[0];this.setLocation(H.ON,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this.location[t]=n}}},{key:"init",value:function(e){this.location=new Array(e).fill(null),this.setAllLocations(k.NONE)}},{key:"isEqualOnSide",value:function(e,t){return this.location[t]===e.location[t]}},{key:"allPositionsEqual",value:function(e){for(var t=0;t<this.location.length;t++)if(this.location[t]!==e)return!1;return!0}}],[{key:"constructor_",value:function(){if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var t=arguments[0];this.init(1),this.location[H.ON]=t}else if(arguments[0]instanceof i){var n=arguments[0];if(this.init(n.location.length),n!==null)for(var r=0;r<this.location.length;r++)this.location[r]=n.location[r]}}else if(arguments.length===3){var s=arguments[0],o=arguments[1],c=arguments[2];this.init(3),this.location[H.ON]=s,this.location[H.LEFT]=o,this.location[H.RIGHT]=c}}}])}(),He=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return g(i,[{key:"getGeometryCount",value:function(){var e=0;return this.elt[0].isNull()||e++,this.elt[1].isNull()||e++,e}},{key:"setAllLocations",value:function(e,t){this.elt[e].setAllLocations(t)}},{key:"isNull",value:function(e){return this.elt[e].isNull()}},{key:"setAllLocationsIfNull",value:function(){if(arguments.length===1){var e=arguments[0];this.setAllLocationsIfNull(0,e),this.setAllLocationsIfNull(1,e)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this.elt[t].setAllLocationsIfNull(n)}}},{key:"isLine",value:function(e){return this.elt[e].isLine()}},{key:"merge",value:function(e){for(var t=0;t<2;t++)this.elt[t]===null&&e.elt[t]!==null?this.elt[t]=new Ve(e.elt[t]):this.elt[t].merge(e.elt[t])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){if(arguments.length===1){var e=arguments[0];return this.elt[e].get(H.ON)}if(arguments.length===2){var t=arguments[0],n=arguments[1];return this.elt[t].get(n)}}},{key:"toString",value:function(){var e=new _t;return this.elt[0]!==null&&(e.append("A:"),e.append(this.elt[0].toString())),this.elt[1]!==null&&(e.append(" B:"),e.append(this.elt[1].toString())),e.toString()}},{key:"isArea",value:function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var e=arguments[0];return this.elt[e].isArea()}}},{key:"isAnyNull",value:function(e){return this.elt[e].isAnyNull()}},{key:"setLocation",value:function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];this.elt[e].setLocation(H.ON,t)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];this.elt[n].setLocation(r,s)}}},{key:"isEqualOnSide",value:function(e,t){return this.elt[0].isEqualOnSide(e.elt[0],t)&&this.elt[1].isEqualOnSide(e.elt[1],t)}},{key:"allPositionsEqual",value:function(e,t){return this.elt[e].allPositionsEqual(t)}},{key:"toLine",value:function(e){this.elt[e].isArea()&&(this.elt[e]=new Ve(this.elt[e].location[0]))}}],[{key:"constructor_",value:function(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Ve(e),this.elt[1]=new Ve(e)}else if(arguments[0]instanceof i){var t=arguments[0];this.elt[0]=new Ve(t.elt[0]),this.elt[1]=new Ve(t.elt[1])}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.elt[0]=new Ve(k.NONE),this.elt[1]=new Ve(k.NONE),this.elt[n].setLocation(r)}else if(arguments.length===3){var s=arguments[0],o=arguments[1],c=arguments[2];this.elt[0]=new Ve(s,o,c),this.elt[1]=new Ve(s,o,c)}else if(arguments.length===4){var m=arguments[0],v=arguments[1],b=arguments[2],D=arguments[3];this.elt[0]=new Ve(k.NONE,k.NONE,k.NONE),this.elt[1]=new Ve(k.NONE,k.NONE,k.NONE),this.elt[m].setLocations(v,b,D)}}},{key:"toLineLabel",value:function(e){for(var t=new i(k.NONE),n=0;n<2;n++)t.setLocation(n,e.getLocation(n));return t}}])}(),Yn=function(){return g(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"computeRing",value:function(){if(this._ring!==null)return null;for(var i=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)i[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(i),this._isHole=ce.isCCW(this._ring.getCoordinates())}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"computePoints",value:function(i){this._startDe=i;var e=i,t=!0;do{if(e===null)throw new ht("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new ht("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var n=e.getLabel();J.isTrue(n.isArea()),this.mergeLabel(n),this.addPoints(e.getEdge(),e.isForward(),t),t=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)}},{key:"getLinearRing",value:function(){return this._ring}},{key:"getCoordinate",value:function(i){return this._pts.get(i)}},{key:"computeMaxNodeDegree",value:function(){this._maxNodeDegree=0;var i=this._startDe;do{var e=i.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),i=this.getNext(i)}while(i!==this._startDe);this._maxNodeDegree*=2}},{key:"addPoints",value:function(i,e,t){var n=i.getCoordinates();if(e){var r=1;t&&(r=0);for(var s=r;s<n.length;s++)this._pts.add(n[s])}else{var o=n.length-2;t&&(o=n.length-1);for(var c=o;c>=0;c--)this._pts.add(n[c])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var i=this._startDe;do i.getEdge().setInResult(!0),i=i.getNext();while(i!==this._startDe)}},{key:"containsPoint",value:function(i){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(i)||!Ai.isInRing(i,e.getCoordinates()))return!1;for(var t=this._holes.iterator();t.hasNext();)if(t.next().containsPoint(i))return!1;return!0}},{key:"addHole",value:function(i){this._holes.add(i)}},{key:"isShell",value:function(){return this._shell===null}},{key:"getLabel",value:function(){return this._label}},{key:"getEdges",value:function(){return this._edges}},{key:"getMaxNodeDegree",value:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}},{key:"getShell",value:function(){return this._shell}},{key:"mergeLabel",value:function(){if(arguments.length===1){var i=arguments[0];this.mergeLabel(i,0),this.mergeLabel(i,1)}else if(arguments.length===2){var e=arguments[1],t=arguments[0].getLocation(e,H.RIGHT);if(t===k.NONE)return null;if(this._label.getLocation(e)===k.NONE)return this._label.setLocation(e,t),null}}},{key:"setShell",value:function(i){this._shell=i,i!==null&&i.addHole(this)}},{key:"toPolygon",value:function(i){for(var e=new Array(this._holes.size()).fill(null),t=0;t<this._holes.size();t++)e[t]=this._holes.get(t).getLinearRing();return i.createPolygon(this.getLinearRing(),e)}}],[{key:"constructor_",value:function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new oe,this._pts=new oe,this._label=new He(k.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new oe,this._geometryFactory=null,arguments.length!==0){if(arguments.length===2){var i=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(i),this.computeRing()}}}}])}(),Ka=function(i){function e(){var t;return l(this,e),t=h(this,e),e.constructor_.apply(t,arguments),t}return _(e,i),g(e,[{key:"setEdgeRing",value:function(t,n){t.setMinEdgeRing(n)}},{key:"getNext",value:function(t){return t.getNextMin()}}],[{key:"constructor_",value:function(){var t=arguments[0],n=arguments[1];Yn.constructor_.call(this,t,n)}}])}(Yn),eo=function(i){function e(){var t;return l(this,e),t=h(this,e),e.constructor_.apply(t,arguments),t}return _(e,i),g(e,[{key:"buildMinimalRings",value:function(){var t=new oe,n=this._startDe;do{if(n.getMinEdgeRing()===null){var r=new Ka(n,this._geometryFactory);t.add(r)}n=n.getNext()}while(n!==this._startDe);return t}},{key:"setEdgeRing",value:function(t,n){t.setEdgeRing(n)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var t=this._startDe;do t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext();while(t!==this._startDe)}},{key:"getNext",value:function(t){return t.getNext()}}],[{key:"constructor_",value:function(){var t=arguments[0],n=arguments[1];Yn.constructor_.call(this,t,n)}}])}(Yn),Mr=function(){return g(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"setVisited",value:function(i){this._isVisited=i}},{key:"setInResult",value:function(i){this._isInResult=i}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(i){this._label=i}},{key:"getLabel",value:function(){return this._label}},{key:"setCovered",value:function(i){this._isCovered=i,this._isCoveredSet=!0}},{key:"updateIM",value:function(i){J.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(i)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var i=arguments[0];this._label=i}}}}])}(),zn=function(i){function e(){var t;return l(this,e),t=h(this,e),e.constructor_.apply(t,arguments),t}return _(e,i),g(e,[{key:"isIncidentEdgeInResult",value:function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"getCoordinate",value:function(){return this._coord}},{key:"print",value:function(t){t.println("node "+this._coord+" lbl: "+this._label)}},{key:"computeIM",value:function(t){}},{key:"computeMergedLocation",value:function(t,n){var r=k.NONE;if(r=this._label.getLocation(n),!t.isNull(n)){var s=t.getLocation(n);r!==k.BOUNDARY&&(r=s)}return r}},{key:"setLabel",value:function(){if(arguments.length!==2||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return R(e,"setLabel",this,1).apply(this,arguments);var t=arguments[0],n=arguments[1];this._label===null?this._label=new He(t,n):this._label.setLocation(t,n)}},{key:"getEdges",value:function(){return this._edges}},{key:"mergeLabel",value:function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof He)for(var n=arguments[0],r=0;r<2;r++){var s=this.computeMergedLocation(n,r);this._label.getLocation(r)===k.NONE&&this._label.setLocation(r,s)}}},{key:"add",value:function(t){this._edges.insert(t),t.setNode(this)}},{key:"setLabelBoundary",value:function(t){if(this._label===null)return null;var n=k.NONE;this._label!==null&&(n=this._label.getLocation(t));var r=null;switch(n){case k.BOUNDARY:r=k.INTERIOR;break;case k.INTERIOR:default:r=k.BOUNDARY}this._label.setLocation(t,r)}}],[{key:"constructor_",value:function(){this._coord=null,this._edges=null;var t=arguments[0],n=arguments[1];this._coord=t,this._edges=n,this._label=new He(0,k.NONE)}}])}(Mr),to=function(i){function e(){return l(this,e),h(this,e,arguments)}return _(e,i),g(e)}(Nr);function br(i){return i==null?0:i.color}function xe(i){return i==null?null:i.parent}function st(i,e){i!==null&&(i.color=e)}function Di(i){return i==null?null:i.left}function Or(i){return i==null?null:i.right}var mn=function(i){function e(){var t;return l(this,e),(t=h(this,e)).root_=null,t.size_=0,t}return _(e,i),g(e,[{key:"get",value:function(t){for(var n=this.root_;n!==null;){var r=t.compareTo(n.key);if(r<0)n=n.left;else{if(!(r>0))return n.value;n=n.right}}return null}},{key:"put",value:function(t,n){if(this.root_===null)return this.root_={key:t,value:n,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var r,s,o=this.root_;do if(r=o,(s=t.compareTo(o.key))<0)o=o.left;else{if(!(s>0)){var c=o.value;return o.value=n,c}o=o.right}while(o!==null);var m={key:t,left:null,right:null,value:n,parent:r,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return s<0?r.left=m:r.right=m,this.fixAfterInsertion(m),this.size_++,null}},{key:"fixAfterInsertion",value:function(t){var n;for(t.color=1;t!=null&&t!==this.root_&&t.parent.color===1;)xe(t)===Di(xe(xe(t)))?br(n=Or(xe(xe(t))))===1?(st(xe(t),0),st(n,0),st(xe(xe(t)),1),t=xe(xe(t))):(t===Or(xe(t))&&(t=xe(t),this.rotateLeft(t)),st(xe(t),0),st(xe(xe(t)),1),this.rotateRight(xe(xe(t)))):br(n=Di(xe(xe(t))))===1?(st(xe(t),0),st(n,0),st(xe(xe(t)),1),t=xe(xe(t))):(t===Di(xe(t))&&(t=xe(t),this.rotateRight(t)),st(xe(t),0),st(xe(xe(t)),1),this.rotateLeft(xe(xe(t))));this.root_.color=0}},{key:"values",value:function(){var t=new oe,n=this.getFirstEntry();if(n!==null)for(t.add(n.value);(n=e.successor(n))!==null;)t.add(n.value);return t}},{key:"entrySet",value:function(){var t=new De,n=this.getFirstEntry();if(n!==null)for(t.add(n);(n=e.successor(n))!==null;)t.add(n);return t}},{key:"rotateLeft",value:function(t){if(t!=null){var n=t.right;t.right=n.left,n.left!=null&&(n.left.parent=t),n.parent=t.parent,t.parent==null?this.root_=n:t.parent.left===t?t.parent.left=n:t.parent.right=n,n.left=t,t.parent=n}}},{key:"rotateRight",value:function(t){if(t!=null){var n=t.left;t.left=n.right,n.right!=null&&(n.right.parent=t),n.parent=t.parent,t.parent==null?this.root_=n:t.parent.right===t?t.parent.right=n:t.parent.left=n,n.right=t,t.parent=n}}},{key:"getFirstEntry",value:function(){var t=this.root_;if(t!=null)for(;t.left!=null;)t=t.left;return t}},{key:"size",value:function(){return this.size_}},{key:"containsKey",value:function(t){for(var n=this.root_;n!==null;){var r=t.compareTo(n.key);if(r<0)n=n.left;else{if(!(r>0))return!0;n=n.right}}return!1}}],[{key:"successor",value:function(t){var n;if(t===null)return null;if(t.right!==null){for(n=t.right;n.left!==null;)n=n.left;return n}n=t.parent;for(var r=t;n!==null&&r===n.right;)r=n,n=n.parent;return n}}])}(to),Pr=function(){return g(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"find",value:function(i){return this.nodeMap.get(i)}},{key:"addNode",value:function(){if(arguments[0]instanceof O){var i=arguments[0],e=this.nodeMap.get(i);return e===null&&(e=this.nodeFact.createNode(i),this.nodeMap.put(i,e)),e}if(arguments[0]instanceof zn){var t=arguments[0],n=this.nodeMap.get(t.getCoordinate());return n===null?(this.nodeMap.put(t.getCoordinate(),t),t):(n.mergeLabel(t),n)}}},{key:"print",value:function(i){for(var e=this.iterator();e.hasNext();)e.next().print(i)}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(i){for(var e=new oe,t=this.iterator();t.hasNext();){var n=t.next();n.getLabel().getLocation(i)===k.BOUNDARY&&e.add(n)}return e}},{key:"add",value:function(i){var e=i.getCoordinate();this.addNode(e).add(i)}}],[{key:"constructor_",value:function(){this.nodeMap=new mn,this.nodeFact=null;var i=arguments[0];this.nodeFact=i}}])}(),Fe=function(){function i(){l(this,i)}return g(i,null,[{key:"isNorthern",value:function(e){return e===i.NE||e===i.NW}},{key:"isOpposite",value:function(e,t){return e!==t&&(e-t+4)%4===2}},{key:"commonHalfPlane",value:function(e,t){if(e===t)return e;if((e-t+4)%4===2)return-1;var n=e<t?e:t;return n===0&&(e>t?e:t)===3?3:n}},{key:"isInHalfPlane",value:function(e,t){return t===i.SE?e===i.SE||e===i.SW:e===t||e===t+1}},{key:"quadrant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1];if(e===0&&t===0)throw new x("Cannot compute the quadrant for point ( "+e+", "+t+" )");return e>=0?t>=0?i.NE:i.SE:t>=0?i.NW:i.SW}if(arguments[0]instanceof O&&arguments[1]instanceof O){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new x("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?i.NE:i.SE:r.y>=n.y?i.NW:i.SW}}}])}();Fe.NE=0,Fe.NW=1,Fe.SW=2,Fe.SE=3;var Ar=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return g(i,[{key:"compareDirection",value:function(e){return this._dx===e._dx&&this._dy===e._dy?0:this._quadrant>e._quadrant?1:this._quadrant<e._quadrant?-1:ce.index(e._p0,e._p1,this._p1)}},{key:"getDy",value:function(){return this._dy}},{key:"getCoordinate",value:function(){return this._p0}},{key:"setNode",value:function(e){this._node=e}},{key:"print",value:function(e){var t=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),s=n.substring(r+1);e.print("  "+s+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label)}},{key:"compareTo",value:function(e){var t=e;return this.compareDirection(t)}},{key:"getDirectedCoordinate",value:function(){return this._p1}},{key:"getDx",value:function(){return this._dx}},{key:"getLabel",value:function(){return this._label}},{key:"getEdge",value:function(){return this._edge}},{key:"getQuadrant",value:function(){return this._quadrant}},{key:"getNode",value:function(){return this._node}},{key:"toString",value:function(){var e=Math.atan2(this._dy,this._dx),t=this.getClass().getName(),n=t.lastIndexOf(".");return"  "+t.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label}},{key:"computeLabel",value:function(e){}},{key:"init",value:function(e,t){this._p0=e,this._p1=t,this._dx=t.x-e.x,this._dy=t.y-e.y,this._quadrant=Fe.quadrant(this._dx,this._dy),J.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")}},{key:"interfaces_",get:function(){return[C]}}],[{key:"constructor_",value:function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var e=arguments[0];this._edge=e}else if(arguments.length===3){var t=arguments[0],n=arguments[1],r=arguments[2];i.constructor_.call(this,t,n,r,null)}else if(arguments.length===4){var s=arguments[0],o=arguments[1],c=arguments[2],m=arguments[3];i.constructor_.call(this,s),this.init(o,c),this._label=m}}}])}(),Fi=function(i){function e(){var t;return l(this,e),t=h(this,e),e.constructor_.apply(t,arguments),t}return _(e,i),g(e,[{key:"getNextMin",value:function(){return this._nextMin}},{key:"getDepth",value:function(t){return this._depth[t]}},{key:"setVisited",value:function(t){this._isVisited=t}},{key:"computeDirectedLabel",value:function(){this._label=new He(this._edge.getLabel()),this._isForward||this._label.flip()}},{key:"getNext",value:function(){return this._next}},{key:"setDepth",value:function(t,n){if(this._depth[t]!==-999&&this._depth[t]!==n)throw new ht("assigned depths do not match",this.getCoordinate());this._depth[t]=n}},{key:"isInteriorAreaEdge",value:function(){for(var t=!0,n=0;n<2;n++)this._label.isArea(n)&&this._label.getLocation(n,H.LEFT)===k.INTERIOR&&this._label.getLocation(n,H.RIGHT)===k.INTERIOR||(t=!1);return t}},{key:"setNextMin",value:function(t){this._nextMin=t}},{key:"print",value:function(t){R(e,"print",this,1).call(this,t),t.print(" "+this._depth[H.LEFT]+"/"+this._depth[H.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")}},{key:"setMinEdgeRing",value:function(t){this._minEdgeRing=t}},{key:"isLineEdge",value:function(){var t=this._label.isLine(0)||this._label.isLine(1),n=!this._label.isArea(0)||this._label.allPositionsEqual(0,k.EXTERIOR),r=!this._label.isArea(1)||this._label.allPositionsEqual(1,k.EXTERIOR);return t&&n&&r}},{key:"setEdgeRing",value:function(t){this._edgeRing=t}},{key:"getMinEdgeRing",value:function(){return this._minEdgeRing}},{key:"getDepthDelta",value:function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t}},{key:"setInResult",value:function(t){this._isInResult=t}},{key:"getSym",value:function(){return this._sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this._edge}},{key:"printEdge",value:function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)}},{key:"setSym",value:function(t){this._sym=t}},{key:"setVisitedEdge",value:function(t){this.setVisited(t),this._sym.setVisited(t)}},{key:"setEdgeDepths",value:function(t,n){var r=this.getEdge().getDepthDelta();this._isForward||(r=-r);var s=1;t===H.LEFT&&(s=-1);var o=H.opposite(t),c=n+r*s;this.setDepth(t,n),this.setDepth(o,c)}},{key:"getEdgeRing",value:function(){return this._edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(t){this._next=t}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];var t=arguments[0],n=arguments[1];if(Ar.constructor_.call(this,t),this._isForward=n,n)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var r=t.getNumPoints()-1;this.init(t.getCoordinate(r),t.getCoordinate(r-1))}this.computeDirectedLabel()}},{key:"depthFactor",value:function(t,n){return t===k.EXTERIOR&&n===k.INTERIOR?1:t===k.INTERIOR&&n===k.EXTERIOR?-1:0}}])}(Ar),Dr=function(){return g(function i(){l(this,i)},[{key:"createNode",value:function(i){return new zn(i,null)}}])}(),Fr=function(){return g(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"printEdges",value:function(i){i.println("Edges:");for(var e=0;e<this._edges.size();e++){i.println("edge "+e+":");var t=this._edges.get(e);t.print(i),t.eiList.print(i)}}},{key:"find",value:function(i){return this._nodes.find(i)}},{key:"addNode",value:function(){if(arguments[0]instanceof zn){var i=arguments[0];return this._nodes.addNode(i)}if(arguments[0]instanceof O){var e=arguments[0];return this._nodes.addNode(e)}}},{key:"getNodeIterator",value:function(){return this._nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var i=this._nodes.iterator();i.hasNext();)i.next().getEdges().linkResultDirectedEdges()}},{key:"debugPrintln",value:function(i){Ue.out.println(i)}},{key:"isBoundaryNode",value:function(i,e){var t=this._nodes.find(e);if(t===null)return!1;var n=t.getLabel();return n!==null&&n.getLocation(i)===k.BOUNDARY}},{key:"linkAllDirectedEdges",value:function(){for(var i=this._nodes.iterator();i.hasNext();)i.next().getEdges().linkAllDirectedEdges()}},{key:"matchInSameDirection",value:function(i,e,t,n){return!!i.equals(t)&&ce.index(i,e,n)===ce.COLLINEAR&&Fe.quadrant(i,e)===Fe.quadrant(t,n)}},{key:"getEdgeEnds",value:function(){return this._edgeEndList}},{key:"debugPrint",value:function(i){Ue.out.print(i)}},{key:"getEdgeIterator",value:function(){return this._edges.iterator()}},{key:"findEdgeInSameDirection",value:function(i,e){for(var t=0;t<this._edges.size();t++){var n=this._edges.get(t),r=n.getCoordinates();if(this.matchInSameDirection(i,e,r[0],r[1])||this.matchInSameDirection(i,e,r[r.length-1],r[r.length-2]))return n}return null}},{key:"insertEdge",value:function(i){this._edges.add(i)}},{key:"findEdgeEnd",value:function(i){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var t=e.next();if(t.getEdge()===i)return t}return null}},{key:"addEdges",value:function(i){for(var e=i.iterator();e.hasNext();){var t=e.next();this._edges.add(t);var n=new Fi(t,!0),r=new Fi(t,!1);n.setSym(r),r.setSym(n),this.add(n),this.add(r)}}},{key:"add",value:function(i){this._nodes.add(i),this._edgeEndList.add(i)}},{key:"getNodes",value:function(){return this._nodes.values()}},{key:"findEdge",value:function(i,e){for(var t=0;t<this._edges.size();t++){var n=this._edges.get(t),r=n.getCoordinates();if(i.equals(r[0])&&e.equals(r[1]))return n}return null}}],[{key:"constructor_",value:function(){if(this._edges=new oe,this._nodes=null,this._edgeEndList=new oe,arguments.length===0)this._nodes=new Pr(new Dr);else if(arguments.length===1){var i=arguments[0];this._nodes=new Pr(i)}}},{key:"linkResultDirectedEdges",value:function(i){for(var e=i.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()}}])}(),no=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return g(i,[{key:"sortShellsAndHoles",value:function(e,t,n){for(var r=e.iterator();r.hasNext();){var s=r.next();s.isHole()?n.add(s):t.add(s)}}},{key:"computePolygons",value:function(e){for(var t=new oe,n=e.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);t.add(r)}return t}},{key:"placeFreeHoles",value:function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next();if(r.getShell()===null){var s=i.findEdgeRingContaining(r,e);if(s===null)throw new ht("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(s)}}}},{key:"buildMinimalEdgeRings",value:function(e,t,n){for(var r=new oe,s=e.iterator();s.hasNext();){var o=s.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var c=o.buildMinimalRings(),m=this.findShell(c);m!==null?(this.placePolygonHoles(m,c),t.add(m)):n.addAll(c)}else r.add(o)}return r}},{key:"buildMaximalEdgeRings",value:function(e){for(var t=new oe,n=e.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&r.getEdgeRing()===null){var s=new eo(r,this._geometryFactory);t.add(s),s.setInResult()}}return t}},{key:"placePolygonHoles",value:function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(e)}}},{key:"getPolygons",value:function(){return this.computePolygons(this._shellList)}},{key:"findShell",value:function(e){for(var t=0,n=null,r=e.iterator();r.hasNext();){var s=r.next();s.isHole()||(n=s,t++)}return J.isTrue(t<=1,"found two shells in MinimalEdgeRing list"),n}},{key:"add",value:function(){if(arguments.length===1){var e=arguments[0];this.add(e.getEdgeEnds(),e.getNodes())}else if(arguments.length===2){var t=arguments[0],n=arguments[1];Fr.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(t),s=new oe,o=this.buildMinimalEdgeRings(r,this._shellList,s);this.sortShellsAndHoles(o,this._shellList,s),this.placeFreeHoles(this._shellList,s)}}}],[{key:"constructor_",value:function(){this._geometryFactory=null,this._shellList=new oe;var e=arguments[0];this._geometryFactory=e}},{key:"findEdgeRingContaining",value:function(e,t){for(var n=e.getLinearRing(),r=n.getEnvelopeInternal(),s=n.getCoordinateN(0),o=null,c=null,m=t.iterator();m.hasNext();){var v=m.next(),b=v.getLinearRing(),D=b.getEnvelopeInternal();if(!D.equals(r)&&D.contains(r)){s=Me.ptNotInList(n.getCoordinates(),b.getCoordinates());var X=!1;Ai.isInRing(s,b.getCoordinates())&&(X=!0),X&&(o===null||c.contains(D))&&(c=(o=v).getLinearRing().getEnvelopeInternal())}}return o}}])}(),qr=function(){return g(function i(){l(this,i)},[{key:"getBounds",value:function(){}}])}(),gt=function(){return g(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"getItem",value:function(){return this._item}},{key:"getBounds",value:function(){return this._bounds}},{key:"interfaces_",get:function(){return[qr,P]}}],[{key:"constructor_",value:function(){this._bounds=null,this._item=null;var i=arguments[0],e=arguments[1];this._bounds=i,this._item=e}}])}(),Xn=function(){return g(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"poll",value:function(){if(this.isEmpty())return null;var i=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),i}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(i){for(var e=null,t=this._items.get(i);2*i<=this._size&&((e=2*i)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(t)<0);i=e)this._items.set(i,this._items.get(e));this._items.set(i,t)}},{key:"clear",value:function(){this._size=0,this._items.clear()}},{key:"peek",value:function(){return this.isEmpty()?null:this._items.get(1)}},{key:"isEmpty",value:function(){return this._size===0}},{key:"add",value:function(i){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,i);i.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,i)}}],[{key:"constructor_",value:function(){this._size=null,this._items=null,this._size=0,this._items=new oe,this._items.add(null)}}])}(),io=function(){return g(function i(){l(this,i)},[{key:"insert",value:function(i,e){}},{key:"remove",value:function(i,e){}},{key:"query",value:function(){}}])}(),We=function(){return g(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"getLevel",value:function(){return this._level}},{key:"size",value:function(){return this._childBoundables.size()}},{key:"getChildBoundables",value:function(){return this._childBoundables}},{key:"addChildBoundable",value:function(i){J.isTrue(this._bounds===null),this._childBoundables.add(i)}},{key:"isEmpty",value:function(){return this._childBoundables.isEmpty()}},{key:"getBounds",value:function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds}},{key:"interfaces_",get:function(){return[qr,P]}}],[{key:"constructor_",value:function(){if(this._childBoundables=new oe,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var i=arguments[0];this._level=i}}}}])}(),Gt={reverseOrder:function(){return{compare:function(i,e){return e.compareTo(i)}}},min:function(i){return Gt.sort(i),i.get(0)},sort:function(i,e){var t=i.toArray();e?Ct.sort(t,e):Ct.sort(t);for(var n=i.iterator(),r=0,s=t.length;r<s;r++)n.next(),n.set(t[r])},singletonList:function(i){var e=new oe;return e.add(i),e}},ro=function(){function i(){l(this,i)}return g(i,null,[{key:"maxDistance",value:function(e,t,n,r,s,o,c,m){var v=i.distance(e,t,s,o);return v=Math.max(v,i.distance(e,t,c,m)),v=Math.max(v,i.distance(n,r,s,o)),v=Math.max(v,i.distance(n,r,c,m))}},{key:"distance",value:function(e,t,n,r){var s=n-e,o=r-t;return Math.sqrt(s*s+o*o)}},{key:"maximumDistance",value:function(e,t){var n=Math.min(e.getMinX(),t.getMinX()),r=Math.min(e.getMinY(),t.getMinY()),s=Math.max(e.getMaxX(),t.getMaxX()),o=Math.max(e.getMaxY(),t.getMaxY());return i.distance(n,r,s,o)}},{key:"minMaxDistance",value:function(e,t){var n=e.getMinX(),r=e.getMinY(),s=e.getMaxX(),o=e.getMaxY(),c=t.getMinX(),m=t.getMinY(),v=t.getMaxX(),b=t.getMaxY(),D=i.maxDistance(n,r,n,o,c,m,c,b);return D=Math.min(D,i.maxDistance(n,r,n,o,c,m,v,m)),D=Math.min(D,i.maxDistance(n,r,n,o,v,b,c,b)),D=Math.min(D,i.maxDistance(n,r,n,o,v,b,v,m)),D=Math.min(D,i.maxDistance(n,r,s,r,c,m,c,b)),D=Math.min(D,i.maxDistance(n,r,s,r,c,m,v,m)),D=Math.min(D,i.maxDistance(n,r,s,r,v,b,c,b)),D=Math.min(D,i.maxDistance(n,r,s,r,v,b,v,m)),D=Math.min(D,i.maxDistance(s,o,n,o,c,m,c,b)),D=Math.min(D,i.maxDistance(s,o,n,o,c,m,v,m)),D=Math.min(D,i.maxDistance(s,o,n,o,v,b,c,b)),D=Math.min(D,i.maxDistance(s,o,n,o,v,b,v,m)),D=Math.min(D,i.maxDistance(s,o,s,r,c,m,c,b)),D=Math.min(D,i.maxDistance(s,o,s,r,c,m,v,m)),D=Math.min(D,i.maxDistance(s,o,s,r,v,b,c,b)),D=Math.min(D,i.maxDistance(s,o,s,r,v,b,v,m))}}])}(),Yt=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return g(i,[{key:"maximumDistance",value:function(){return ro.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}},{key:"expandToQueue",value:function(e,t){var n=i.isComposite(this._boundable1),r=i.isComposite(this._boundable2);if(n&&r)return i.area(this._boundable1)>i.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,e,t),null):(this.expand(this._boundable2,this._boundable1,!0,e,t),null);if(n)return this.expand(this._boundable1,this._boundable2,!1,e,t),null;if(r)return this.expand(this._boundable2,this._boundable1,!0,e,t),null;throw new x("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(i.isComposite(this._boundable1)||i.isComposite(this._boundable2))}},{key:"compareTo",value:function(e){var t=e;return this._distance<t._distance?-1:this._distance>t._distance?1:0}},{key:"expand",value:function(e,t,n,r,s){for(var o=e.getChildBoundables().iterator();o.hasNext();){var c=o.next(),m=null;(m=n?new i(t,c,this._itemDistance):new i(c,t,this._itemDistance)).getDistance()<s&&r.add(m)}}},{key:"getBoundable",value:function(e){return e===0?this._boundable1:this._boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}},{key:"interfaces_",get:function(){return[C]}}],[{key:"constructor_",value:function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var e=arguments[0],t=arguments[1],n=arguments[2];this._boundable1=e,this._boundable2=t,this._itemDistance=n,this._distance=this.distance()}},{key:"area",value:function(e){return e.getBounds().getArea()}},{key:"isComposite",value:function(e){return e instanceof We}}])}(),Br=function(){return g(function i(){l(this,i)},[{key:"visitItem",value:function(i){}}])}(),zt=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return g(i,[{key:"queryInternal",value:function(){if(he(arguments[2],Br)&&arguments[0]instanceof Object&&arguments[1]instanceof We)for(var e=arguments[0],t=arguments[2],n=arguments[1].getChildBoundables(),r=0;r<n.size();r++){var s=n.get(r);this.getIntersectsOp().intersects(s.getBounds(),e)&&(s instanceof We?this.queryInternal(e,s,t):s instanceof gt?t.visitItem(s.getItem()):J.shouldNeverReachHere())}else if(he(arguments[2],ct)&&arguments[0]instanceof Object&&arguments[1]instanceof We)for(var o=arguments[0],c=arguments[2],m=arguments[1].getChildBoundables(),v=0;v<m.size();v++){var b=m.get(v);this.getIntersectsOp().intersects(b.getBounds(),o)&&(b instanceof We?this.queryInternal(o,b,c):b instanceof gt?c.add(b.getItem()):J.shouldNeverReachHere())}}},{key:"getNodeCapacity",value:function(){return this._nodeCapacity}},{key:"lastNode",value:function(e){return e.get(e.size()-1)}},{key:"size",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var e=0,t=arguments[0].getChildBoundables().iterator();t.hasNext();){var n=t.next();n instanceof We?e+=this.size(n):n instanceof gt&&(e+=1)}return e}}},{key:"removeItem",value:function(e,t){for(var n=null,r=e.getChildBoundables().iterator();r.hasNext();){var s=r.next();s instanceof gt&&s.getItem()===t&&(n=s)}return n!==null&&(e.getChildBoundables().remove(n),!0)}},{key:"itemsTree",value:function(){if(arguments.length===0){this.build();var e=this.itemsTree(this._root);return e===null?new oe:e}if(arguments.length===1){for(var t=arguments[0],n=new oe,r=t.getChildBoundables().iterator();r.hasNext();){var s=r.next();if(s instanceof We){var o=this.itemsTree(s);o!==null&&n.add(o)}else s instanceof gt?n.add(s.getItem()):J.shouldNeverReachHere()}return n.size()<=0?null:n}}},{key:"insert",value:function(e,t){J.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new gt(e,t))}},{key:"boundablesAtLevel",value:function(){if(arguments.length===1){var e=arguments[0],t=new oe;return this.boundablesAtLevel(e,this._root,t),t}if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];if(J.isTrue(n>-2),r.getLevel()===n)return s.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var c=o.next();c instanceof We?this.boundablesAtLevel(n,c,s):(J.isTrue(c instanceof gt),n===-1&&s.add(c))}return null}}},{key:"query",value:function(){if(arguments.length===1){var e=arguments[0];this.build();var t=new oe;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.queryInternal(e,this._root,t),t}if(arguments.length===2){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.queryInternal(n,this._root,r)}}},{key:"build",value:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}},{key:"getRoot",value:function(){return this.build(),this._root}},{key:"remove",value:function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.remove(e,this._root,t)}if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2],o=this.removeItem(r,s);if(o)return!0;for(var c=null,m=r.getChildBoundables().iterator();m.hasNext();){var v=m.next();if(this.getIntersectsOp().intersects(v.getBounds(),n)&&v instanceof We&&(o=this.remove(n,v,s))){c=v;break}}return c!==null&&c.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(c),o}}},{key:"createHigherLevels",value:function(e,t){J.isTrue(!e.isEmpty());var n=this.createParentBoundables(e,t+1);return n.size()===1?n.get(0):this.createHigherLevels(n,t+1)}},{key:"depth",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var e=0,t=arguments[0].getChildBoundables().iterator();t.hasNext();){var n=t.next();if(n instanceof We){var r=this.depth(n);r>e&&(e=r)}}return e+1}}},{key:"createParentBoundables",value:function(e,t){J.isTrue(!e.isEmpty());var n=new oe;n.add(this.createNode(t));var r=new oe(e);Gt.sort(r,this.getComparator());for(var s=r.iterator();s.hasNext();){var o=s.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(t)),this.lastNode(n).addChildBoundable(o)}return n}},{key:"isEmpty",value:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}},{key:"interfaces_",get:function(){return[P]}}],[{key:"constructor_",value:function(){if(this._root=null,this._built=!1,this._itemBoundables=new oe,this._nodeCapacity=null,arguments.length===0)i.constructor_.call(this,i.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var e=arguments[0];J.isTrue(e>1,"Node capacity must be greater than 1"),this._nodeCapacity=e}}},{key:"compareDoubles",value:function(e,t){return e>t?1:e<t?-1:0}}])}();zt.IntersectsOp=function(){},zt.DEFAULT_NODE_CAPACITY=10;var so=function(){return g(function i(){l(this,i)},[{key:"distance",value:function(i,e){}}])}(),at=function(i){function e(){var t;return l(this,e),t=h(this,e),e.constructor_.apply(t,arguments),t}return _(e,i),g(e,[{key:"createParentBoundablesFromVerticalSlices",value:function(t,n){J.isTrue(t.length>0);for(var r=new oe,s=0;s<t.length;s++)r.addAll(this.createParentBoundablesFromVerticalSlice(t[s],n));return r}},{key:"nearestNeighbourK",value:function(){if(arguments.length===2){var t=arguments[0],n=arguments[1];return this.nearestNeighbourK(t,F.POSITIVE_INFINITY,n)}if(arguments.length===3){var r=arguments[0],s=arguments[2],o=arguments[1],c=new Xn;c.add(r);for(var m=new Xn;!c.isEmpty()&&o>=0;){var v=c.poll(),b=v.getDistance();if(b>=o)break;v.isLeaves()?m.size()<s?m.add(v):(m.peek().getDistance()>b&&(m.poll(),m.add(v)),o=m.peek().getDistance()):v.expandToQueue(c,o)}return e.getItems(m)}}},{key:"createNode",value:function(t){return new Gr(t)}},{key:"size",value:function(){return arguments.length===0?R(e,"size",this,1).call(this):R(e,"size",this,1).apply(this,arguments)}},{key:"insert",value:function(){if(!(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof de))return R(e,"insert",this,1).apply(this,arguments);var t=arguments[0],n=arguments[1];if(t.isNull())return null;R(e,"insert",this,1).call(this,t,n)}},{key:"getIntersectsOp",value:function(){return e.intersectsOp}},{key:"verticalSlices",value:function(t,n){for(var r=Math.trunc(Math.ceil(t.size()/n)),s=new Array(n).fill(null),o=t.iterator(),c=0;c<n;c++){s[c]=new oe;for(var m=0;o.hasNext()&&m<r;){var v=o.next();s[c].add(v),m++}}return s}},{key:"query",value:function(){if(arguments.length===1){var t=arguments[0];return R(e,"query",this,1).call(this,t)}if(arguments.length===2){var n=arguments[0],r=arguments[1];R(e,"query",this,1).call(this,n,r)}}},{key:"getComparator",value:function(){return e.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(t,n){return R(e,"createParentBoundables",this,1).call(this,t,n)}},{key:"remove",value:function(){if(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof de){var t=arguments[0],n=arguments[1];return R(e,"remove",this,1).call(this,t,n)}return R(e,"remove",this,1).apply(this,arguments)}},{key:"depth",value:function(){return arguments.length===0?R(e,"depth",this,1).call(this):R(e,"depth",this,1).apply(this,arguments)}},{key:"createParentBoundables",value:function(t,n){J.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),s=new oe(t);Gt.sort(s,e.xComparator);var o=this.verticalSlices(s,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,n)}},{key:"nearestNeighbour",value:function(){if(arguments.length===1){if(he(arguments[0],so)){var t=arguments[0];if(this.isEmpty())return null;var n=new Yt(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(n)}if(arguments[0]instanceof Yt){var r=arguments[0],s=F.POSITIVE_INFINITY,o=null,c=new Xn;for(c.add(r);!c.isEmpty()&&s>0;){var m=c.poll(),v=m.getDistance();if(v>=s)break;m.isLeaves()?(s=v,o=m):m.expandToQueue(c,s)}return o===null?null:[o.getBoundable(0).getItem(),o.getBoundable(1).getItem()]}}else{if(arguments.length===2){var b=arguments[0],D=arguments[1];if(this.isEmpty()||b.isEmpty())return null;var X=new Yt(this.getRoot(),b.getRoot(),D);return this.nearestNeighbour(X)}if(arguments.length===3){var $=arguments[2],te=new gt(arguments[0],arguments[1]),se=new Yt(this.getRoot(),te,$);return this.nearestNeighbour(se)[0]}if(arguments.length===4){var _e=arguments[2],ve=arguments[3],Ee=new gt(arguments[0],arguments[1]),Oe=new Yt(this.getRoot(),Ee,_e);return this.nearestNeighbourK(Oe,ve)}}}},{key:"isWithinDistance",value:function(){if(arguments.length===2){var t=arguments[0],n=arguments[1],r=F.POSITIVE_INFINITY,s=new Xn;for(s.add(t);!s.isEmpty();){var o=s.poll(),c=o.getDistance();if(c>n)return!1;if(o.maximumDistance()<=n)return!0;if(o.isLeaves()){if((r=c)<=n)return!0}else o.expandToQueue(s,r)}return!1}if(arguments.length===3){var m=arguments[0],v=arguments[1],b=arguments[2],D=new Yt(this.getRoot(),m.getRoot(),v);return this.isWithinDistance(D,b)}}},{key:"interfaces_",get:function(){return[io,P]}}],[{key:"constructor_",value:function(){if(arguments.length===0)e.constructor_.call(this,e.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var t=arguments[0];zt.constructor_.call(this,t)}}},{key:"centreX",value:function(t){return e.avg(t.getMinX(),t.getMaxX())}},{key:"avg",value:function(t,n){return(t+n)/2}},{key:"getItems",value:function(t){for(var n=new Array(t.size()).fill(null),r=0;!t.isEmpty();){var s=t.poll();n[r]=s.getBoundable(0).getItem(),r++}return n}},{key:"centreY",value:function(t){return e.avg(t.getMinY(),t.getMaxY())}}])}(zt),Gr=function(i){function e(){var t;return l(this,e),t=h(this,e),e.constructor_.apply(t,arguments),t}return _(e,i),g(e,[{key:"computeBounds",value:function(){for(var t=null,n=this.getChildBoundables().iterator();n.hasNext();){var r=n.next();t===null?t=new de(r.getBounds()):t.expandToInclude(r.getBounds())}return t}}],[{key:"constructor_",value:function(){var t=arguments[0];We.constructor_.call(this,t)}}])}(We);at.STRtreeNode=Gr,at.xComparator=new(function(){return g(function i(){l(this,i)},[{key:"interfaces_",get:function(){return[ee]}},{key:"compare",value:function(i,e){return zt.compareDoubles(at.centreX(i.getBounds()),at.centreX(e.getBounds()))}}])}()),at.yComparator=new(function(){return g(function i(){l(this,i)},[{key:"interfaces_",get:function(){return[ee]}},{key:"compare",value:function(i,e){return zt.compareDoubles(at.centreY(i.getBounds()),at.centreY(e.getBounds()))}}])}()),at.intersectsOp=new(function(){return g(function i(){l(this,i)},[{key:"interfaces_",get:function(){return[IntersectsOp]}},{key:"intersects",value:function(i,e){return i.intersects(e)}}])}()),at.DEFAULT_NODE_CAPACITY=10;var ao=function(){function i(){l(this,i)}return g(i,null,[{key:"relativeSign",value:function(e,t){return e<t?-1:e>t?1:0}},{key:"compare",value:function(e,t,n){if(t.equals2D(n))return 0;var r=i.relativeSign(t.x,n.x),s=i.relativeSign(t.y,n.y);switch(e){case 0:return i.compareValue(r,s);case 1:return i.compareValue(s,r);case 2:return i.compareValue(s,-r);case 3:return i.compareValue(-r,s);case 4:return i.compareValue(-r,-s);case 5:return i.compareValue(-s,-r);case 6:return i.compareValue(-s,r);case 7:return i.compareValue(r,-s)}return J.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(e,t){return e<0?-1:e>0?1:t<0?-1:t>0?1:0}}])}(),oo=function(){return g(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(i){i.print(this.coord),i.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(i){var e=i;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:this._isInterior?e._isInterior?ao.compare(this._segmentOctant,this.coord,e.coord):1:-1}},{key:"isEndPoint",value:function(i){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===i}},{key:"toString",value:function(){return this.segmentIndex+":"+this.coord.toString()}},{key:"isInterior",value:function(){return this._isInterior}},{key:"interfaces_",get:function(){return[C]}}],[{key:"constructor_",value:function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var i=arguments[0],e=arguments[1],t=arguments[2],n=arguments[3];this._segString=i,this.coord=new O(e),this.segmentIndex=t,this._segmentOctant=n,this._isInterior=!e.equals2D(i.getCoordinate(t))}}])}(),uo=function(){return g(function i(){l(this,i)},[{key:"hasNext",value:function(){}},{key:"next",value:function(){}},{key:"remove",value:function(){}}])}(),lo=function(){return g(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"getSplitCoordinates",value:function(){var i=new fn;this.addEndpoints();for(var e=this.iterator(),t=e.next();e.hasNext();){var n=e.next();this.addEdgeCoordinates(t,n,i),t=n}return i.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var i=new oe;this.findCollapsesFromInsertedNodes(i),this.findCollapsesFromExistingVertices(i);for(var e=i.iterator();e.hasNext();){var t=e.next().intValue();this.add(this._edge.getCoordinate(t),t)}}},{key:"createSplitEdgePts",value:function(i,e){var t=e.segmentIndex-i.segmentIndex+2;if(t===2)return[new O(i.coord),new O(e.coord)];var n=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(n);r||t--;var s=new Array(t).fill(null),o=0;s[o++]=new O(i.coord);for(var c=i.segmentIndex+1;c<=e.segmentIndex;c++)s[o++]=this._edge.getCoordinate(c);return r&&(s[o]=new O(e.coord)),s}},{key:"print",value:function(i){i.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(i)}},{key:"findCollapsesFromExistingVertices",value:function(i){for(var e=0;e<this._edge.size()-2;e++){var t=this._edge.getCoordinate(e);this._edge.getCoordinate(e+1);var n=this._edge.getCoordinate(e+2);t.equals2D(n)&&i.add(kt.valueOf(e+1))}}},{key:"addEdgeCoordinates",value:function(i,e,t){var n=this.createSplitEdgePts(i,e);t.add(n,!1)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(i){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),t=e.next();e.hasNext();){var n=e.next(),r=this.createSplitEdge(t,n);i.add(r),t=n}}},{key:"findCollapseIndex",value:function(i,e,t){if(!i.coord.equals2D(e.coord))return!1;var n=e.segmentIndex-i.segmentIndex;return e.isInterior()||n--,n===1&&(t[0]=i.segmentIndex+1,!0)}},{key:"findCollapsesFromInsertedNodes",value:function(i){for(var e=new Array(1).fill(null),t=this.iterator(),n=t.next();t.hasNext();){var r=t.next();this.findCollapseIndex(n,r,e)&&i.add(kt.valueOf(e[0])),n=r}}},{key:"getEdge",value:function(){return this._edge}},{key:"addEndpoints",value:function(){var i=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(i),i)}},{key:"createSplitEdge",value:function(i,e){var t=this.createSplitEdgePts(i,e);return new Mt(t,this._edge.getData())}},{key:"add",value:function(i,e){var t=new oo(this._edge,i,e,this._edge.getSegmentOctant(e)),n=this._nodeMap.get(t);return n!==null?(J.isTrue(n.coord.equals2D(i),"Found equal nodes with different coordinates"),n):(this._nodeMap.put(t,t),t)}},{key:"checkSplitEdgesCorrectness",value:function(i){var e=this._edge.getCoordinates(),t=i.get(0).getCoordinate(0);if(!t.equals2D(e[0]))throw new Q("bad split edge start point at "+t);var n=i.get(i.size()-1).getCoordinates(),r=n[n.length-1];if(!r.equals2D(e[e.length-1]))throw new Q("bad split edge end point at "+r)}}],[{key:"constructor_",value:function(){this._nodeMap=new mn,this._edge=null;var i=arguments[0];this._edge=i}}])}(),co=function(){function i(){l(this,i)}return g(i,null,[{key:"octant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],t=arguments[1];if(e===0&&t===0)throw new x("Cannot compute the octant for point ( "+e+", "+t+" )");var n=Math.abs(e),r=Math.abs(t);return e>=0?t>=0?n>=r?0:1:n>=r?7:6:t>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof O&&arguments[1]instanceof O){var s=arguments[0],o=arguments[1],c=o.x-s.x,m=o.y-s.y;if(c===0&&m===0)throw new x("Cannot compute the octant for two identical points "+s);return i.octant(c,m)}}}])}(),ho=function(){return g(function i(){l(this,i)},[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(i){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(i){}},{key:"getData",value:function(){}}])}(),fo=function(){return g(function i(){l(this,i)},[{key:"addIntersection",value:function(i,e){}},{key:"interfaces_",get:function(){return[ho]}}])}(),Mt=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return g(i,[{key:"getCoordinates",value:function(){return this._pts}},{key:"size",value:function(){return this._pts.length}},{key:"getCoordinate",value:function(e){return this._pts[e]}},{key:"isClosed",value:function(){return this._pts[0].equals(this._pts[this._pts.length-1])}},{key:"getSegmentOctant",value:function(e){return e===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(e),this.getCoordinate(e+1))}},{key:"setData",value:function(e){this._data=e}},{key:"safeOctant",value:function(e,t){return e.equals2D(t)?0:co.octant(e,t)}},{key:"getData",value:function(){return this._data}},{key:"addIntersection",value:function(){if(arguments.length===2){var e=arguments[0],t=arguments[1];this.addIntersectionNode(e,t)}else if(arguments.length===4){var n=arguments[1],r=arguments[3],s=new O(arguments[0].getIntersection(r));this.addIntersection(s,n)}}},{key:"toString",value:function(){return Pi.toLineString(new gn(this._pts))}},{key:"getNodeList",value:function(){return this._nodeList}},{key:"addIntersectionNode",value:function(e,t){var n=t,r=n+1;if(r<this._pts.length){var s=this._pts[r];e.equals2D(s)&&(n=r)}return this._nodeList.add(e,n)}},{key:"addIntersections",value:function(e,t,n){for(var r=0;r<e.getIntersectionNum();r++)this.addIntersection(e,t,n,r)}},{key:"interfaces_",get:function(){return[fo]}}],[{key:"constructor_",value:function(){this._nodeList=new lo(this),this._pts=null,this._data=null;var e=arguments[0],t=arguments[1];this._pts=e,this._data=t}},{key:"getNodedSubstrings",value:function(){if(arguments.length===1){var e=arguments[0],t=new oe;return i.getNodedSubstrings(e,t),t}if(arguments.length===2)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(n)}}])}(),ze=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return g(i,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){if(arguments[0]instanceof i){var e=arguments[0],t=ce.index(this.p0,this.p1,e.p0),n=ce.index(this.p0,this.p1,e.p1);return t>=0&&n>=0||t<=0&&n<=0?Math.max(t,n):0}if(arguments[0]instanceof O){var r=arguments[0];return ce.index(this.p0,this.p1,r)}}},{key:"toGeometry",value:function(e){return e.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(e){if(!(e instanceof i))return!1;var t=e;return this.p0.equals(t.p0)&&this.p1.equals(t.p1)}},{key:"intersection",value:function(e){var t=new Rt;return t.computeIntersection(this.p0,this.p1,e.p0,e.p1),t.hasIntersection()?t.getIntersection(0):null}},{key:"project",value:function(){if(arguments[0]instanceof O){var e=arguments[0];if(e.equals(this.p0)||e.equals(this.p1))return new O(e);var t=this.projectionFactor(e),n=new O;return n.x=this.p0.x+t*(this.p1.x-this.p0.x),n.y=this.p0.y+t*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof i){var r=arguments[0],s=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(s>=1&&o>=1||s<=0&&o<=0)return null;var c=this.project(r.p0);s<0&&(c=this.p0),s>1&&(c=this.p1);var m=this.project(r.p1);return o<0&&(m=this.p0),o>1&&(m=this.p1),new i(c,m)}}},{key:"normalize",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(e){return e===0?this.p0:this.p1}},{key:"distancePerpendicular",value:function(e){return rt.pointToLinePerpendicular(e,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return i.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(e){if(e.equals(this.p0))return 0;if(e.equals(this.p1))return 1;var t=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=t*t+n*n;return r<=0?F.NaN:((e.x-this.p0.x)*t+(e.y-this.p0.y)*n)/r}},{key:"closestPoints",value:function(e){var t=this.intersection(e);if(t!==null)return[t,t];var n=new Array(2).fill(null),r=F.MAX_VALUE,s=null,o=this.closestPoint(e.p0);r=o.distance(e.p0),n[0]=o,n[1]=e.p0;var c=this.closestPoint(e.p1);(s=c.distance(e.p1))<r&&(r=s,n[0]=c,n[1]=e.p1);var m=e.closestPoint(this.p0);(s=m.distance(this.p0))<r&&(r=s,n[0]=this.p0,n[1]=m);var v=e.closestPoint(this.p1);return(s=v.distance(this.p1))<r&&(r=s,n[0]=this.p1,n[1]=v),n}},{key:"closestPoint",value:function(e){var t=this.projectionFactor(e);return t>0&&t<1?this.project(e):this.p0.distance(e)<this.p1.distance(e)?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(e){var t=e,n=this.p0.compareTo(t.p0);return n!==0?n:this.p1.compareTo(t.p1)}},{key:"reverse",value:function(){var e=this.p0;this.p0=this.p1,this.p1=e}},{key:"equalsTopo",value:function(e){return this.p0.equals(e.p0)&&this.p1.equals(e.p1)||this.p0.equals(e.p1)&&this.p1.equals(e.p0)}},{key:"lineIntersection",value:function(e){return wi.intersection(this.p0,this.p1,e.p0,e.p1)}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(e,t){var n=this.p0.x+e*(this.p1.x-this.p0.x),r=this.p0.y+e*(this.p1.y-this.p0.y),s=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,c=Math.sqrt(s*s+o*o),m=0,v=0;if(t!==0){if(c<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");m=t*s/c,v=t*o/c}return new O(n-v,r+m)}},{key:"setCoordinates",value:function(){if(arguments.length===1){var e=arguments[0];this.setCoordinates(e.p0,e.p1)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this.p0.x=t.x,this.p0.y=t.y,this.p1.x=n.x,this.p1.y=n.y}}},{key:"segmentFraction",value:function(e){var t=this.projectionFactor(e);return t<0?t=0:(t>1||F.isNaN(t))&&(t=1),t}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"reflect",value:function(e){var t=this.p1.getY()-this.p0.getY(),n=this.p0.getX()-this.p1.getX(),r=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),s=t*t+n*n,o=t*t-n*n,c=e.getX(),m=e.getY();return new O((-o*c-2*t*n*m-2*t*r)/s,(o*m-2*t*n*c-2*n*r)/s)}},{key:"distance",value:function(){if(arguments[0]instanceof i){var e=arguments[0];return rt.segmentToSegment(this.p0,this.p1,e.p0,e.p1)}if(arguments[0]instanceof O){var t=arguments[0];return rt.pointToSegment(t,this.p0,this.p1)}}},{key:"pointAlong",value:function(e){var t=new O;return t.x=this.p0.x+e*(this.p1.x-this.p0.x),t.y=this.p0.y+e*(this.p1.y-this.p0.y),t}},{key:"hashCode",value:function(){var e=F.doubleToLongBits(this.p0.x);e^=31*F.doubleToLongBits(this.p0.y);var t=Math.trunc(e)^Math.trunc(e>>32),n=F.doubleToLongBits(this.p1.x);return n^=31*F.doubleToLongBits(this.p1.y),t^(Math.trunc(n)^Math.trunc(n>>32))}},{key:"interfaces_",get:function(){return[C,P]}}],[{key:"constructor_",value:function(){if(this.p0=null,this.p1=null,arguments.length===0)i.constructor_.call(this,new O,new O);else if(arguments.length===1){var e=arguments[0];i.constructor_.call(this,e.p0,e.p1)}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this.p0=t,this.p1=n}else if(arguments.length===4){var r=arguments[0],s=arguments[1],o=arguments[2],c=arguments[3];i.constructor_.call(this,new O(r,s),new O(o,c))}}},{key:"midPoint",value:function(e,t){return new O((e.x+t.x)/2,(e.y+t.y)/2)}}])}(),go=function(){return g(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"overlap",value:function(){if(arguments.length!==2){if(arguments.length===4){var i=arguments[1],e=arguments[2],t=arguments[3];arguments[0].getLineSegment(i,this._overlapSeg1),e.getLineSegment(t,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}}],[{key:"constructor_",value:function(){this._overlapSeg1=new ze,this._overlapSeg2=new ze}}])}(),Yr=function(){return g(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"getLineSegment",value:function(i,e){e.p0=this._pts[i],e.p1=this._pts[i+1]}},{key:"computeSelect",value:function(i,e,t,n){var r=this._pts[e],s=this._pts[t];if(t-e==1)return n.select(this,e),null;if(!i.intersects(r,s))return null;var o=Math.trunc((e+t)/2);e<o&&this.computeSelect(i,e,o,n),o<t&&this.computeSelect(i,o,t,n)}},{key:"getCoordinates",value:function(){for(var i=new Array(this._end-this._start+1).fill(null),e=0,t=this._start;t<=this._end;t++)i[e++]=this._pts[t];return i}},{key:"computeOverlaps",value:function(){if(arguments.length===2){var i=arguments[0],e=arguments[1];this.computeOverlaps(this._start,this._end,i,i._start,i._end,e)}else if(arguments.length===6){var t=arguments[0],n=arguments[1],r=arguments[2],s=arguments[3],o=arguments[4],c=arguments[5];if(n-t==1&&o-s==1)return c.overlap(this,t,r,s),null;if(!this.overlaps(t,n,r,s,o))return null;var m=Math.trunc((t+n)/2),v=Math.trunc((s+o)/2);t<m&&(s<v&&this.computeOverlaps(t,m,r,s,v,c),v<o&&this.computeOverlaps(t,m,r,v,o,c)),m<n&&(s<v&&this.computeOverlaps(m,n,r,s,v,c),v<o&&this.computeOverlaps(m,n,r,v,o,c))}}},{key:"setId",value:function(i){this._id=i}},{key:"select",value:function(i,e){this.computeSelect(i,this._start,this._end,e)}},{key:"getEnvelope",value:function(){if(this._env===null){var i=this._pts[this._start],e=this._pts[this._end];this._env=new de(i,e)}return this._env}},{key:"overlaps",value:function(i,e,t,n,r){return de.intersects(this._pts[i],this._pts[e],t._pts[n],t._pts[r])}},{key:"getEndIndex",value:function(){return this._end}},{key:"getStartIndex",value:function(){return this._start}},{key:"getContext",value:function(){return this._context}},{key:"getId",value:function(){return this._id}}],[{key:"constructor_",value:function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var i=arguments[0],e=arguments[1],t=arguments[2],n=arguments[3];this._pts=i,this._start=e,this._end=t,this._context=n}}])}(),mo=function(){function i(){l(this,i)}return g(i,null,[{key:"findChainEnd",value:function(e,t){for(var n=t;n<e.length-1&&e[n].equals2D(e[n+1]);)n++;if(n>=e.length-1)return e.length-1;for(var r=Fe.quadrant(e[n],e[n+1]),s=t+1;s<e.length&&!(!e[s-1].equals2D(e[s])&&Fe.quadrant(e[s-1],e[s])!==r);)s++;return s-1}},{key:"getChains",value:function(){if(arguments.length===1){var e=arguments[0];return i.getChains(e,null)}if(arguments.length===2){var t=arguments[0],n=arguments[1],r=new oe,s=0;do{var o=i.findChainEnd(t,s),c=new Yr(t,s,o,n);r.add(c),s=o}while(s<t.length-1);return r}}}])}(),qi=function(){return g(function i(){l(this,i)},[{key:"computeNodes",value:function(i){}},{key:"getNodedSubstrings",value:function(){}}])}(),zr=function(){return g(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"setSegmentIntersector",value:function(i){this._segInt=i}},{key:"interfaces_",get:function(){return[qi]}}],[{key:"constructor_",value:function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var i=arguments[0];this.setSegmentIntersector(i)}}}}])}(),Bi=function(i){function e(){var t;return l(this,e),t=h(this,e),e.constructor_.apply(t,arguments),t}return _(e,i),g(e,[{key:"getMonotoneChains",value:function(){return this._monoChains}},{key:"getNodedSubstrings",value:function(){return Mt.getNodedSubstrings(this._nodedSegStrings)}},{key:"getIndex",value:function(){return this._index}},{key:"add",value:function(t){for(var n=mo.getChains(t.getCoordinates(),t).iterator();n.hasNext();){var r=n.next();r.setId(this._idCounter++),this._index.insert(r.getEnvelope(),r),this._monoChains.add(r)}}},{key:"computeNodes",value:function(t){this._nodedSegStrings=t;for(var n=t.iterator();n.hasNext();)this.add(n.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var t=new Xr(this._segInt),n=this._monoChains.iterator();n.hasNext();)for(var r=n.next(),s=this._index.query(r.getEnvelope()).iterator();s.hasNext();){var o=s.next();if(o.getId()>r.getId()&&(r.computeOverlaps(o,t),this._nOverlaps++),this._segInt.isDone())return null}}}],[{key:"constructor_",value:function(){if(this._monoChains=new oe,this._index=new at,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,arguments.length!==0){if(arguments.length===1){var t=arguments[0];zr.constructor_.call(this,t)}}}}])}(zr),Xr=function(i){function e(){var t;return l(this,e),t=h(this,e),e.constructor_.apply(t,arguments),t}return _(e,i),g(e,[{key:"overlap",value:function(){if(arguments.length!==4)return R(e,"overlap",this,1).apply(this,arguments);var t=arguments[1],n=arguments[2],r=arguments[3],s=arguments[0].getContext(),o=n.getContext();this._si.processIntersections(s,t,o,r)}}],[{key:"constructor_",value:function(){this._si=null;var t=arguments[0];this._si=t}}])}(go);Bi.SegmentOverlapAction=Xr;var et=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return g(i,[{key:"isDeletable",value:function(e,t,n,r){var s=this._inputLine[e],o=this._inputLine[t],c=this._inputLine[n];return!!this.isConcave(s,o,c)&&!!this.isShallow(s,o,c,r)&&this.isShallowSampled(s,o,e,n,r)}},{key:"deleteShallowConcavities",value:function(){for(var e=1,t=this.findNextNonDeletedIndex(e),n=this.findNextNonDeletedIndex(t),r=!1;n<this._inputLine.length;){var s=!1;this.isDeletable(e,t,n,this._distanceTol)&&(this._isDeleted[t]=i.DELETE,s=!0,r=!0),e=s?n:t,t=this.findNextNonDeletedIndex(e),n=this.findNextNonDeletedIndex(t)}return r}},{key:"isShallowConcavity",value:function(e,t,n,r){return ce.index(e,t,n)===this._angleOrientation&&rt.pointToSegment(t,e,n)<r}},{key:"isShallowSampled",value:function(e,t,n,r,s){var o=Math.trunc((r-n)/i.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var c=n;c<r;c+=o)if(!this.isShallow(e,t,this._inputLine[c],s))return!1;return!0}},{key:"isConcave",value:function(e,t,n){var r=ce.index(e,t,n)===this._angleOrientation;return r}},{key:"simplify",value:function(e){this._distanceTol=Math.abs(e),e<0&&(this._angleOrientation=ce.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var t=!1;do t=this.deleteShallowConcavities();while(t);return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(e){for(var t=e+1;t<this._inputLine.length&&this._isDeleted[t]===i.DELETE;)t++;return t}},{key:"isShallow",value:function(e,t,n,r){return rt.pointToSegment(t,e,n)<r}},{key:"collapseLine",value:function(){for(var e=new fn,t=0;t<this._inputLine.length;t++)this._isDeleted[t]!==i.DELETE&&e.add(this._inputLine[t]);return e.toCoordinateArray()}}],[{key:"constructor_",value:function(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=ce.COUNTERCLOCKWISE;var e=arguments[0];this._inputLine=e}},{key:"simplify",value:function(e,t){return new i(e).simplify(t)}}])}();et.INIT=0,et.DELETE=1,et.KEEP=1,et.NUM_PTS_TO_CHECK=10;var Ur=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return g(i,[{key:"getCoordinates",value:function(){return this._ptList.toArray(i.COORDINATE_ARRAY_TYPE)}},{key:"setPrecisionModel",value:function(e){this._precisionModel=e}},{key:"addPt",value:function(e){var t=new O(e);if(this._precisionModel.makePrecise(t),this.isRedundant(t))return null;this._ptList.add(t)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(e,t){if(t)for(var n=0;n<e.length;n++)this.addPt(e[n]);else for(var r=e.length-1;r>=0;r--)this.addPt(e[r])}},{key:"isRedundant",value:function(e){if(this._ptList.size()<1)return!1;var t=this._ptList.get(this._ptList.size()-1);return e.distance(t)<this._minimimVertexDistance}},{key:"toString",value:function(){return new qt().createLineString(this.getCoordinates()).toString()}},{key:"closeRing",value:function(){if(this._ptList.size()<1)return null;var e=new O(this._ptList.get(0)),t=this._ptList.get(this._ptList.size()-1);if(e.equals(t))return null;this._ptList.add(e)}},{key:"setMinimumVertexDistance",value:function(e){this._minimimVertexDistance=e}}],[{key:"constructor_",value:function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new oe}}])}();Ur.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);var Xe=function(){function i(){l(this,i)}return g(i,null,[{key:"toDegrees",value:function(e){return 180*e/Math.PI}},{key:"normalize",value:function(e){for(;e>Math.PI;)e-=i.PI_TIMES_2;for(;e<=-Math.PI;)e+=i.PI_TIMES_2;return e}},{key:"angle",value:function(){if(arguments.length===1){var e=arguments[0];return Math.atan2(e.y,e.x)}if(arguments.length===2){var t=arguments[0],n=arguments[1],r=n.x-t.x,s=n.y-t.y;return Math.atan2(s,r)}}},{key:"isAcute",value:function(e,t,n){var r=e.x-t.x,s=e.y-t.y;return r*(n.x-t.x)+s*(n.y-t.y)>0}},{key:"isObtuse",value:function(e,t,n){var r=e.x-t.x,s=e.y-t.y;return r*(n.x-t.x)+s*(n.y-t.y)<0}},{key:"interiorAngle",value:function(e,t,n){var r=i.angle(t,e),s=i.angle(t,n);return Math.abs(s-r)}},{key:"normalizePositive",value:function(e){if(e<0){for(;e<0;)e+=i.PI_TIMES_2;e>=i.PI_TIMES_2&&(e=0)}else{for(;e>=i.PI_TIMES_2;)e-=i.PI_TIMES_2;e<0&&(e=0)}return e}},{key:"angleBetween",value:function(e,t,n){var r=i.angle(t,e),s=i.angle(t,n);return i.diff(r,s)}},{key:"diff",value:function(e,t){var n=null;return(n=e<t?t-e:e-t)>Math.PI&&(n=2*Math.PI-n),n}},{key:"toRadians",value:function(e){return e*Math.PI/180}},{key:"getTurn",value:function(e,t){var n=Math.sin(t-e);return n>0?i.COUNTERCLOCKWISE:n<0?i.CLOCKWISE:i.NONE}},{key:"angleBetweenOriented",value:function(e,t,n){var r=i.angle(t,e),s=i.angle(t,n)-r;return s<=-Math.PI?s+i.PI_TIMES_2:s>Math.PI?s-i.PI_TIMES_2:s}}])}();Xe.PI_TIMES_2=2*Math.PI,Xe.PI_OVER_2=Math.PI/2,Xe.PI_OVER_4=Math.PI/4,Xe.COUNTERCLOCKWISE=ce.COUNTERCLOCKWISE,Xe.CLOCKWISE=ce.CLOCKWISE,Xe.NONE=ce.COLLINEAR;var vn=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return g(i,[{key:"addNextSegment",value:function(e,t){if(this._s0=this._s1,this._s1=this._s2,this._s2=e,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=ce.index(this._s0,this._s1,this._s2),r=n===ce.CLOCKWISE&&this._side===H.LEFT||n===ce.COUNTERCLOCKWISE&&this._side===H.RIGHT;n===0?this.addCollinear(t):r?this.addOutsideTurn(n,t):this.addInsideTurn(n,t)}},{key:"addLineEndCap",value:function(e,t){var n=new ze(e,t),r=new ze;this.computeOffsetSegment(n,H.LEFT,this._distance,r);var s=new ze;this.computeOffsetSegment(n,H.RIGHT,this._distance,s);var o=t.x-e.x,c=t.y-e.y,m=Math.atan2(c,o);switch(this._bufParams.getEndCapStyle()){case N.CAP_ROUND:this._segList.addPt(r.p1),this.addDirectedFillet(t,m+Math.PI/2,m-Math.PI/2,ce.CLOCKWISE,this._distance),this._segList.addPt(s.p1);break;case N.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(s.p1);break;case N.CAP_SQUARE:var v=new O;v.x=Math.abs(this._distance)*Math.cos(m),v.y=Math.abs(this._distance)*Math.sin(m);var b=new O(r.p1.x+v.x,r.p1.y+v.y),D=new O(s.p1.x+v.x,s.p1.y+v.y);this._segList.addPt(b),this._segList.addPt(D)}}},{key:"getCoordinates",value:function(){return this._segList.getCoordinates()}},{key:"addMitreJoin",value:function(e,t,n,r){var s=wi.intersection(t.p0,t.p1,n.p0,n.p1);if(s!==null&&(r<=0?1:s.distance(e)/Math.abs(r))<=this._bufParams.getMitreLimit())return this._segList.addPt(s),null;this.addLimitedMitreJoin(t,n,r,this._bufParams.getMitreLimit())}},{key:"addOutsideTurn",value:function(e,t){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*i.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===N.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===N.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(t&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,e,this._distance),this._segList.addPt(this._offset1.p0))}},{key:"createSquare",value:function(e){this._segList.addPt(new O(e.x+this._distance,e.y+this._distance)),this._segList.addPt(new O(e.x+this._distance,e.y-this._distance)),this._segList.addPt(new O(e.x-this._distance,e.y-this._distance)),this._segList.addPt(new O(e.x-this._distance,e.y+this._distance)),this._segList.closeRing()}},{key:"addSegments",value:function(e,t){this._segList.addPts(e,t)}},{key:"addFirstSegment",value:function(){this._segList.addPt(this._offset1.p0)}},{key:"addCornerFillet",value:function(e,t,n,r,s){var o=t.x-e.x,c=t.y-e.y,m=Math.atan2(c,o),v=n.x-e.x,b=n.y-e.y,D=Math.atan2(b,v);r===ce.CLOCKWISE?m<=D&&(m+=2*Math.PI):m>=D&&(m-=2*Math.PI),this._segList.addPt(t),this.addDirectedFillet(e,m,D,r,s),this._segList.addPt(n)}},{key:"addLastSegment",value:function(){this._segList.addPt(this._offset1.p1)}},{key:"initSideSegments",value:function(e,t,n){this._s1=e,this._s2=t,this._side=n,this._seg1.setCoordinates(e,t),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)}},{key:"addLimitedMitreJoin",value:function(e,t,n,r){var s=this._seg0.p1,o=Xe.angle(s,this._seg0.p0),c=Xe.angleBetweenOriented(this._seg0.p0,s,this._seg1.p1)/2,m=Xe.normalize(o+c),v=Xe.normalize(m+Math.PI),b=r*n,D=n-b*Math.abs(Math.sin(c)),X=s.x+b*Math.cos(v),$=s.y+b*Math.sin(v),te=new O(X,$),se=new ze(s,te),_e=se.pointAlongOffset(1,D),ve=se.pointAlongOffset(1,-D);this._side===H.LEFT?(this._segList.addPt(_e),this._segList.addPt(ve)):(this._segList.addPt(ve),this._segList.addPt(_e))}},{key:"addDirectedFillet",value:function(e,t,n,r,s){var o=r===ce.CLOCKWISE?-1:1,c=Math.abs(t-n),m=Math.trunc(c/this._filletAngleQuantum+.5);if(m<1)return null;for(var v=c/m,b=new O,D=0;D<m;D++){var X=t+o*D*v;b.x=e.x+s*Math.cos(X),b.y=e.y+s*Math.sin(X),this._segList.addPt(b)}}},{key:"computeOffsetSegment",value:function(e,t,n,r){var s=t===H.LEFT?1:-1,o=e.p1.x-e.p0.x,c=e.p1.y-e.p0.y,m=Math.sqrt(o*o+c*c),v=s*n*o/m,b=s*n*c/m;r.p0.x=e.p0.x-b,r.p0.y=e.p0.y+v,r.p1.x=e.p1.x-b,r.p1.y=e.p1.y+v}},{key:"addInsideTurn",value:function(e,t){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*i.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new O((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new O((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}},{key:"createCircle",value:function(e){var t=new O(e.x+this._distance,e.y);this._segList.addPt(t),this.addDirectedFillet(e,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}},{key:"addBevelJoin",value:function(e,t){this._segList.addPt(e.p1),this._segList.addPt(t.p0)}},{key:"init",value:function(e){this._distance=e,this._maxCurveSegmentError=e*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Ur,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(e*i.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(e){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===N.JOIN_BEVEL||this._bufParams.getJoinStyle()===N.JOIN_MITRE?(e&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,ce.CLOCKWISE,this._distance))}},{key:"closeRing",value:function(){this._segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this._hasNarrowConcaveAngle}}],[{key:"constructor_",value:function(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new ze,this._seg1=new ze,this._offset0=new ze,this._offset1=new ze,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],t=arguments[1],n=arguments[2];this._precisionModel=e,this._bufParams=t,this._li=new Rt,this._filletAngleQuantum=Math.PI/2/t.getQuadrantSegments(),t.getQuadrantSegments()>=8&&t.getJoinStyle()===N.JOIN_ROUND&&(this._closingSegLengthFactor=i.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)}}])}();vn.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,vn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,vn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,vn.MAX_CLOSING_SEG_LEN_FACTOR=80;var vo=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return g(i,[{key:"getOffsetCurve",value:function(e,t){if(this._distance=t,t===0)return null;var n=t<0,r=Math.abs(t),s=this.getSegGen(r);e.length<=1?this.computePointCurve(e[0],s):this.computeOffsetCurve(e,n,s);var o=s.getCoordinates();return n&&Me.reverse(o),o}},{key:"computeSingleSidedBufferCurve",value:function(e,t,n){var r=this.simplifyTolerance(this._distance);if(t){n.addSegments(e,!0);var s=et.simplify(e,-r),o=s.length-1;n.initSideSegments(s[o],s[o-1],H.LEFT),n.addFirstSegment();for(var c=o-2;c>=0;c--)n.addNextSegment(s[c],!0)}else{n.addSegments(e,!1);var m=et.simplify(e,r),v=m.length-1;n.initSideSegments(m[0],m[1],H.LEFT),n.addFirstSegment();for(var b=2;b<=v;b++)n.addNextSegment(m[b],!0)}n.addLastSegment(),n.closeRing()}},{key:"computeRingBufferCurve",value:function(e,t,n){var r=this.simplifyTolerance(this._distance);t===H.RIGHT&&(r=-r);var s=et.simplify(e,r),o=s.length-1;n.initSideSegments(s[o-1],s[0],t);for(var c=1;c<=o;c++){var m=c!==1;n.addNextSegment(s[c],m)}n.closeRing()}},{key:"computeLineBufferCurve",value:function(e,t){var n=this.simplifyTolerance(this._distance),r=et.simplify(e,n),s=r.length-1;t.initSideSegments(r[0],r[1],H.LEFT);for(var o=2;o<=s;o++)t.addNextSegment(r[o],!0);t.addLastSegment(),t.addLineEndCap(r[s-1],r[s]);var c=et.simplify(e,-n),m=c.length-1;t.initSideSegments(c[m],c[m-1],H.LEFT);for(var v=m-2;v>=0;v--)t.addNextSegment(c[v],!0);t.addLastSegment(),t.addLineEndCap(c[1],c[0]),t.closeRing()}},{key:"computePointCurve",value:function(e,t){switch(this._bufParams.getEndCapStyle()){case N.CAP_ROUND:t.createCircle(e);break;case N.CAP_SQUARE:t.createSquare(e)}}},{key:"getLineCurve",value:function(e,t){if(this._distance=t,this.isLineOffsetEmpty(t))return null;var n=Math.abs(t),r=this.getSegGen(n);if(e.length<=1)this.computePointCurve(e[0],r);else if(this._bufParams.isSingleSided()){var s=t<0;this.computeSingleSidedBufferCurve(e,s,r)}else this.computeLineBufferCurve(e,r);return r.getCoordinates()}},{key:"getBufferParameters",value:function(){return this._bufParams}},{key:"simplifyTolerance",value:function(e){return e*this._bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(e,t,n){if(this._distance=n,e.length<=2)return this.getLineCurve(e,n);if(n===0)return i.copyCoordinates(e);var r=this.getSegGen(n);return this.computeRingBufferCurve(e,t,r),r.getCoordinates()}},{key:"computeOffsetCurve",value:function(e,t,n){var r=this.simplifyTolerance(this._distance);if(t){var s=et.simplify(e,-r),o=s.length-1;n.initSideSegments(s[o],s[o-1],H.LEFT),n.addFirstSegment();for(var c=o-2;c>=0;c--)n.addNextSegment(s[c],!0)}else{var m=et.simplify(e,r),v=m.length-1;n.initSideSegments(m[0],m[1],H.LEFT),n.addFirstSegment();for(var b=2;b<=v;b++)n.addNextSegment(m[b],!0)}n.addLastSegment()}},{key:"isLineOffsetEmpty",value:function(e){return e===0||e<0&&!this._bufParams.isSingleSided()}},{key:"getSegGen",value:function(e){return new vn(this._precisionModel,this._bufParams,e)}}],[{key:"constructor_",value:function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var e=arguments[0],t=arguments[1];this._precisionModel=e,this._bufParams=t}},{key:"copyCoordinates",value:function(e){for(var t=new Array(e.length).fill(null),n=0;n<t.length;n++)t[n]=new O(e[n]);return t}}])}(),Vr=function(){return g(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"findStabbedSegments",value:function(){if(arguments.length===1){for(var i=arguments[0],e=new oe,t=this._subgraphs.iterator();t.hasNext();){var n=t.next(),r=n.getEnvelope();i.y<r.getMinY()||i.y>r.getMaxY()||this.findStabbedSegments(i,n.getDirectedEdges(),e)}return e}if(arguments.length===3){if(he(arguments[2],ct)&&arguments[0]instanceof O&&arguments[1]instanceof Fi){for(var s=arguments[0],o=arguments[1],c=arguments[2],m=o.getEdge().getCoordinates(),v=0;v<m.length-1;v++)if(this._seg.p0=m[v],this._seg.p1=m[v+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<s.x||this._seg.isHorizontal()||s.y<this._seg.p0.y||s.y>this._seg.p1.y||ce.index(this._seg.p0,this._seg.p1,s)===ce.RIGHT)){var b=o.getDepth(H.LEFT);this._seg.p0.equals(m[v])||(b=o.getDepth(H.RIGHT));var D=new Hr(this._seg,b);c.add(D)}}else if(he(arguments[2],ct)&&arguments[0]instanceof O&&he(arguments[1],ct))for(var X=arguments[0],$=arguments[2],te=arguments[1].iterator();te.hasNext();){var se=te.next();se.isForward()&&this.findStabbedSegments(X,se,$)}}}},{key:"getDepth",value:function(i){var e=this.findStabbedSegments(i);return e.size()===0?0:Gt.min(e)._leftDepth}}],[{key:"constructor_",value:function(){this._subgraphs=null,this._seg=new ze;var i=arguments[0];this._subgraphs=i}}])}(),Hr=function(){return g(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"compareTo",value:function(i){var e=i;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var t=this._upwardSeg.orientationIndex(e._upwardSeg);return t!==0||(t=-1*e._upwardSeg.orientationIndex(this._upwardSeg))!==0?t:this._upwardSeg.compareTo(e._upwardSeg)}},{key:"compareX",value:function(i,e){var t=i.p0.compareTo(e.p0);return t!==0?t:i.p1.compareTo(e.p1)}},{key:"toString",value:function(){return this._upwardSeg.toString()}},{key:"interfaces_",get:function(){return[C]}}],[{key:"constructor_",value:function(){this._upwardSeg=null,this._leftDepth=null;var i=arguments[0],e=arguments[1];this._upwardSeg=new ze(i),this._leftDepth=e}}])}();Vr.DepthSegment=Hr;var Wr=function(i){function e(){var t;return l(this,e),t=h(this,e),e.constructor_.apply(t,arguments),t}return _(e,i),g(e,null,[{key:"constructor_",value:function(){p.constructor_.call(this,"Projective point not representable on the Cartesian plane.")}}])}(p),Gi=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return g(i,[{key:"getY",value:function(){var e=this.y/this.w;if(F.isNaN(e)||F.isInfinite(e))throw new Wr;return e}},{key:"getX",value:function(){var e=this.x/this.w;if(F.isNaN(e)||F.isInfinite(e))throw new Wr;return e}},{key:"getCoordinate",value:function(){var e=new O;return e.x=this.getX(),e.y=this.getY(),e}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],n=arguments[1];this.x=t,this.y=n,this.w=1}else if(arguments[0]instanceof i&&arguments[1]instanceof i){var r=arguments[0],s=arguments[1];this.x=r.y*s.w-s.y*r.w,this.y=s.x*r.w-r.x*s.w,this.w=r.x*s.y-s.x*r.y}else if(arguments[0]instanceof O&&arguments[1]instanceof O){var o=arguments[0],c=arguments[1];this.x=o.y-c.y,this.y=c.x-o.x,this.w=o.x*c.y-c.x*o.y}}else if(arguments.length===3){var m=arguments[0],v=arguments[1],b=arguments[2];this.x=m,this.y=v,this.w=b}else if(arguments.length===4){var D=arguments[0],X=arguments[1],$=arguments[2],te=arguments[3],se=D.y-X.y,_e=X.x-D.x,ve=D.x*X.y-X.x*D.y,Ee=$.y-te.y,Oe=te.x-$.x,Pe=$.x*te.y-te.x*$.y;this.x=_e*Pe-Oe*ve,this.y=Ee*ve-se*Pe,this.w=se*Oe-Ee*_e}}}])}(),yo=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return g(i,[{key:"area",value:function(){return i.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return i.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(e){if(e===null)throw new x("Supplied point is null.");return i.interpolateZ(e,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return i.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return i.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return i.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return i.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return i.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return i.inCentre(this.p0,this.p1,this.p2)}}],[{key:"constructor_",value:function(){this.p0=null,this.p1=null,this.p2=null;var e=arguments[0],t=arguments[1],n=arguments[2];this.p0=e,this.p1=t,this.p2=n}},{key:"area",value:function(e,t,n){return Math.abs(((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2)}},{key:"signedArea",value:function(e,t,n){return((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2}},{key:"det",value:function(e,t,n,r){return e*r-t*n}},{key:"interpolateZ",value:function(e,t,n,r){var s=t.x,o=t.y,c=n.x-s,m=r.x-s,v=n.y-o,b=r.y-o,D=c*b-m*v,X=e.x-s,$=e.y-o,te=(b*X-m*$)/D,se=(-v*X+c*$)/D;return t.getZ()+te*(n.getZ()-t.getZ())+se*(r.getZ()-t.getZ())}},{key:"longestSideLength",value:function(e,t,n){var r=e.distance(t),s=t.distance(n),o=n.distance(e),c=r;return s>c&&(c=s),o>c&&(c=o),c}},{key:"circumcentreDD",value:function(e,t,n){var r=ue.valueOf(e.x).subtract(n.x),s=ue.valueOf(e.y).subtract(n.y),o=ue.valueOf(t.x).subtract(n.x),c=ue.valueOf(t.y).subtract(n.y),m=ue.determinant(r,s,o,c).multiply(2),v=r.sqr().add(s.sqr()),b=o.sqr().add(c.sqr()),D=ue.determinant(s,v,c,b),X=ue.determinant(r,v,o,b),$=ue.valueOf(n.x).subtract(D.divide(m)).doubleValue(),te=ue.valueOf(n.y).add(X.divide(m)).doubleValue();return new O($,te)}},{key:"isAcute",value:function(e,t,n){return!!Xe.isAcute(e,t,n)&&!!Xe.isAcute(t,n,e)&&!!Xe.isAcute(n,e,t)}},{key:"circumcentre",value:function(e,t,n){var r=n.x,s=n.y,o=e.x-r,c=e.y-s,m=t.x-r,v=t.y-s,b=2*i.det(o,c,m,v),D=i.det(c,o*o+c*c,v,m*m+v*v),X=i.det(o,o*o+c*c,m,m*m+v*v);return new O(r-D/b,s+X/b)}},{key:"perpendicularBisector",value:function(e,t){var n=t.x-e.x,r=t.y-e.y,s=new Gi(e.x+n/2,e.y+r/2,1),o=new Gi(e.x-r+n/2,e.y+n+r/2,1);return new Gi(s,o)}},{key:"angleBisector",value:function(e,t,n){var r=t.distance(e),s=r/(r+t.distance(n)),o=n.x-e.x,c=n.y-e.y;return new O(e.x+s*o,e.y+s*c)}},{key:"area3D",value:function(e,t,n){var r=t.x-e.x,s=t.y-e.y,o=t.getZ()-e.getZ(),c=n.x-e.x,m=n.y-e.y,v=n.getZ()-e.getZ(),b=s*v-o*m,D=o*c-r*v,X=r*m-s*c,$=b*b+D*D+X*X,te=Math.sqrt($)/2;return te}},{key:"centroid",value:function(e,t,n){var r=(e.x+t.x+n.x)/3,s=(e.y+t.y+n.y)/3;return new O(r,s)}},{key:"inCentre",value:function(e,t,n){var r=t.distance(n),s=e.distance(n),o=e.distance(t),c=r+s+o,m=(r*e.x+s*t.x+o*n.x)/c,v=(r*e.y+s*t.y+o*n.y)/c;return new O(m,v)}}])}(),po=function(){return g(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"addRingSide",value:function(i,e,t,n,r){if(e===0&&i.length<hn.MINIMUM_VALID_SIZE)return null;var s=n,o=r;i.length>=hn.MINIMUM_VALID_SIZE&&ce.isCCW(i)&&(s=r,o=n,t=H.opposite(t));var c=this._curveBuilder.getRingCurve(i,t,e);this.addCurve(c,s,o)}},{key:"addRingBothSides",value:function(i,e){this.addRingSide(i,e,H.LEFT,k.EXTERIOR,k.INTERIOR),this.addRingSide(i,e,H.RIGHT,k.INTERIOR,k.EXTERIOR)}},{key:"addPoint",value:function(i){if(this._distance<=0)return null;var e=i.getCoordinates(),t=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(t,k.EXTERIOR,k.INTERIOR)}},{key:"addPolygon",value:function(i){var e=this._distance,t=H.LEFT;this._distance<0&&(e=-this._distance,t=H.RIGHT);var n=i.getExteriorRing(),r=Me.removeRepeatedPoints(n.getCoordinates());if(this._distance<0&&this.isErodedCompletely(n,this._distance)||this._distance<=0&&r.length<3)return null;this.addRingSide(r,e,t,k.EXTERIOR,k.INTERIOR);for(var s=0;s<i.getNumInteriorRing();s++){var o=i.getInteriorRingN(s),c=Me.removeRepeatedPoints(o.getCoordinates());this._distance>0&&this.isErodedCompletely(o,-this._distance)||this.addRingSide(c,e,H.opposite(t),k.INTERIOR,k.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(i,e){var t=new yo(i[0],i[1],i[2]),n=t.inCentre();return rt.pointToSegment(n,t.p0,t.p1)<Math.abs(e)}},{key:"addLineString",value:function(i){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;var e=Me.removeRepeatedPoints(i.getCoordinates());if(Me.isRing(e)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(e,this._distance);else{var t=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(t,k.EXTERIOR,k.INTERIOR)}}},{key:"addCurve",value:function(i,e,t){if(i===null||i.length<2)return null;var n=new Mt(i,new He(0,k.BOUNDARY,e,t));this._curveList.add(n)}},{key:"getCurves",value:function(){return this.add(this._inputGeom),this._curveList}},{key:"add",value:function(i){if(i.isEmpty())return null;if(i instanceof Fn)this.addPolygon(i);else if(i instanceof cn)this.addLineString(i);else if(i instanceof Ci)this.addPoint(i);else if(i instanceof Li)this.addCollection(i);else if(i instanceof bi)this.addCollection(i);else if(i instanceof Mi)this.addCollection(i);else{if(!(i instanceof Ye))throw new Ce(i.getGeometryType());this.addCollection(i)}}},{key:"isErodedCompletely",value:function(i,e){var t=i.getCoordinates();if(t.length<4)return e<0;if(t.length===4)return this.isTriangleErodedCompletely(t,e);var n=i.getEnvelopeInternal(),r=Math.min(n.getHeight(),n.getWidth());return e<0&&2*Math.abs(e)>r}},{key:"addCollection",value:function(i){for(var e=0;e<i.getNumGeometries();e++){var t=i.getGeometryN(e);this.add(t)}}}],[{key:"constructor_",value:function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new oe;var i=arguments[0],e=arguments[1],t=arguments[2];this._inputGeom=i,this._distance=e,this._curveBuilder=t}}])}(),_o=function(){return g(function i(){l(this,i)},[{key:"locate",value:function(i){}}])}(),ko=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return g(i,[{key:"next",value:function(){if(this._atStart)return this._atStart=!1,i.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Re;var e=this._parent.getGeometryN(this._index++);return e instanceof Ye?(this._subcollectionIterator=new i(e),this._subcollectionIterator.next()):e}},{key:"remove",value:function(){throw new Ce(this.getClass().getName())}},{key:"hasNext",value:function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}},{key:"interfaces_",get:function(){return[uo]}}],[{key:"constructor_",value:function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var e=arguments[0];this._parent=e,this._atStart=!0,this._index=0,this._max=e.getNumGeometries()}},{key:"isAtomic",value:function(e){return!(e instanceof Ye)}}])}(),xo=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return g(i,[{key:"locate",value:function(e){return i.locate(e,this._geom)}},{key:"interfaces_",get:function(){return[_o]}}],[{key:"constructor_",value:function(){this._geom=null;var e=arguments[0];this._geom=e}},{key:"locatePointInPolygon",value:function(e,t){if(t.isEmpty())return k.EXTERIOR;var n=t.getExteriorRing(),r=i.locatePointInRing(e,n);if(r!==k.INTERIOR)return r;for(var s=0;s<t.getNumInteriorRing();s++){var o=t.getInteriorRingN(s),c=i.locatePointInRing(e,o);if(c===k.BOUNDARY)return k.BOUNDARY;if(c===k.INTERIOR)return k.EXTERIOR}return k.INTERIOR}},{key:"locatePointInRing",value:function(e,t){return t.getEnvelopeInternal().intersects(e)?Ai.locateInRing(e,t.getCoordinates()):k.EXTERIOR}},{key:"containsPointInPolygon",value:function(e,t){return k.EXTERIOR!==i.locatePointInPolygon(e,t)}},{key:"locateInGeometry",value:function(e,t){if(t instanceof Fn)return i.locatePointInPolygon(e,t);if(t instanceof Ye)for(var n=new ko(t);n.hasNext();){var r=n.next();if(r!==t){var s=i.locateInGeometry(e,r);if(s!==k.EXTERIOR)return s}}return k.EXTERIOR}},{key:"isContained",value:function(e,t){return k.EXTERIOR!==i.locate(e,t)}},{key:"locate",value:function(e,t){return t.isEmpty()?k.EXTERIOR:t.getEnvelopeInternal().intersects(e)?i.locateInGeometry(e,t):k.EXTERIOR}}])}(),Eo=function(){return g(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"getNextCW",value:function(i){this.getEdges();var e=this._edgeList.indexOf(i),t=e-1;return e===0&&(t=this._edgeList.size()-1),this._edgeList.get(t)}},{key:"propagateSideLabels",value:function(i){for(var e=k.NONE,t=this.iterator();t.hasNext();){var n=t.next().getLabel();n.isArea(i)&&n.getLocation(i,H.LEFT)!==k.NONE&&(e=n.getLocation(i,H.LEFT))}if(e===k.NONE)return null;for(var r=e,s=this.iterator();s.hasNext();){var o=s.next(),c=o.getLabel();if(c.getLocation(i,H.ON)===k.NONE&&c.setLocation(i,H.ON,r),c.isArea(i)){var m=c.getLocation(i,H.LEFT),v=c.getLocation(i,H.RIGHT);if(v!==k.NONE){if(v!==r)throw new ht("side location conflict",o.getCoordinate());m===k.NONE&&J.shouldNeverReachHere("found single null side (at "+o.getCoordinate()+")"),r=m}else J.isTrue(c.getLocation(i,H.LEFT)===k.NONE,"found single null side"),c.setLocation(i,H.RIGHT,r),c.setLocation(i,H.LEFT,r)}}}},{key:"getCoordinate",value:function(){var i=this.iterator();return i.hasNext()?i.next().getCoordinate():null}},{key:"print",value:function(i){Ue.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(i)}},{key:"isAreaLabelsConsistent",value:function(i){return this.computeEdgeEndLabels(i.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(i){var e=this.getEdges();if(e.size()<=0)return!0;var t=e.size()-1,n=e.get(t).getLabel().getLocation(i,H.LEFT);J.isTrue(n!==k.NONE,"Found unlabelled area edge");for(var r=n,s=this.iterator();s.hasNext();){var o=s.next().getLabel();J.isTrue(o.isArea(i),"Found non-area edge");var c=o.getLocation(i,H.LEFT),m=o.getLocation(i,H.RIGHT);if(c===m||m!==r)return!1;r=c}return!0}},{key:"findIndex",value:function(i){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===i)return e;return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return this._edgeList===null&&(this._edgeList=new oe(this._edgeMap.values())),this._edgeList}},{key:"getLocation",value:function(i,e,t){return this._ptInAreaLocation[i]===k.NONE&&(this._ptInAreaLocation[i]=xo.locate(e,t[i].getGeometry())),this._ptInAreaLocation[i]}},{key:"toString",value:function(){var i=new _t;i.append("EdgeEndStar:   "+this.getCoordinate()),i.append(`
`);for(var e=this.iterator();e.hasNext();){var t=e.next();i.append(t),i.append(`
`)}return i.toString()}},{key:"computeEdgeEndLabels",value:function(i){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(i)}},{key:"computeLabelling",value:function(i){this.computeEdgeEndLabels(i[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],t=this.iterator();t.hasNext();)for(var n=t.next().getLabel(),r=0;r<2;r++)n.isLine(r)&&n.getLocation(r)===k.BOUNDARY&&(e[r]=!0);for(var s=this.iterator();s.hasNext();)for(var o=s.next(),c=o.getLabel(),m=0;m<2;m++)if(c.isAnyNull(m)){var v=k.NONE;if(e[m])v=k.EXTERIOR;else{var b=o.getCoordinate();v=this.getLocation(m,b,i)}c.setAllLocationsIfNull(m,v)}}},{key:"getDegree",value:function(){return this._edgeMap.size()}},{key:"insertEdgeEnd",value:function(i,e){this._edgeMap.put(i,e),this._edgeList=null}}],[{key:"constructor_",value:function(){this._edgeMap=new mn,this._edgeList=null,this._ptInAreaLocation=[k.NONE,k.NONE]}}])}(),Io=function(i){function e(){var t;return l(this,e),t=h(this,e),e.constructor_.apply(t,arguments),t}return _(e,i),g(e,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var t=null,n=null,r=this._SCANNING_FOR_INCOMING,s=0;s<this._resultAreaEdgeList.size();s++){var o=this._resultAreaEdgeList.get(s),c=o.getSym();if(o.getLabel().isArea())switch(t===null&&o.isInResult()&&(t=o),r){case this._SCANNING_FOR_INCOMING:if(!c.isInResult())continue;n=c,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!o.isInResult())continue;n.setNext(o),r=this._SCANNING_FOR_INCOMING}}if(r===this._LINKING_TO_OUTGOING){if(t===null)throw new ht("no outgoing dirEdge found",this.getCoordinate());J.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),n.setNext(t)}}},{key:"insert",value:function(t){var n=t;this.insertEdgeEnd(n,n)}},{key:"getRightmostEdge",value:function(){var t=this.getEdges(),n=t.size();if(n<1)return null;var r=t.get(0);if(n===1)return r;var s=t.get(n-1),o=r.getQuadrant(),c=s.getQuadrant();return Fe.isNorthern(o)&&Fe.isNorthern(c)?r:Fe.isNorthern(o)||Fe.isNorthern(c)?r.getDy()!==0?r:s.getDy()!==0?s:(J.shouldNeverReachHere("found two horizontal edges incident on node"),null):s}},{key:"print",value:function(t){Ue.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var n=this.iterator();n.hasNext();){var r=n.next();t.print("out "),r.print(t),t.println(),t.print("in "),r.getSym().print(t),t.println()}}},{key:"getResultAreaEdges",value:function(){if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new oe;for(var t=this.iterator();t.hasNext();){var n=t.next();(n.isInResult()||n.getSym().isInResult())&&this._resultAreaEdgeList.add(n)}return this._resultAreaEdgeList}},{key:"updateLabelling",value:function(t){for(var n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.setAllLocationsIfNull(0,t.getLocation(0)),r.setAllLocationsIfNull(1,t.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var t=null,n=null,r=this._edgeList.size()-1;r>=0;r--){var s=this._edgeList.get(r),o=s.getSym();n===null&&(n=o),t!==null&&o.setNext(t),t=s}n.setNext(t)}},{key:"computeDepths",value:function(){if(arguments.length===1){var t=arguments[0],n=this.findIndex(t),r=t.getDepth(H.LEFT),s=t.getDepth(H.RIGHT),o=this.computeDepths(n+1,this._edgeList.size(),r);if(this.computeDepths(0,n,o)!==s)throw new ht("depth mismatch at "+t.getCoordinate())}else if(arguments.length===3){for(var c=arguments[1],m=arguments[2],v=arguments[0];v<c;v++){var b=this._edgeList.get(v);b.setEdgeDepths(H.RIGHT,m),m=b.getDepth(H.LEFT)}return m}}},{key:"mergeSymLabels",value:function(){for(var t=this.iterator();t.hasNext();){var n=t.next();n.getLabel().merge(n.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(t){for(var n=null,r=null,s=this._SCANNING_FOR_INCOMING,o=this._resultAreaEdgeList.size()-1;o>=0;o--){var c=this._resultAreaEdgeList.get(o),m=c.getSym();switch(n===null&&c.getEdgeRing()===t&&(n=c),s){case this._SCANNING_FOR_INCOMING:if(m.getEdgeRing()!==t)continue;r=m,s=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(c.getEdgeRing()!==t)continue;r.setNextMin(c),s=this._SCANNING_FOR_INCOMING}}s===this._LINKING_TO_OUTGOING&&(J.isTrue(n!==null,"found null for first outgoing dirEdge"),J.isTrue(n.getEdgeRing()===t,"unable to link last incoming dirEdge"),r.setNextMin(n))}},{key:"getOutgoingDegree",value:function(){if(arguments.length===0){for(var t=0,n=this.iterator();n.hasNext();)n.next().isInResult()&&t++;return t}if(arguments.length===1){for(var r=arguments[0],s=0,o=this.iterator();o.hasNext();)o.next().getEdgeRing()===r&&s++;return s}}},{key:"getLabel",value:function(){return this._label}},{key:"findCoveredLineEdges",value:function(){for(var t=k.NONE,n=this.iterator();n.hasNext();){var r=n.next(),s=r.getSym();if(!r.isLineEdge()){if(r.isInResult()){t=k.INTERIOR;break}if(s.isInResult()){t=k.EXTERIOR;break}}}if(t===k.NONE)return null;for(var o=t,c=this.iterator();c.hasNext();){var m=c.next(),v=m.getSym();m.isLineEdge()?m.getEdge().setCovered(o===k.INTERIOR):(m.isInResult()&&(o=k.EXTERIOR),v.isInResult()&&(o=k.INTERIOR))}}},{key:"computeLabelling",value:function(t){R(e,"computeLabelling",this,1).call(this,t),this._label=new He(k.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),s=0;s<2;s++){var o=r.getLocation(s);o!==k.INTERIOR&&o!==k.BOUNDARY||this._label.setLocation(s,k.INTERIOR)}}}],[{key:"constructor_",value:function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}}])}(Eo),No=function(i){function e(){return l(this,e),h(this,e)}return _(e,i),g(e,[{key:"createNode",value:function(t){return new zn(t,new Io)}}])}(Dr),Zr=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return g(i,[{key:"compareTo",value:function(e){var t=e;return i.compareOriented(this._pts,this._orientation,t._pts,t._orientation)}},{key:"interfaces_",get:function(){return[C]}}],[{key:"constructor_",value:function(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=i.orientation(e)}},{key:"orientation",value:function(e){return Me.increasingDirection(e)===1}},{key:"compareOriented",value:function(e,t,n,r){for(var s=t?1:-1,o=r?1:-1,c=t?e.length:-1,m=r?n.length:-1,v=t?0:e.length-1,b=r?0:n.length-1;;){var D=e[v].compareTo(n[b]);if(D!==0)return D;var X=(v+=s)===c,$=(b+=o)===m;if(X&&!$)return-1;if(!X&&$)return 1;if(X&&$)return 0}}}])}(),So=function(){return g(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"print",value:function(i){i.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var t=this._edges.get(e);e>0&&i.print(","),i.print("(");for(var n=t.getCoordinates(),r=0;r<n.length;r++)r>0&&i.print(","),i.print(n[r].x+" "+n[r].y);i.println(")")}i.print(")  ")}},{key:"addAll",value:function(i){for(var e=i.iterator();e.hasNext();)this.add(e.next())}},{key:"findEdgeIndex",value:function(i){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(i))return e;return-1}},{key:"iterator",value:function(){return this._edges.iterator()}},{key:"getEdges",value:function(){return this._edges}},{key:"get",value:function(i){return this._edges.get(i)}},{key:"findEqualEdge",value:function(i){var e=new Zr(i.getCoordinates());return this._ocaMap.get(e)}},{key:"add",value:function(i){this._edges.add(i);var e=new Zr(i.getCoordinates());this._ocaMap.put(e,i)}}],[{key:"constructor_",value:function(){this._edges=new oe,this._ocaMap=new mn}}])}(),$r=function(){return g(function i(){l(this,i)},[{key:"processIntersections",value:function(i,e,t,n){}},{key:"isDone",value:function(){}}])}(),wo=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return g(i,[{key:"isTrivialIntersection",value:function(e,t,n,r){if(e===n&&this._li.getIntersectionNum()===1){if(i.isAdjacentSegments(t,r))return!0;if(e.isClosed()){var s=e.size()-1;if(t===0&&r===s||r===0&&t===s)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this._properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return this._hasProperInterior}},{key:"getLineIntersector",value:function(){return this._li}},{key:"hasProperIntersection",value:function(){return this._hasProper}},{key:"processIntersections",value:function(e,t,n,r){if(e===n&&t===r)return null;this.numTests++;var s=e.getCoordinates()[t],o=e.getCoordinates()[t+1],c=n.getCoordinates()[r],m=n.getCoordinates()[r+1];this._li.computeIntersection(s,o,c,m),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(e,t,n,r)||(this._hasIntersection=!0,e.addIntersections(this._li,t,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this._hasInterior}},{key:"interfaces_",get:function(){return[$r]}}],[{key:"constructor_",value:function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var e=arguments[0];this._li=e}},{key:"isAdjacentSegments",value:function(e,t){return Math.abs(e-t)===1}}])}(),Co=function(){return g(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(i){i.print(this.coord),i.print(" seg # = "+this.segmentIndex),i.println(" dist = "+this.dist)}},{key:"compareTo",value:function(i){var e=i;return this.compare(e.segmentIndex,e.dist)}},{key:"isEndPoint",value:function(i){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===i}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(i,e){return this.segmentIndex<i?-1:this.segmentIndex>i?1:this.dist<e?-1:this.dist>e?1:0}},{key:"interfaces_",get:function(){return[C]}}],[{key:"constructor_",value:function(){this.coord=null,this.segmentIndex=null,this.dist=null;var i=arguments[0],e=arguments[1],t=arguments[2];this.coord=new O(i),this.segmentIndex=e,this.dist=t}}])}(),Lo=function(){return g(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"print",value:function(i){i.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(i)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(i){this.addEndpoints();for(var e=this.iterator(),t=e.next();e.hasNext();){var n=e.next(),r=this.createSplitEdge(t,n);i.add(r),t=n}}},{key:"addEndpoints",value:function(){var i=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[i],i,0)}},{key:"createSplitEdge",value:function(i,e){var t=e.segmentIndex-i.segmentIndex+2,n=this.edge.pts[e.segmentIndex],r=e.dist>0||!e.coord.equals2D(n);r||t--;var s=new Array(t).fill(null),o=0;s[o++]=new O(i.coord);for(var c=i.segmentIndex+1;c<=e.segmentIndex;c++)s[o++]=this.edge.pts[c];return r&&(s[o]=e.coord),new Jr(s,new He(this.edge._label))}},{key:"add",value:function(i,e,t){var n=new Co(i,e,t),r=this._nodeMap.get(n);return r!==null?r:(this._nodeMap.put(n,n),n)}},{key:"isIntersection",value:function(i){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(i))return!0;return!1}}],[{key:"constructor_",value:function(){this._nodeMap=new mn,this.edge=null;var i=arguments[0];this.edge=i}}])}(),To=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return g(i,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){return(i.isTrue(this._matrix[k.INTERIOR][k.INTERIOR])||i.isTrue(this._matrix[k.INTERIOR][k.BOUNDARY])||i.isTrue(this._matrix[k.BOUNDARY][k.INTERIOR])||i.isTrue(this._matrix[k.BOUNDARY][k.BOUNDARY]))&&this._matrix[k.EXTERIOR][k.INTERIOR]===W.FALSE&&this._matrix[k.EXTERIOR][k.BOUNDARY]===W.FALSE}},{key:"isCoveredBy",value:function(){return(i.isTrue(this._matrix[k.INTERIOR][k.INTERIOR])||i.isTrue(this._matrix[k.INTERIOR][k.BOUNDARY])||i.isTrue(this._matrix[k.BOUNDARY][k.INTERIOR])||i.isTrue(this._matrix[k.BOUNDARY][k.BOUNDARY]))&&this._matrix[k.INTERIOR][k.EXTERIOR]===W.FALSE&&this._matrix[k.BOUNDARY][k.EXTERIOR]===W.FALSE}},{key:"set",value:function(){if(arguments.length===1)for(var e=arguments[0],t=0;t<e.length;t++){var n=Math.trunc(t/3),r=t%3;this._matrix[n][r]=W.toDimensionValue(e.charAt(t))}else if(arguments.length===3){var s=arguments[0],o=arguments[1],c=arguments[2];this._matrix[s][o]=c}}},{key:"isContains",value:function(){return i.isTrue(this._matrix[k.INTERIOR][k.INTERIOR])&&this._matrix[k.EXTERIOR][k.INTERIOR]===W.FALSE&&this._matrix[k.EXTERIOR][k.BOUNDARY]===W.FALSE}},{key:"setAtLeast",value:function(){if(arguments.length===1)for(var e=arguments[0],t=0;t<e.length;t++){var n=Math.trunc(t/3),r=t%3;this.setAtLeast(n,r,W.toDimensionValue(e.charAt(t)))}else if(arguments.length===3){var s=arguments[0],o=arguments[1],c=arguments[2];this._matrix[s][o]<c&&(this._matrix[s][o]=c)}}},{key:"setAtLeastIfValid",value:function(e,t,n){e>=0&&t>=0&&this.setAtLeast(e,t,n)}},{key:"isWithin",value:function(){return i.isTrue(this._matrix[k.INTERIOR][k.INTERIOR])&&this._matrix[k.INTERIOR][k.EXTERIOR]===W.FALSE&&this._matrix[k.BOUNDARY][k.EXTERIOR]===W.FALSE}},{key:"isTouches",value:function(e,t){return e>t?this.isTouches(t,e):(e===W.A&&t===W.A||e===W.L&&t===W.L||e===W.L&&t===W.A||e===W.P&&t===W.A||e===W.P&&t===W.L)&&this._matrix[k.INTERIOR][k.INTERIOR]===W.FALSE&&(i.isTrue(this._matrix[k.INTERIOR][k.BOUNDARY])||i.isTrue(this._matrix[k.BOUNDARY][k.INTERIOR])||i.isTrue(this._matrix[k.BOUNDARY][k.BOUNDARY]))}},{key:"isOverlaps",value:function(e,t){return e===W.P&&t===W.P||e===W.A&&t===W.A?i.isTrue(this._matrix[k.INTERIOR][k.INTERIOR])&&i.isTrue(this._matrix[k.INTERIOR][k.EXTERIOR])&&i.isTrue(this._matrix[k.EXTERIOR][k.INTERIOR]):e===W.L&&t===W.L&&this._matrix[k.INTERIOR][k.INTERIOR]===1&&i.isTrue(this._matrix[k.INTERIOR][k.EXTERIOR])&&i.isTrue(this._matrix[k.EXTERIOR][k.INTERIOR])}},{key:"isEquals",value:function(e,t){return e===t&&i.isTrue(this._matrix[k.INTERIOR][k.INTERIOR])&&this._matrix[k.INTERIOR][k.EXTERIOR]===W.FALSE&&this._matrix[k.BOUNDARY][k.EXTERIOR]===W.FALSE&&this._matrix[k.EXTERIOR][k.INTERIOR]===W.FALSE&&this._matrix[k.EXTERIOR][k.BOUNDARY]===W.FALSE}},{key:"toString",value:function(){for(var e=new Bn("123456789"),t=0;t<3;t++)for(var n=0;n<3;n++)e.setCharAt(3*t+n,W.toDimensionSymbol(this._matrix[t][n]));return e.toString()}},{key:"setAll",value:function(e){for(var t=0;t<3;t++)for(var n=0;n<3;n++)this._matrix[t][n]=e}},{key:"get",value:function(e,t){return this._matrix[e][t]}},{key:"transpose",value:function(){var e=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=e,e=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=e,e=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=e,this}},{key:"matches",value:function(e){if(e.length!==9)throw new x("Should be length 9: "+e);for(var t=0;t<3;t++)for(var n=0;n<3;n++)if(!i.matches(this._matrix[t][n],e.charAt(3*t+n)))return!1;return!0}},{key:"add",value:function(e){for(var t=0;t<3;t++)for(var n=0;n<3;n++)this.setAtLeast(t,n,e.get(t,n))}},{key:"isDisjoint",value:function(){return this._matrix[k.INTERIOR][k.INTERIOR]===W.FALSE&&this._matrix[k.INTERIOR][k.BOUNDARY]===W.FALSE&&this._matrix[k.BOUNDARY][k.INTERIOR]===W.FALSE&&this._matrix[k.BOUNDARY][k.BOUNDARY]===W.FALSE}},{key:"isCrosses",value:function(e,t){return e===W.P&&t===W.L||e===W.P&&t===W.A||e===W.L&&t===W.A?i.isTrue(this._matrix[k.INTERIOR][k.INTERIOR])&&i.isTrue(this._matrix[k.INTERIOR][k.EXTERIOR]):e===W.L&&t===W.P||e===W.A&&t===W.P||e===W.A&&t===W.L?i.isTrue(this._matrix[k.INTERIOR][k.INTERIOR])&&i.isTrue(this._matrix[k.EXTERIOR][k.INTERIOR]):e===W.L&&t===W.L&&this._matrix[k.INTERIOR][k.INTERIOR]===0}},{key:"interfaces_",get:function(){return[M]}}],[{key:"constructor_",value:function(){if(this._matrix=null,arguments.length===0)this._matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(W.FALSE);else if(arguments.length===1){if(typeof arguments[0]=="string"){var e=arguments[0];i.constructor_.call(this),this.set(e)}else if(arguments[0]instanceof i){var t=arguments[0];i.constructor_.call(this),this._matrix[k.INTERIOR][k.INTERIOR]=t._matrix[k.INTERIOR][k.INTERIOR],this._matrix[k.INTERIOR][k.BOUNDARY]=t._matrix[k.INTERIOR][k.BOUNDARY],this._matrix[k.INTERIOR][k.EXTERIOR]=t._matrix[k.INTERIOR][k.EXTERIOR],this._matrix[k.BOUNDARY][k.INTERIOR]=t._matrix[k.BOUNDARY][k.INTERIOR],this._matrix[k.BOUNDARY][k.BOUNDARY]=t._matrix[k.BOUNDARY][k.BOUNDARY],this._matrix[k.BOUNDARY][k.EXTERIOR]=t._matrix[k.BOUNDARY][k.EXTERIOR],this._matrix[k.EXTERIOR][k.INTERIOR]=t._matrix[k.EXTERIOR][k.INTERIOR],this._matrix[k.EXTERIOR][k.BOUNDARY]=t._matrix[k.EXTERIOR][k.BOUNDARY],this._matrix[k.EXTERIOR][k.EXTERIOR]=t._matrix[k.EXTERIOR][k.EXTERIOR]}}}},{key:"matches",value:function(){if(Number.isInteger(arguments[0])&&typeof arguments[1]=="string"){var e=arguments[0],t=arguments[1];return t===W.SYM_DONTCARE||t===W.SYM_TRUE&&(e>=0||e===W.TRUE)||t===W.SYM_FALSE&&e===W.FALSE||t===W.SYM_P&&e===W.P||t===W.SYM_L&&e===W.L||t===W.SYM_A&&e===W.A}if(typeof arguments[0]=="string"&&typeof arguments[1]=="string"){var n=arguments[1];return new i(arguments[0]).matches(n)}}},{key:"isTrue",value:function(e){return e>=0||e===W.TRUE}}])}(),Ro=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return g(i,[{key:"size",value:function(){return this._size}},{key:"addAll",value:function(e){return e===null||e.length===0?null:(this.ensureCapacity(this._size+e.length),Ue.arraycopy(e,0,this._data,this._size,e.length),void(this._size+=e.length))}},{key:"ensureCapacity",value:function(e){if(e<=this._data.length)return null;var t=Math.max(e,2*this._data.length);this._data=Ct.copyOf(this._data,t)}},{key:"toArray",value:function(){var e=new Array(this._size).fill(null);return Ue.arraycopy(this._data,0,e,0,this._size),e}},{key:"add",value:function(e){this.ensureCapacity(this._size+1),this._data[this._size]=e,++this._size}}],[{key:"constructor_",value:function(){if(this._data=null,this._size=0,arguments.length===0)i.constructor_.call(this,10);else if(arguments.length===1){var e=arguments[0];this._data=new Array(e).fill(null)}}}])}(),Mo=function(){function i(){l(this,i)}return g(i,[{key:"getChainStartIndices",value:function(e){var t=0,n=new Ro(Math.trunc(e.length/2));n.add(t);do{var r=this.findChainEnd(e,t);n.add(r),t=r}while(t<e.length-1);return n.toArray()}},{key:"findChainEnd",value:function(e,t){for(var n=Fe.quadrant(e[t],e[t+1]),r=t+1;r<e.length&&Fe.quadrant(e[r-1],e[r])===n;)r++;return r-1}},{key:"OLDgetChainStartIndices",value:function(e){var t=0,n=new oe;n.add(t);do{var r=this.findChainEnd(e,t);n.add(r),t=r}while(t<e.length-1);return i.toIntArray(n)}}],[{key:"toIntArray",value:function(e){for(var t=new Array(e.size()).fill(null),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t}}])}(),bo=function(){return g(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(i){var e=this.pts[this.startIndex[i]].x,t=this.pts[this.startIndex[i+1]].x;return e>t?e:t}},{key:"getMinX",value:function(i){var e=this.pts[this.startIndex[i]].x,t=this.pts[this.startIndex[i+1]].x;return e<t?e:t}},{key:"computeIntersectsForChain",value:function(){if(arguments.length===4){var i=arguments[0],e=arguments[1],t=arguments[2],n=arguments[3];this.computeIntersectsForChain(this.startIndex[i],this.startIndex[i+1],e,e.startIndex[t],e.startIndex[t+1],n)}else if(arguments.length===6){var r=arguments[0],s=arguments[1],o=arguments[2],c=arguments[3],m=arguments[4],v=arguments[5];if(s-r==1&&m-c==1)return v.addIntersections(this.e,r,o.e,c),null;if(!this.overlaps(r,s,o,c,m))return null;var b=Math.trunc((r+s)/2),D=Math.trunc((c+m)/2);r<b&&(c<D&&this.computeIntersectsForChain(r,b,o,c,D,v),D<m&&this.computeIntersectsForChain(r,b,o,D,m,v)),b<s&&(c<D&&this.computeIntersectsForChain(b,s,o,c,D,v),D<m&&this.computeIntersectsForChain(b,s,o,D,m,v))}}},{key:"overlaps",value:function(i,e,t,n,r){return de.intersects(this.pts[i],this.pts[e],t.pts[n],t.pts[r])}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(i,e){for(var t=0;t<this.startIndex.length-1;t++)for(var n=0;n<i.startIndex.length-1;n++)this.computeIntersectsForChain(t,i,n,e)}}],[{key:"constructor_",value:function(){this.e=null,this.pts=null,this.startIndex=null;var i=arguments[0];this.e=i,this.pts=i.getCoordinates();var e=new Mo;this.startIndex=e.getChainStartIndices(this.pts)}}])}(),jr=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return g(i,[{key:"getDepth",value:function(e,t){return this._depth[e][t]}},{key:"setDepth",value:function(e,t,n){this._depth[e][t]=n}},{key:"isNull",value:function(){if(arguments.length===0){for(var e=0;e<2;e++)for(var t=0;t<3;t++)if(this._depth[e][t]!==i.NULL_VALUE)return!1;return!0}if(arguments.length===1){var n=arguments[0];return this._depth[n][1]===i.NULL_VALUE}if(arguments.length===2){var r=arguments[0],s=arguments[1];return this._depth[r][s]===i.NULL_VALUE}}},{key:"normalize",value:function(){for(var e=0;e<2;e++)if(!this.isNull(e)){var t=this._depth[e][1];this._depth[e][2]<t&&(t=this._depth[e][2]),t<0&&(t=0);for(var n=1;n<3;n++){var r=0;this._depth[e][n]>t&&(r=1),this._depth[e][n]=r}}}},{key:"getDelta",value:function(e){return this._depth[e][H.RIGHT]-this._depth[e][H.LEFT]}},{key:"getLocation",value:function(e,t){return this._depth[e][t]<=0?k.EXTERIOR:k.INTERIOR}},{key:"toString",value:function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}},{key:"add",value:function(){if(arguments.length===1)for(var e=arguments[0],t=0;t<2;t++)for(var n=1;n<3;n++){var r=e.getLocation(t,n);r!==k.EXTERIOR&&r!==k.INTERIOR||(this.isNull(t,n)?this._depth[t][n]=i.depthAtLocation(r):this._depth[t][n]+=i.depthAtLocation(r))}else if(arguments.length===3){var s=arguments[0],o=arguments[1];arguments[2]===k.INTERIOR&&this._depth[s][o]++}}}],[{key:"constructor_",value:function(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var e=0;e<2;e++)for(var t=0;t<3;t++)this._depth[e][t]=i.NULL_VALUE}},{key:"depthAtLocation",value:function(e){return e===k.EXTERIOR?0:e===k.INTERIOR?1:i.NULL_VALUE}}])}();jr.NULL_VALUE=-1;var Jr=function(i){function e(){var t;return l(this,e),t=h(this,e),e.constructor_.apply(t,arguments),t}return _(e,i),g(e,[{key:"getDepth",value:function(){return this._depth}},{key:"getCollapsedEdge",value:function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,He.toLineLabel(this._label))}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(t){this._isIsolated=t}},{key:"setName",value:function(t){this._name=t}},{key:"equals",value:function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,s=!0,o=this.pts.length,c=0;c<this.pts.length;c++)if(this.pts[c].equals2D(n.pts[c])||(r=!1),this.pts[c].equals2D(n.pts[--o])||(s=!1),!r&&!s)return!1;return!0}},{key:"getCoordinate",value:function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var t=arguments[0];return this.pts[t]}}},{key:"print",value:function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var n=0;n<this.pts.length;n++)n>0&&t.print(","),t.print(this.pts[n].x+" "+this.pts[n].y);t.print(")  "+this._label+" "+this._depthDelta)}},{key:"computeIM",value:function(t){e.updateIM(this._label,t)}},{key:"isCollapsed",value:function(){return!!this._label.isArea()&&this.pts.length===3&&!!this.pts[0].equals(this.pts[2])}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this._depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(t){t.print("edge "+this._name+": ");for(var n=this.pts.length-1;n>=0;n--)t.print(this.pts[n]+" ");t.println("")}},{key:"getMonotoneChainEdge",value:function(){return this._mce===null&&(this._mce=new bo(this)),this._mce}},{key:"getEnvelope",value:function(){if(this._env===null){this._env=new de;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env}},{key:"addIntersection",value:function(t,n,r,s){var o=new O(t.getIntersection(s)),c=n,m=t.getEdgeDistance(r,s),v=c+1;if(v<this.pts.length){var b=this.pts[v];o.equals2D(b)&&(c=v,m=0)}this.eiList.add(o,c,m)}},{key:"toString",value:function(){var t=new Bn;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var n=0;n<this.pts.length;n++)n>0&&t.append(","),t.append(this.pts[n].x+" "+this.pts[n].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()}},{key:"isPointwiseEqual",value:function(t){if(this.pts.length!==t.pts.length)return!1;for(var n=0;n<this.pts.length;n++)if(!this.pts[n].equals2D(t.pts[n]))return!1;return!0}},{key:"setDepthDelta",value:function(t){this._depthDelta=t}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(t,n,r){for(var s=0;s<t.getIntersectionNum();s++)this.addIntersection(t,n,r,s)}}],[{key:"constructor_",value:function(){if(this.pts=null,this._env=null,this.eiList=new Lo(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new jr,this._depthDelta=0,arguments.length===1){var t=arguments[0];e.constructor_.call(this,t,null)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.pts=n,this._label=r}}},{key:"updateIM",value:function(){if(!(arguments.length===2&&arguments[1]instanceof To&&arguments[0]instanceof He))return R(e,"updateIM",this).apply(this,arguments);var t=arguments[0],n=arguments[1];n.setAtLeastIfValid(t.getLocation(0,H.ON),t.getLocation(1,H.ON),1),t.isArea()&&(n.setAtLeastIfValid(t.getLocation(0,H.LEFT),t.getLocation(1,H.LEFT),2),n.setAtLeastIfValid(t.getLocation(0,H.RIGHT),t.getLocation(1,H.RIGHT),2))}}])}(Mr),Qr=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return g(i,[{key:"setWorkingPrecisionModel",value:function(e){this._workingPrecisionModel=e}},{key:"insertUniqueEdge",value:function(e){var t=this._edgeList.findEqualEdge(e);if(t!==null){var n=t.getLabel(),r=e.getLabel();t.isPointwiseEqual(e)||(r=new He(e.getLabel())).flip(),n.merge(r);var s=i.depthDelta(r),o=t.getDepthDelta()+s;t.setDepthDelta(o)}else this._edgeList.add(e),e.setDepthDelta(i.depthDelta(e.getLabel()))}},{key:"buildSubgraphs",value:function(e,t){for(var n=new oe,r=e.iterator();r.hasNext();){var s=r.next(),o=s.getRightmostCoordinate(),c=new Vr(n).getDepth(o);s.computeDepth(c),s.findResultEdges(),n.add(s),t.add(s.getDirectedEdges(),s.getNodes())}}},{key:"createSubgraphs",value:function(e){for(var t=new oe,n=e.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var s=new Da;s.create(r),t.add(s)}}return Gt.sort(t,Gt.reverseOrder()),t}},{key:"createEmptyResultGeometry",value:function(){return this._geomFact.createPolygon()}},{key:"getNoder",value:function(e){if(this._workingNoder!==null)return this._workingNoder;var t=new Bi,n=new Rt;return n.setPrecisionModel(e),t.setSegmentIntersector(new wo(n)),t}},{key:"buffer",value:function(e,t){var n=this._workingPrecisionModel;n===null&&(n=e.getPrecisionModel()),this._geomFact=e.getFactory();var r=new vo(n,this._bufParams),s=new po(e,t,r).getCurves();if(s.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(s,n),this._graph=new Fr(new No),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),c=new no(this._geomFact);this.buildSubgraphs(o,c);var m=c.getPolygons();return m.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(m)}},{key:"computeNodedEdges",value:function(e,t){var n=this.getNoder(t);n.computeNodes(e);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var s=r.next(),o=s.getCoordinates();if(o.length!==2||!o[0].equals2D(o[1])){var c=s.getData(),m=new Jr(s.getCoordinates(),new He(c));this.insertUniqueEdge(m)}}}},{key:"setNoder",value:function(e){this._workingNoder=e}}],[{key:"constructor_",value:function(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new So;var e=arguments[0];this._bufParams=e}},{key:"depthDelta",value:function(e){var t=e.getLocation(0,H.LEFT),n=e.getLocation(0,H.RIGHT);return t===k.INTERIOR&&n===k.EXTERIOR?1:t===k.EXTERIOR&&n===k.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(e){for(var t=new qt,n=new oe;e.hasNext();){var r=e.next(),s=t.createLineString(r.getCoordinates());n.add(s)}return t.buildGeometry(n)}}])}(),Oo=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return g(i,[{key:"rescale",value:function(){if(he(arguments[0],Ne))for(var e=arguments[0].iterator();e.hasNext();){var t=e.next();this.rescale(t.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;n.length===2&&n[0].equals2D(n[1])&&Ue.out.println(n)}}},{key:"scale",value:function(){if(he(arguments[0],Ne)){for(var e=arguments[0],t=new oe(e.size()),n=e.iterator();n.hasNext();){var r=n.next();t.add(new Mt(this.scale(r.getCoordinates()),r.getData()))}return t}if(arguments[0]instanceof Array){for(var s=arguments[0],o=new Array(s.length).fill(null),c=0;c<s.length;c++)o[c]=new O(Math.round((s[c].x-this._offsetX)*this._scaleFactor),Math.round((s[c].y-this._offsetY)*this._scaleFactor),s[c].getZ());return Me.removeRepeatedPoints(o)}}},{key:"isIntegerPrecision",value:function(){return this._scaleFactor===1}},{key:"getNodedSubstrings",value:function(){var e=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(e),e}},{key:"computeNodes",value:function(e){var t=e;this._isScaled&&(t=this.scale(e)),this._noder.computeNodes(t)}},{key:"interfaces_",get:function(){return[qi]}}],[{key:"constructor_",value:function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var e=arguments[0],t=arguments[1];i.constructor_.call(this,e,t,0,0)}else if(arguments.length===4){var n=arguments[0],r=arguments[1];this._noder=n,this._scaleFactor=r,this._isScaled=!this.isIntegerPrecision()}}}])}(),Kr=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return g(i,[{key:"checkEndPtVertexIntersections",value:function(){if(arguments.length===0)for(var e=this._segStrings.iterator();e.hasNext();){var t=e.next().getCoordinates();this.checkEndPtVertexIntersections(t[0],this._segStrings),this.checkEndPtVertexIntersections(t[t.length-1],this._segStrings)}else if(arguments.length===2){for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var s=r.next().getCoordinates(),o=1;o<s.length-1;o++)if(s[o].equals(n))throw new Q("found endpt/interior pt intersection at index "+o+" :pt "+n)}}},{key:"checkInteriorIntersections",value:function(){if(arguments.length===0)for(var e=this._segStrings.iterator();e.hasNext();)for(var t=e.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(t,r)}else if(arguments.length===2)for(var s=arguments[0],o=arguments[1],c=s.getCoordinates(),m=o.getCoordinates(),v=0;v<c.length-1;v++)for(var b=0;b<m.length-1;b++)this.checkInteriorIntersections(s,v,o,b);else if(arguments.length===4){var D=arguments[0],X=arguments[1],$=arguments[2],te=arguments[3];if(D===$&&X===te)return null;var se=D.getCoordinates()[X],_e=D.getCoordinates()[X+1],ve=$.getCoordinates()[te],Ee=$.getCoordinates()[te+1];if(this._li.computeIntersection(se,_e,ve,Ee),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,se,_e)||this.hasInteriorIntersection(this._li,ve,Ee)))throw new Q("found non-noded intersection at "+se+"-"+_e+" and "+ve+"-"+Ee)}}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){if(arguments.length===0)for(var e=this._segStrings.iterator();e.hasNext();){var t=e.next();this.checkCollapses(t)}else if(arguments.length===1)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])}},{key:"hasInteriorIntersection",value:function(e,t,n){for(var r=0;r<e.getIntersectionNum();r++){var s=e.getIntersection(r);if(!s.equals(t)&&!s.equals(n))return!0}return!1}},{key:"checkCollapse",value:function(e,t,n){if(e.equals(n))throw new Q("found non-noded collapse at "+i.fact.createLineString([e,t,n]))}}],[{key:"constructor_",value:function(){this._li=new Rt,this._segStrings=null;var e=arguments[0];this._segStrings=e}}])}();Kr.fact=new qt;var Yi=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return g(i,[{key:"intersectsScaled",value:function(e,t){var n=Math.min(e.x,t.x),r=Math.max(e.x,t.x),s=Math.min(e.y,t.y),o=Math.max(e.y,t.y),c=this._maxx<n||this._minx>r||this._maxy<s||this._miny>o;if(c)return!1;var m=this.intersectsToleranceSquare(e,t);return J.isTrue(!(c&&m),"Found bad envelope test"),m}},{key:"initCorners",value:function(e){var t=.5;this._minx=e.x-t,this._maxx=e.x+t,this._miny=e.y-t,this._maxy=e.y+t,this._corner[0]=new O(this._maxx,this._maxy),this._corner[1]=new O(this._minx,this._maxy),this._corner[2]=new O(this._minx,this._miny),this._corner[3]=new O(this._maxx,this._miny)}},{key:"intersects",value:function(e,t){return this._scaleFactor===1?this.intersectsScaled(e,t):(this.copyScaled(e,this._p0Scaled),this.copyScaled(t,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}},{key:"scale",value:function(e){return Math.round(e*this._scaleFactor)}},{key:"getCoordinate",value:function(){return this._originalPt}},{key:"copyScaled",value:function(e,t){t.x=this.scale(e.x),t.y=this.scale(e.y)}},{key:"getSafeEnvelope",value:function(){if(this._safeEnv===null){var e=i.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new de(this._originalPt.x-e,this._originalPt.x+e,this._originalPt.y-e,this._originalPt.y+e)}return this._safeEnv}},{key:"intersectsPixelClosure",value:function(e,t){return this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))}},{key:"intersectsToleranceSquare",value:function(e,t){var n=!1,r=!1;return this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!n||!r)||!!e.equals(this._pt)||!!t.equals(this._pt))))}},{key:"addSnappedNode",value:function(e,t){var n=e.getCoordinate(t),r=e.getCoordinate(t+1);return!!this.intersects(n,r)&&(e.addIntersection(this.getCoordinate(),t),!0)}}],[{key:"constructor_",value:function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var e=arguments[0],t=arguments[1],n=arguments[2];if(this._originalPt=e,this._pt=e,this._scaleFactor=t,this._li=n,t<=0)throw new x("Scale factor must be non-zero");t!==1&&(this._pt=new O(this.scale(e.x),this.scale(e.y)),this._p0Scaled=new O,this._p1Scaled=new O),this.initCorners(this._pt)}}])}();Yi.SAFE_ENV_EXPANSION_FACTOR=.75;var Po=function(){return g(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"select",value:function(){if(arguments.length!==1){if(arguments.length===2){var i=arguments[1];arguments[0].getLineSegment(i,this.selectedSegment),this.select(this.selectedSegment)}}}}],[{key:"constructor_",value:function(){this.selectedSegment=new ze}}])}(),es=function(){return g(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"snap",value:function(){if(arguments.length===1){var i=arguments[0];return this.snap(i,null,-1)}if(arguments.length===3){var e=arguments[0],t=arguments[1],n=arguments[2],r=e.getSafeEnvelope(),s=new ts(e,t,n);return this._index.query(r,new(function(){return g(function o(){l(this,o)},[{key:"interfaces_",get:function(){return[Br]}},{key:"visitItem",value:function(o){o.select(r,s)}}])}())),s.isNodeAdded()}}}],[{key:"constructor_",value:function(){this._index=null;var i=arguments[0];this._index=i}}])}(),ts=function(i){function e(){var t;return l(this,e),t=h(this,e),e.constructor_.apply(t,arguments),t}return _(e,i),g(e,[{key:"isNodeAdded",value:function(){return this._isNodeAdded}},{key:"select",value:function(){if(!(arguments.length===2&&Number.isInteger(arguments[1])&&arguments[0]instanceof Yr))return R(e,"select",this,1).apply(this,arguments);var t=arguments[1],n=arguments[0].getContext();if(this._parentEdge===n&&(t===this._hotPixelVertexIndex||t+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(n,t)}}],[{key:"constructor_",value:function(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=t,this._parentEdge=n,this._hotPixelVertexIndex=r}}])}(Po);es.HotPixelSnapAction=ts;var Ao=function(){return g(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"processIntersections",value:function(i,e,t,n){if(i===t&&e===n)return null;var r=i.getCoordinates()[e],s=i.getCoordinates()[e+1],o=t.getCoordinates()[n],c=t.getCoordinates()[n+1];if(this._li.computeIntersection(r,s,o,c),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var m=0;m<this._li.getIntersectionNum();m++)this._interiorIntersections.add(this._li.getIntersection(m));i.addIntersections(this._li,e,0),t.addIntersections(this._li,n,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this._interiorIntersections}},{key:"interfaces_",get:function(){return[$r]}}],[{key:"constructor_",value:function(){this._li=null,this._interiorIntersections=null;var i=arguments[0];this._li=i,this._interiorIntersections=new oe}}])}(),Do=function(){return g(function i(){l(this,i),i.constructor_.apply(this,arguments)},[{key:"checkCorrectness",value:function(i){var e=Mt.getNodedSubstrings(i),t=new Kr(e);try{t.checkValid()}catch(n){if(!(n instanceof p))throw n;n.printStackTrace()}}},{key:"getNodedSubstrings",value:function(){return Mt.getNodedSubstrings(this._nodedSegStrings)}},{key:"snapRound",value:function(i,e){var t=this.findInteriorIntersections(i,e);this.computeIntersectionSnaps(t),this.computeVertexSnaps(i)}},{key:"findInteriorIntersections",value:function(i,e){var t=new Ao(e);return this._noder.setSegmentIntersector(t),this._noder.computeNodes(i),t.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){if(he(arguments[0],Ne))for(var i=arguments[0].iterator();i.hasNext();){var e=i.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof Mt)for(var t=arguments[0],n=t.getCoordinates(),r=0;r<n.length;r++){var s=new Yi(n[r],this._scaleFactor,this._li);this._pointSnapper.snap(s,t,r)&&t.addIntersection(n[r],r)}}},{key:"computeNodes",value:function(i){this._nodedSegStrings=i,this._noder=new Bi,this._pointSnapper=new es(this._noder.getIndex()),this.snapRound(i,this._li)}},{key:"computeIntersectionSnaps",value:function(i){for(var e=i.iterator();e.hasNext();){var t=e.next(),n=new Yi(t,this._scaleFactor,this._li);this._pointSnapper.snap(n)}}},{key:"interfaces_",get:function(){return[qi]}}],[{key:"constructor_",value:function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var i=arguments[0];this._pm=i,this._li=new Rt,this._li.setPrecisionModel(i),this._scaleFactor=i.getScale()}}])}(),Xt=function(){function i(){l(this,i),i.constructor_.apply(this,arguments)}return g(i,[{key:"bufferFixedPrecision",value:function(e){var t=new Oo(new Do(new Ke(1)),e.getScale()),n=new Qr(this._bufParams);n.setWorkingPrecisionModel(e),n.setNoder(t),this._resultGeometry=n.buffer(this._argGeom,this._distance)}},{key:"bufferReducedPrecision",value:function(){if(arguments.length===0){for(var e=i.MAX_PRECISION_DIGITS;e>=0;e--){try{this.bufferReducedPrecision(e)}catch(s){if(!(s instanceof ht))throw s;this._saveException=s}if(this._resultGeometry!==null)return null}throw this._saveException}if(arguments.length===1){var t=arguments[0],n=i.precisionScaleFactor(this._argGeom,this._distance,t),r=new Ke(n);this.bufferFixedPrecision(r)}}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var e=this._argGeom.getFactory().getPrecisionModel();e.getType()===Ke.FIXED?this.bufferFixedPrecision(e):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(e){this._bufParams.setQuadrantSegments(e)}},{key:"bufferOriginalPrecision",value:function(){try{var e=new Qr(this._bufParams);this._resultGeometry=e.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof Q))throw t;this._saveException=t}}},{key:"getResultGeometry",value:function(e){return this._distance=e,this.computeGeometry(),this._resultGeometry}},{key:"setEndCapStyle",value:function(e){this._bufParams.setEndCapStyle(e)}}],[{key:"constructor_",value:function(){if(this._argGeom=null,this._distance=null,this._bufParams=new N,this._resultGeometry=null,this._saveException=null,arguments.length===1){var e=arguments[0];this._argGeom=e}else if(arguments.length===2){var t=arguments[0],n=arguments[1];this._argGeom=t,this._bufParams=n}}},{key:"bufferOp",value:function(){if(arguments.length===2){var e=arguments[1];return new i(arguments[0]).getResultGeometry(e)}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof K&&typeof arguments[1]=="number"){var t=arguments[1],n=arguments[2],r=new i(arguments[0]);return r.setQuadrantSegments(n),r.getResultGeometry(t)}if(arguments[2]instanceof N&&arguments[0]instanceof K&&typeof arguments[1]=="number"){var s=arguments[1];return new i(arguments[0],arguments[2]).getResultGeometry(s)}}else if(arguments.length===4){var o=arguments[1],c=arguments[2],m=arguments[3],v=new i(arguments[0]);return v.setQuadrantSegments(c),v.setEndCapStyle(m),v.getResultGeometry(o)}}},{key:"precisionScaleFactor",value:function(e,t,n){var r=e.getEnvelopeInternal(),s=ln.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(t>0?t:0),o=n-Math.trunc(Math.log(s)/Math.log(10)+1);return Math.pow(10,o)}}])}();Xt.CAP_ROUND=N.CAP_ROUND,Xt.CAP_BUTT=N.CAP_FLAT,Xt.CAP_FLAT=N.CAP_FLAT,Xt.CAP_SQUARE=N.CAP_SQUARE,Xt.MAX_PRECISION_DIGITS=12;var Fo=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],ns=function(){return g(function i(e){l(this,i),this.geometryFactory=e||new qt},[{key:"read",value:function(i){var e,t=(e=typeof i=="string"?JSON.parse(i):i).type;if(!Ze[t])throw new Error("Unknown GeoJSON type: "+e.type);return Fo.indexOf(t)!==-1?Ze[t].call(this,e.coordinates):t==="GeometryCollection"?Ze[t].call(this,e.geometries):Ze[t].call(this,e)}},{key:"write",value:function(i){var e=i.getGeometryType();if(!ot[e])throw new Error("Geometry is not supported");return ot[e].call(this,i)}}])}(),Ze={Feature:function(i){var e={};for(var t in i)e[t]=i[t];if(i.geometry){var n=i.geometry.type;if(!Ze[n])throw new Error("Unknown GeoJSON type: "+i.type);e.geometry=this.read(i.geometry)}return i.bbox&&(e.bbox=Ze.bbox.call(this,i.bbox)),e},FeatureCollection:function(i){var e={};if(i.features){e.features=[];for(var t=0;t<i.features.length;++t)e.features.push(this.read(i.features[t]))}return i.bbox&&(e.bbox=this.parse.bbox.call(this,i.bbox)),e},coordinates:function(i){for(var e=[],t=0;t<i.length;++t){var n=i[t];e.push(d(O,B(n)))}return e},bbox:function(i){return this.geometryFactory.createLinearRing([new O(i[0],i[1]),new O(i[2],i[1]),new O(i[2],i[3]),new O(i[0],i[3]),new O(i[0],i[1])])},Point:function(i){var e=d(O,B(i));return this.geometryFactory.createPoint(e)},MultiPoint:function(i){for(var e=[],t=0;t<i.length;++t)e.push(Ze.Point.call(this,i[t]));return this.geometryFactory.createMultiPoint(e)},LineString:function(i){var e=Ze.coordinates.call(this,i);return this.geometryFactory.createLineString(e)},MultiLineString:function(i){for(var e=[],t=0;t<i.length;++t)e.push(Ze.LineString.call(this,i[t]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(i){for(var e=Ze.coordinates.call(this,i[0]),t=this.geometryFactory.createLinearRing(e),n=[],r=1;r<i.length;++r){var s=i[r],o=Ze.coordinates.call(this,s),c=this.geometryFactory.createLinearRing(o);n.push(c)}return this.geometryFactory.createPolygon(t,n)},MultiPolygon:function(i){for(var e=[],t=0;t<i.length;++t){var n=i[t];e.push(Ze.Polygon.call(this,n))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(i){for(var e=[],t=0;t<i.length;++t){var n=i[t];e.push(this.read(n))}return this.geometryFactory.createGeometryCollection(e)}},ot={coordinate:function(i){var e=[i.x,i.y];return i.z&&e.push(i.z),i.m&&e.push(i.m),e},Point:function(i){return{type:"Point",coordinates:ot.coordinate.call(this,i.getCoordinate())}},MultiPoint:function(i){for(var e=[],t=0;t<i._geometries.length;++t){var n=i._geometries[t],r=ot.Point.call(this,n);e.push(r.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(i){for(var e=[],t=i.getCoordinates(),n=0;n<t.length;++n){var r=t[n];e.push(ot.coordinate.call(this,r))}return{type:"LineString",coordinates:e}},MultiLineString:function(i){for(var e=[],t=0;t<i._geometries.length;++t){var n=i._geometries[t],r=ot.LineString.call(this,n);e.push(r.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(i){var e=[],t=ot.LineString.call(this,i._shell);e.push(t.coordinates);for(var n=0;n<i._holes.length;++n){var r=i._holes[n],s=ot.LineString.call(this,r);e.push(s.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(i){for(var e=[],t=0;t<i._geometries.length;++t){var n=i._geometries[t],r=ot.Polygon.call(this,n);e.push(r.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(i){for(var e=[],t=0;t<i._geometries.length;++t){var n=i._geometries[t],r=n.getGeometryType();e.push(ot[r].call(this,n))}return{type:"GeometryCollection",geometries:e}}};return{BufferOp:Xt,GeoJSONReader:function(){return g(function i(e){l(this,i),this.parser=new ns(e||new qt)},[{key:"read",value:function(i){return this.parser.read(i)}}])}(),GeoJSONWriter:function(){return g(function i(){l(this,i),this.parser=new ns(this.geometryFactory)},[{key:"write",value:function(i){return this.parser.write(i)}}])}()}})}(ni)),ni.exports}var vu=mu();const yu=ea(vu);function St(){return new oi}function oi(){this.reset()}oi.prototype={constructor:oi,reset:function(){this.s=this.t=0},add:function(a){ys(Wn,a,this.t),ys(this,Wn.s,this.s),this.s?this.t+=Wn.t:this.s=Wn.t},valueOf:function(){return this.s}};var Wn=new oi;function ys(a,u,f){var h=a.s=u+f,l=h-u,d=h-l;a.t=u-d+(f-l)}var we=1e-6,ke=Math.PI,ut=ke/2,ps=ke/4,lt=ke*2,Et=180/ke,$e=ke/180,be=Math.abs,pu=Math.atan,Jt=Math.atan2,Le=Math.cos,Te=Math.sin,an=Math.sqrt;function ta(a){return a>1?0:a<-1?ke:Math.acos(a)}function At(a){return a>1?ut:a<-1?-ut:Math.asin(a)}function _n(){}function ui(a,u){a&&ks.hasOwnProperty(a.type)&&ks[a.type](a,u)}var _s={Feature:function(a,u){ui(a.geometry,u)},FeatureCollection:function(a,u){for(var f=a.features,h=-1,l=f.length;++h<l;)ui(f[h].geometry,u)}},ks={Sphere:function(a,u){u.sphere()},Point:function(a,u){a=a.coordinates,u.point(a[0],a[1],a[2])},MultiPoint:function(a,u){for(var f=a.coordinates,h=-1,l=f.length;++h<l;)a=f[h],u.point(a[0],a[1],a[2])},LineString:function(a,u){Ji(a.coordinates,u,0)},MultiLineString:function(a,u){for(var f=a.coordinates,h=-1,l=f.length;++h<l;)Ji(f[h],u,0)},Polygon:function(a,u){xs(a.coordinates,u)},MultiPolygon:function(a,u){for(var f=a.coordinates,h=-1,l=f.length;++h<l;)xs(f[h],u)},GeometryCollection:function(a,u){for(var f=a.geometries,h=-1,l=f.length;++h<l;)ui(f[h],u)}};function Ji(a,u,f){var h=-1,l=a.length-f,d;for(u.lineStart();++h<l;)d=a[h],u.point(d[0],d[1],d[2]);u.lineEnd()}function xs(a,u){var f=-1,h=a.length;for(u.polygonStart();++f<h;)Ji(a[f],u,1);u.polygonEnd()}function _u(a,u){a&&_s.hasOwnProperty(a.type)?_s[a.type](a,u):ui(a,u)}St();St();function Qi(a){return[Jt(a[1],a[0]),At(a[2])]}function Qt(a){var u=a[0],f=a[1],h=Le(f);return[h*Le(u),h*Te(u),Te(f)]}function Zn(a,u){return a[0]*u[0]+a[1]*u[1]+a[2]*u[2]}function li(a,u){return[a[1]*u[2]-a[2]*u[1],a[2]*u[0]-a[0]*u[2],a[0]*u[1]-a[1]*u[0]]}function Vi(a,u){a[0]+=u[0],a[1]+=u[1],a[2]+=u[2]}function $n(a,u){return[a[0]*u,a[1]*u,a[2]*u]}function Ki(a){var u=an(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=u,a[1]/=u,a[2]/=u}St();function na(a,u){function f(h,l){return h=a(h,l),u(h[0],h[1])}return a.invert&&u.invert&&(f.invert=function(h,l){return h=u.invert(h,l),h&&a.invert(h[0],h[1])}),f}function er(a,u){return[a>ke?a-lt:a<-ke?a+lt:a,u]}er.invert=er;function ku(a,u,f){return(a%=lt)?u||f?na(Is(a),Ns(u,f)):Is(a):u||f?Ns(u,f):er}function Es(a){return function(u,f){return u+=a,[u>ke?u-lt:u<-ke?u+lt:u,f]}}function Is(a){var u=Es(a);return u.invert=Es(-a),u}function Ns(a,u){var f=Le(a),h=Te(a),l=Le(u),d=Te(u);function y(g,w){var L=Le(w),E=Le(g)*L,_=Te(g)*L,T=Te(w),A=T*f+E*h;return[Jt(_*l-A*d,E*f-T*h),At(A*l+_*d)]}return y.invert=function(g,w){var L=Le(w),E=Le(g)*L,_=Te(g)*L,T=Te(w),A=T*l-_*d;return[Jt(_*l+T*d,E*f+A*h),At(A*f-E*h)]},y}function xu(a,u,f,h,l,d){if(f){var y=Le(u),g=Te(u),w=h*f;l==null?(l=u+h*lt,d=u-w/2):(l=Ss(y,l),d=Ss(y,d),(h>0?l<d:l>d)&&(l+=h*lt));for(var L,E=l;h>0?E>d:E<d;E-=w)L=Qi([y,-g*Le(E),-g*Te(E)]),a.point(L[0],L[1])}}function Ss(a,u){u=Qt(u),u[0]-=a,Ki(u);var f=ta(-u[1]);return((-u[2]<0?-f:f)+lt-we)%lt}function ia(){var a=[],u;return{point:function(f,h){u.push([f,h])},lineStart:function(){a.push(u=[])},lineEnd:_n,rejoin:function(){a.length>1&&a.push(a.pop().concat(a.shift()))},result:function(){var f=a;return a=[],u=null,f}}}function Eu(a,u,f,h,l,d){var y=a[0],g=a[1],w=u[0],L=u[1],E=0,_=1,T=w-y,A=L-g,R;if(R=f-y,!(!T&&R>0)){if(R/=T,T<0){if(R<E)return;R<_&&(_=R)}else if(T>0){if(R>_)return;R>E&&(E=R)}if(R=l-y,!(!T&&R<0)){if(R/=T,T<0){if(R>_)return;R>E&&(E=R)}else if(T>0){if(R<E)return;R<_&&(_=R)}if(R=h-g,!(!A&&R>0)){if(R/=A,A<0){if(R<E)return;R<_&&(_=R)}else if(A>0){if(R>_)return;R>E&&(E=R)}if(R=d-g,!(!A&&R<0)){if(R/=A,A<0){if(R>_)return;R>E&&(E=R)}else if(A>0){if(R<E)return;R<_&&(_=R)}return E>0&&(a[0]=y+E*T,a[1]=g+E*A),_<1&&(u[0]=y+_*T,u[1]=g+_*A),!0}}}}}function ii(a,u){return be(a[0]-u[0])<we&&be(a[1]-u[1])<we}function jn(a,u,f,h){this.x=a,this.z=u,this.o=f,this.e=h,this.v=!1,this.n=this.p=null}function ra(a,u,f,h,l){var d=[],y=[],g,w;if(a.forEach(function(R){if(!((B=R.length-1)<=0)){var B,z=R[0],U=R[B],I;if(ii(z,U)){for(l.lineStart(),g=0;g<B;++g)l.point((z=R[g])[0],z[1]);l.lineEnd();return}d.push(I=new jn(z,R,null,!0)),y.push(I.o=new jn(z,null,I,!1)),d.push(I=new jn(U,R,null,!1)),y.push(I.o=new jn(U,null,I,!0))}}),!!d.length){for(y.sort(u),ws(d),ws(y),g=0,w=y.length;g<w;++g)y[g].e=f=!f;for(var L=d[0],E,_;;){for(var T=L,A=!0;T.v;)if((T=T.n)===L)return;E=T.z,l.lineStart();do{if(T.v=T.o.v=!0,T.e){if(A)for(g=0,w=E.length;g<w;++g)l.point((_=E[g])[0],_[1]);else h(T.x,T.n.x,1,l);T=T.n}else{if(A)for(E=T.p.z,g=E.length-1;g>=0;--g)l.point((_=E[g])[0],_[1]);else h(T.x,T.p.x,-1,l);T=T.p}T=T.o,E=T.z,A=!A}while(!T.v);l.lineEnd()}}}function ws(a){if(u=a.length){for(var u,f=0,h=a[0],l;++f<u;)h.n=l=a[f],l.p=h,h=l;h.n=l=a[0],l.p=h}}function sa(a,u){return a<u?-1:a>u?1:a>=u?0:NaN}function Iu(a){return a.length===1&&(a=Nu(a)),{left:function(u,f,h,l){for(h==null&&(h=0),l==null&&(l=u.length);h<l;){var d=h+l>>>1;a(u[d],f)<0?h=d+1:l=d}return h},right:function(u,f,h,l){for(h==null&&(h=0),l==null&&(l=u.length);h<l;){var d=h+l>>>1;a(u[d],f)>0?l=d:h=d+1}return h}}}function Nu(a){return function(u,f){return sa(a(u),f)}}Iu(sa);function aa(a){for(var u=a.length,f,h=-1,l=0,d,y;++h<u;)l+=a[h].length;for(d=new Array(l);--u>=0;)for(y=a[u],f=y.length;--f>=0;)d[--l]=y[f];return d}var Jn=1e9,Qn=-1e9;function Su(a,u,f,h){function l(L,E){return a<=L&&L<=f&&u<=E&&E<=h}function d(L,E,_,T){var A=0,R=0;if(L==null||(A=y(L,_))!==(R=y(E,_))||w(L,E)<0^_>0)do T.point(A===0||A===3?a:f,A>1?h:u);while((A=(A+_+4)%4)!==R);else T.point(E[0],E[1])}function y(L,E){return be(L[0]-a)<we?E>0?0:3:be(L[0]-f)<we?E>0?2:1:be(L[1]-u)<we?E>0?1:0:E>0?3:2}function g(L,E){return w(L.x,E.x)}function w(L,E){var _=y(L,1),T=y(E,1);return _!==T?_-T:_===0?E[1]-L[1]:_===1?L[0]-E[0]:_===2?L[1]-E[1]:E[0]-L[0]}return function(L){var E=L,_=ia(),T,A,R,B,z,U,I,N,p,x,S,C={point:M,lineStart:V,lineEnd:Z,polygonStart:q,polygonEnd:Y};function M(ne,j){l(ne,j)&&E.point(ne,j)}function P(){for(var ne=0,j=0,ie=A.length;j<ie;++j)for(var ae=A[j],le=1,F=ae.length,ee=ae[0],Q,me,J=ee[0],fe=ee[1];le<F;++le)Q=J,me=fe,ee=ae[le],J=ee[0],fe=ee[1],me<=h?fe>h&&(J-Q)*(h-me)>(fe-me)*(a-Q)&&++ne:fe<=h&&(J-Q)*(h-me)<(fe-me)*(a-Q)&&--ne;return ne}function q(){E=_,T=[],A=[],S=!0}function Y(){var ne=P(),j=S&&ne,ie=(T=aa(T)).length;(j||ie)&&(L.polygonStart(),j&&(L.lineStart(),d(null,null,1,L),L.lineEnd()),ie&&ra(T,g,ne,d,L),L.polygonEnd()),E=L,T=A=R=null}function V(){C.point=G,A&&A.push(R=[]),x=!0,p=!1,I=N=NaN}function Z(){T&&(G(B,z),U&&p&&_.rejoin(),T.push(_.result())),C.point=M,p&&E.lineEnd()}function G(ne,j){var ie=l(ne,j);if(A&&R.push([ne,j]),x)B=ne,z=j,U=ie,x=!1,ie&&(E.lineStart(),E.point(ne,j));else if(ie&&p)E.point(ne,j);else{var ae=[I=Math.max(Qn,Math.min(Jn,I)),N=Math.max(Qn,Math.min(Jn,N))],le=[ne=Math.max(Qn,Math.min(Jn,ne)),j=Math.max(Qn,Math.min(Jn,j))];Eu(ae,le,a,u,f,h)?(p||(E.lineStart(),E.point(ae[0],ae[1])),E.point(le[0],le[1]),ie||E.lineEnd(),S=!1):ie&&(E.lineStart(),E.point(ne,j),S=!1)}I=ne,N=j,p=ie}return C}}var Hi=St();function wu(a,u){var f=u[0],h=u[1],l=[Te(f),-Le(f),0],d=0,y=0;Hi.reset();for(var g=0,w=a.length;g<w;++g)if(E=(L=a[g]).length)for(var L,E,_=L[E-1],T=_[0],A=_[1]/2+ps,R=Te(A),B=Le(A),z=0;z<E;++z,T=I,R=p,B=x,_=U){var U=L[z],I=U[0],N=U[1]/2+ps,p=Te(N),x=Le(N),S=I-T,C=S>=0?1:-1,M=C*S,P=M>ke,q=R*p;if(Hi.add(Jt(q*C*Te(M),B*x+q*Le(M))),d+=P?S+C*lt:S,P^T>=f^I>=f){var Y=li(Qt(_),Qt(U));Ki(Y);var V=li(l,Y);Ki(V);var Z=(P^S>=0?-1:1)*At(V[2]);(h>Z||h===Z&&(Y[0]||Y[1]))&&(y+=P^S>=0?1:-1)}}return(d<-1e-6||d<we&&Hi<-1e-6)^y&1}St();function Cs(a){return a}St();St();var Kt=1/0,ci=Kt,Nn=-Kt,hi=Nn,Ls={point:Cu,lineStart:_n,lineEnd:_n,polygonStart:_n,polygonEnd:_n,result:function(){var a=[[Kt,ci],[Nn,hi]];return Nn=hi=-(ci=Kt=1/0),a}};function Cu(a,u){a<Kt&&(Kt=a),a>Nn&&(Nn=a),u<ci&&(ci=u),u>hi&&(hi=u)}St();function oa(a,u,f,h){return function(l,d){var y=u(d),g=l.invert(h[0],h[1]),w=ia(),L=u(w),E=!1,_,T,A,R={point:B,lineStart:U,lineEnd:I,polygonStart:function(){R.point=N,R.lineStart=p,R.lineEnd=x,T=[],_=[]},polygonEnd:function(){R.point=B,R.lineStart=U,R.lineEnd=I,T=aa(T);var S=wu(_,g);T.length?(E||(d.polygonStart(),E=!0),ra(T,Tu,S,f,d)):S&&(E||(d.polygonStart(),E=!0),d.lineStart(),f(null,null,1,d),d.lineEnd()),E&&(d.polygonEnd(),E=!1),T=_=null},sphere:function(){d.polygonStart(),d.lineStart(),f(null,null,1,d),d.lineEnd(),d.polygonEnd()}};function B(S,C){var M=l(S,C);a(S=M[0],C=M[1])&&d.point(S,C)}function z(S,C){var M=l(S,C);y.point(M[0],M[1])}function U(){R.point=z,y.lineStart()}function I(){R.point=B,y.lineEnd()}function N(S,C){A.push([S,C]);var M=l(S,C);L.point(M[0],M[1])}function p(){L.lineStart(),A=[]}function x(){N(A[0][0],A[0][1]),L.lineEnd();var S=L.clean(),C=w.result(),M,P=C.length,q,Y,V;if(A.pop(),_.push(A),A=null,!!P){if(S&1){if(Y=C[0],(q=Y.length-1)>0){for(E||(d.polygonStart(),E=!0),d.lineStart(),M=0;M<q;++M)d.point((V=Y[M])[0],V[1]);d.lineEnd()}return}P>1&&S&2&&C.push(C.pop().concat(C.shift())),T.push(C.filter(Lu))}}return R}}function Lu(a){return a.length>1}function Tu(a,u){return((a=a.x)[0]<0?a[1]-ut-we:ut-a[1])-((u=u.x)[0]<0?u[1]-ut-we:ut-u[1])}const Ts=oa(function(){return!0},Ru,bu,[-ke,-ut]);function Ru(a){var u=NaN,f=NaN,h=NaN,l;return{lineStart:function(){a.lineStart(),l=1},point:function(d,y){var g=d>0?ke:-ke,w=be(d-u);be(w-ke)<we?(a.point(u,f=(f+y)/2>0?ut:-ut),a.point(h,f),a.lineEnd(),a.lineStart(),a.point(g,f),a.point(d,f),l=0):h!==g&&w>=ke&&(be(u-h)<we&&(u-=h*we),be(d-g)<we&&(d-=g*we),f=Mu(u,f,d,y),a.point(h,f),a.lineEnd(),a.lineStart(),a.point(g,f),l=0),a.point(u=d,f=y),h=g},lineEnd:function(){a.lineEnd(),u=f=NaN},clean:function(){return 2-l}}}function Mu(a,u,f,h){var l,d,y=Te(a-f);return be(y)>we?pu((Te(u)*(d=Le(h))*Te(f)-Te(h)*(l=Le(u))*Te(a))/(l*d*y)):(u+h)/2}function bu(a,u,f,h){var l;if(a==null)l=f*ut,h.point(-ke,l),h.point(0,l),h.point(ke,l),h.point(ke,0),h.point(ke,-l),h.point(0,-l),h.point(-ke,-l),h.point(-ke,0),h.point(-ke,l);else if(be(a[0]-u[0])>we){var d=a[0]<u[0]?ke:-ke;l=f*d/2,h.point(-d,l),h.point(0,l),h.point(d,l)}else h.point(u[0],u[1])}function Ou(a,u){var f=Le(a),h=f>0,l=be(f)>we;function d(E,_,T,A){xu(A,a,u,T,E,_)}function y(E,_){return Le(E)*Le(_)>f}function g(E){var _,T,A,R,B;return{lineStart:function(){R=A=!1,B=1},point:function(z,U){var I=[z,U],N,p=y(z,U),x=h?p?0:L(z,U):p?L(z+(z<0?ke:-ke),U):0;if(!_&&(R=A=p)&&E.lineStart(),p!==A&&(N=w(_,I),(!N||ii(_,N)||ii(I,N))&&(I[0]+=we,I[1]+=we,p=y(I[0],I[1]))),p!==A)B=0,p?(E.lineStart(),N=w(I,_),E.point(N[0],N[1])):(N=w(_,I),E.point(N[0],N[1]),E.lineEnd()),_=N;else if(l&&_&&h^p){var S;!(x&T)&&(S=w(I,_,!0))&&(B=0,h?(E.lineStart(),E.point(S[0][0],S[0][1]),E.point(S[1][0],S[1][1]),E.lineEnd()):(E.point(S[1][0],S[1][1]),E.lineEnd(),E.lineStart(),E.point(S[0][0],S[0][1])))}p&&(!_||!ii(_,I))&&E.point(I[0],I[1]),_=I,A=p,T=x},lineEnd:function(){A&&E.lineEnd(),_=null},clean:function(){return B|(R&&A)<<1}}}function w(E,_,T){var A=Qt(E),R=Qt(_),B=[1,0,0],z=li(A,R),U=Zn(z,z),I=z[0],N=U-I*I;if(!N)return!T&&E;var p=f*U/N,x=-f*I/N,S=li(B,z),C=$n(B,p),M=$n(z,x);Vi(C,M);var P=S,q=Zn(C,P),Y=Zn(P,P),V=q*q-Y*(Zn(C,C)-1);if(!(V<0)){var Z=an(V),G=$n(P,(-q-Z)/Y);if(Vi(G,C),G=Qi(G),!T)return G;var ne=E[0],j=_[0],ie=E[1],ae=_[1],le;j<ne&&(le=ne,ne=j,j=le);var F=j-ne,ee=be(F-ke)<we,Q=ee||F<we;if(!ee&&ae<ie&&(le=ie,ie=ae,ae=le),Q?ee?ie+ae>0^G[1]<(be(G[0]-ne)<we?ie:ae):ie<=G[1]&&G[1]<=ae:F>ke^(ne<=G[0]&&G[0]<=j)){var me=$n(P,(-q+Z)/Y);return Vi(me,C),[G,Qi(me)]}}}function L(E,_){var T=h?a:ke-a,A=0;return E<-T?A|=1:E>T&&(A|=2),_<-T?A|=4:_>T&&(A|=8),A}return oa(y,g,d,h?[0,-a]:[-ke,a-ke])}function ua(a){return function(u){var f=new tr;for(var h in a)f[h]=a[h];return f.stream=u,f}}function tr(){}tr.prototype={constructor:tr,point:function(a,u){this.stream.point(a,u)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function la(a,u,f){var h=u[1][0]-u[0][0],l=u[1][1]-u[0][1],d=a.clipExtent&&a.clipExtent();a.scale(150).translate([0,0]),d!=null&&a.clipExtent(null),_u(f,a.stream(Ls));var y=Ls.result(),g=Math.min(h/(y[1][0]-y[0][0]),l/(y[1][1]-y[0][1])),w=+u[0][0]+(h-g*(y[1][0]+y[0][0]))/2,L=+u[0][1]+(l-g*(y[1][1]+y[0][1]))/2;return d!=null&&a.clipExtent(d),a.scale(g*150).translate([w,L])}function Pu(a,u,f){return la(a,[[0,0],u],f)}var Rs=16,Au=Le(30*$e);function Ms(a,u){return+u?Fu(a,u):Du(a)}function Du(a){return ua({point:function(u,f){u=a(u,f),this.stream.point(u[0],u[1])}})}function Fu(a,u){function f(h,l,d,y,g,w,L,E,_,T,A,R,B,z){var U=L-h,I=E-l,N=U*U+I*I;if(N>4*u&&B--){var p=y+T,x=g+A,S=w+R,C=an(p*p+x*x+S*S),M=At(S/=C),P=be(be(S)-1)<we||be(d-_)<we?(d+_)/2:Jt(x,p),q=a(P,M),Y=q[0],V=q[1],Z=Y-h,G=V-l,ne=I*Z-U*G;(ne*ne/N>u||be((U*Z+I*G)/N-.5)>.3||y*T+g*A+w*R<Au)&&(f(h,l,d,y,g,w,Y,V,P,p/=C,x/=C,S,B,z),z.point(Y,V),f(Y,V,P,p,x,S,L,E,_,T,A,R,B,z))}}return function(h){var l,d,y,g,w,L,E,_,T,A,R,B,z={point:U,lineStart:I,lineEnd:p,polygonStart:function(){h.polygonStart(),z.lineStart=x},polygonEnd:function(){h.polygonEnd(),z.lineStart=I}};function U(M,P){M=a(M,P),h.point(M[0],M[1])}function I(){_=NaN,z.point=N,h.lineStart()}function N(M,P){var q=Qt([M,P]),Y=a(M,P);f(_,T,E,A,R,B,_=Y[0],T=Y[1],E=M,A=q[0],R=q[1],B=q[2],Rs,h),h.point(_,T)}function p(){z.point=U,h.lineEnd()}function x(){I(),z.point=S,z.lineEnd=C}function S(M,P){N(l=M,P),d=_,y=T,g=A,w=R,L=B,z.point=N}function C(){f(_,T,E,A,R,B,d,y,l,g,w,L,Rs,h),z.lineEnd=p,p()}return z}}var qu=ua({point:function(a,u){this.stream.point(a*$e,u*$e)}});function Bu(a){return Gu(function(){return a})()}function Gu(a){var u,f=150,h=480,l=250,d,y,g=0,w=0,L=0,E=0,_=0,T,A,R=null,B=Ts,z=null,U,I,N,p=Cs,x=.5,S=Ms(Y,x),C,M;function P(G){return G=A(G[0]*$e,G[1]*$e),[G[0]*f+d,y-G[1]*f]}function q(G){return G=A.invert((G[0]-d)/f,(y-G[1])/f),G&&[G[0]*Et,G[1]*Et]}function Y(G,ne){return G=u(G,ne),[G[0]*f+d,y-G[1]*f]}P.stream=function(G){return C&&M===G?C:C=qu(B(T,S(p(M=G))))},P.clipAngle=function(G){return arguments.length?(B=+G?Ou(R=G*$e,6*$e):(R=null,Ts),Z()):R*Et},P.clipExtent=function(G){return arguments.length?(p=G==null?(z=U=I=N=null,Cs):Su(z=+G[0][0],U=+G[0][1],I=+G[1][0],N=+G[1][1]),Z()):z==null?null:[[z,U],[I,N]]},P.scale=function(G){return arguments.length?(f=+G,V()):f},P.translate=function(G){return arguments.length?(h=+G[0],l=+G[1],V()):[h,l]},P.center=function(G){return arguments.length?(g=G[0]%360*$e,w=G[1]%360*$e,V()):[g*Et,w*Et]},P.rotate=function(G){return arguments.length?(L=G[0]%360*$e,E=G[1]%360*$e,_=G.length>2?G[2]%360*$e:0,V()):[L*Et,E*Et,_*Et]},P.precision=function(G){return arguments.length?(S=Ms(Y,x=G*G),Z()):an(x)},P.fitExtent=function(G,ne){return la(P,G,ne)},P.fitSize=function(G,ne){return Pu(P,G,ne)};function V(){A=na(T=ku(L,E,_),u);var G=u(g,w);return d=h-G[0]*f,y=l+G[1]*f,Z()}function Z(){return C=M=null,P}return function(){return u=a.apply(this,arguments),P.invert=u.invert&&q,V()}}function ca(a){return function(u,f){var h=Le(u),l=Le(f),d=a(h*l);return[d*l*Te(u),d*Te(f)]}}function ha(a){return function(u,f){var h=an(u*u+f*f),l=a(h),d=Te(l),y=Le(l);return[Jt(u*d,h*y),At(h&&f*d/h)]}}var Yu=ca(function(a){return an(2/(1+a))});Yu.invert=ha(function(a){return 2*At(a/2)});var fa=ca(function(a){return(a=ta(a))&&a/Te(a)});fa.invert=ha(function(a){return a});function zu(){return Bu(fa).scale(79.4188).clipAngle(180-.001)}function bs(a,u){return[a,u]}bs.invert=bs;var{BufferOp:Xu,GeoJSONReader:Uu,GeoJSONWriter:Vu}=yu;function ga(a,u,f){f=f||{};var h=f.units||"kilometers",l=f.steps||8;if(!a)throw new Error("geojson is required");if(typeof f!="object")throw new Error("options must be an object");if(typeof l!="number")throw new Error("steps must be an number");if(u===void 0)throw new Error("radius is required");if(l<=0)throw new Error("steps must be greater than 0");var d=[];switch(a.type){case"GeometryCollection":return cr(a,function(y){var g=ri(y,u,h,l);g&&d.push(g)}),$t(d);case"FeatureCollection":return cs(a,function(y){var g=ri(y,u,h,l);g&&cs(g,function(w){w&&d.push(w)})}),$t(d)}return ri(a,u,h,l)}function ri(a,u,f,h){var l=a.properties||{},d=a.type==="Feature"?a.geometry:a;if(d.type==="GeometryCollection"){var y=[];return cr(a,function(B){var z=ri(B,u,f,h);z&&y.push(z)}),$t(y)}var g=Hu(d),w={type:d.type,coordinates:ma(d.coordinates,g)},L=new Uu,E=L.read(w),_=Ws(Zs(u,f),"meters"),T=Xu.bufferOp(E,_,h),A=new Vu;if(T=A.write(T),!da(T.coordinates)){var R={type:T.type,coordinates:va(T.coordinates,g)};return Nt(R,l)}}function da(a){return Array.isArray(a[0])?da(a[0]):isNaN(a[0])}function ma(a,u){return typeof a[0]!="object"?u(a):a.map(function(f){return ma(f,u)})}function va(a,u){return typeof a[0]!="object"?u.invert(a):a.map(function(f){return va(f,u)})}function Hu(a){var u=gu(a).geometry.coordinates,f=[-u[0],-u[1]];return zu().rotate(f).scale(Ge)}var Kn={exports:{}},si={exports:{}},Wu=si.exports,Os;function Zu(){return Os||(Os=1,function(a,u){(function(f,h){a.exports=h()})(Wu,function(){function f(I,N,p,x,S){(function C(M,P,q,Y,V){for(;Y>q;){if(Y-q>600){var Z=Y-q+1,G=P-q+1,ne=Math.log(Z),j=.5*Math.exp(2*ne/3),ie=.5*Math.sqrt(ne*j*(Z-j)/Z)*(G-Z/2<0?-1:1),ae=Math.max(q,Math.floor(P-G*j/Z+ie)),le=Math.min(Y,Math.floor(P+(Z-G)*j/Z+ie));C(M,P,ae,le,V)}var F=M[P],ee=q,Q=Y;for(h(M,q,P),V(M[Y],F)>0&&h(M,q,Y);ee<Q;){for(h(M,ee,Q),ee++,Q--;V(M[ee],F)<0;)ee++;for(;V(M[Q],F)>0;)Q--}V(M[q],F)===0?h(M,q,Q):h(M,++Q,Y),Q<=P&&(q=Q+1),P<=Q&&(Y=Q-1)}})(I,N,p||0,x||I.length-1,S||l)}function h(I,N,p){var x=I[N];I[N]=I[p],I[p]=x}function l(I,N){return I<N?-1:I>N?1:0}var d=function(I){I===void 0&&(I=9),this._maxEntries=Math.max(4,I),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function y(I,N,p){if(!p)return N.indexOf(I);for(var x=0;x<N.length;x++)if(p(I,N[x]))return x;return-1}function g(I,N){w(I,0,I.children.length,N,I)}function w(I,N,p,x,S){S||(S=z(null)),S.minX=1/0,S.minY=1/0,S.maxX=-1/0,S.maxY=-1/0;for(var C=N;C<p;C++){var M=I.children[C];L(S,I.leaf?x(M):M)}return S}function L(I,N){return I.minX=Math.min(I.minX,N.minX),I.minY=Math.min(I.minY,N.minY),I.maxX=Math.max(I.maxX,N.maxX),I.maxY=Math.max(I.maxY,N.maxY),I}function E(I,N){return I.minX-N.minX}function _(I,N){return I.minY-N.minY}function T(I){return(I.maxX-I.minX)*(I.maxY-I.minY)}function A(I){return I.maxX-I.minX+(I.maxY-I.minY)}function R(I,N){return I.minX<=N.minX&&I.minY<=N.minY&&N.maxX<=I.maxX&&N.maxY<=I.maxY}function B(I,N){return N.minX<=I.maxX&&N.minY<=I.maxY&&N.maxX>=I.minX&&N.maxY>=I.minY}function z(I){return{children:I,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function U(I,N,p,x,S){for(var C=[N,p];C.length;)if(!((p=C.pop())-(N=C.pop())<=x)){var M=N+Math.ceil((p-N)/x/2)*x;f(I,M,N,p,S),C.push(N,M,M,p)}}return d.prototype.all=function(){return this._all(this.data,[])},d.prototype.search=function(I){var N=this.data,p=[];if(!B(I,N))return p;for(var x=this.toBBox,S=[];N;){for(var C=0;C<N.children.length;C++){var M=N.children[C],P=N.leaf?x(M):M;B(I,P)&&(N.leaf?p.push(M):R(I,P)?this._all(M,p):S.push(M))}N=S.pop()}return p},d.prototype.collides=function(I){var N=this.data;if(!B(I,N))return!1;for(var p=[];N;){for(var x=0;x<N.children.length;x++){var S=N.children[x],C=N.leaf?this.toBBox(S):S;if(B(I,C)){if(N.leaf||R(I,C))return!0;p.push(S)}}N=p.pop()}return!1},d.prototype.load=function(I){if(!I||!I.length)return this;if(I.length<this._minEntries){for(var N=0;N<I.length;N++)this.insert(I[N]);return this}var p=this._build(I.slice(),0,I.length-1,0);if(this.data.children.length)if(this.data.height===p.height)this._splitRoot(this.data,p);else{if(this.data.height<p.height){var x=this.data;this.data=p,p=x}this._insert(p,this.data.height-p.height-1,!0)}else this.data=p;return this},d.prototype.insert=function(I){return I&&this._insert(I,this.data.height-1),this},d.prototype.clear=function(){return this.data=z([]),this},d.prototype.remove=function(I,N){if(!I)return this;for(var p,x,S,C=this.data,M=this.toBBox(I),P=[],q=[];C||P.length;){if(C||(C=P.pop(),x=P[P.length-1],p=q.pop(),S=!0),C.leaf){var Y=y(I,C.children,N);if(Y!==-1)return C.children.splice(Y,1),P.push(C),this._condense(P),this}S||C.leaf||!R(C,M)?x?(p++,C=x.children[p],S=!1):C=null:(P.push(C),q.push(p),p=0,x=C,C=C.children[0])}return this},d.prototype.toBBox=function(I){return I},d.prototype.compareMinX=function(I,N){return I.minX-N.minX},d.prototype.compareMinY=function(I,N){return I.minY-N.minY},d.prototype.toJSON=function(){return this.data},d.prototype.fromJSON=function(I){return this.data=I,this},d.prototype._all=function(I,N){for(var p=[];I;)I.leaf?N.push.apply(N,I.children):p.push.apply(p,I.children),I=p.pop();return N},d.prototype._build=function(I,N,p,x){var S,C=p-N+1,M=this._maxEntries;if(C<=M)return g(S=z(I.slice(N,p+1)),this.toBBox),S;x||(x=Math.ceil(Math.log(C)/Math.log(M)),M=Math.ceil(C/Math.pow(M,x-1))),(S=z([])).leaf=!1,S.height=x;var P=Math.ceil(C/M),q=P*Math.ceil(Math.sqrt(M));U(I,N,p,q,this.compareMinX);for(var Y=N;Y<=p;Y+=q){var V=Math.min(Y+q-1,p);U(I,Y,V,P,this.compareMinY);for(var Z=Y;Z<=V;Z+=P){var G=Math.min(Z+P-1,V);S.children.push(this._build(I,Z,G,x-1))}}return g(S,this.toBBox),S},d.prototype._chooseSubtree=function(I,N,p,x){for(;x.push(N),!N.leaf&&x.length-1!==p;){for(var S=1/0,C=1/0,M=void 0,P=0;P<N.children.length;P++){var q=N.children[P],Y=T(q),V=(Z=I,G=q,(Math.max(G.maxX,Z.maxX)-Math.min(G.minX,Z.minX))*(Math.max(G.maxY,Z.maxY)-Math.min(G.minY,Z.minY))-Y);V<C?(C=V,S=Y<S?Y:S,M=q):V===C&&Y<S&&(S=Y,M=q)}N=M||N.children[0]}var Z,G;return N},d.prototype._insert=function(I,N,p){var x=p?I:this.toBBox(I),S=[],C=this._chooseSubtree(x,this.data,N,S);for(C.children.push(I),L(C,x);N>=0&&S[N].children.length>this._maxEntries;)this._split(S,N),N--;this._adjustParentBBoxes(x,S,N)},d.prototype._split=function(I,N){var p=I[N],x=p.children.length,S=this._minEntries;this._chooseSplitAxis(p,S,x);var C=this._chooseSplitIndex(p,S,x),M=z(p.children.splice(C,p.children.length-C));M.height=p.height,M.leaf=p.leaf,g(p,this.toBBox),g(M,this.toBBox),N?I[N-1].children.push(M):this._splitRoot(p,M)},d.prototype._splitRoot=function(I,N){this.data=z([I,N]),this.data.height=I.height+1,this.data.leaf=!1,g(this.data,this.toBBox)},d.prototype._chooseSplitIndex=function(I,N,p){for(var x,S,C,M,P,q,Y,V=1/0,Z=1/0,G=N;G<=p-N;G++){var ne=w(I,0,G,this.toBBox),j=w(I,G,p,this.toBBox),ie=(S=ne,C=j,M=void 0,P=void 0,q=void 0,Y=void 0,M=Math.max(S.minX,C.minX),P=Math.max(S.minY,C.minY),q=Math.min(S.maxX,C.maxX),Y=Math.min(S.maxY,C.maxY),Math.max(0,q-M)*Math.max(0,Y-P)),ae=T(ne)+T(j);ie<V?(V=ie,x=G,Z=ae<Z?ae:Z):ie===V&&ae<Z&&(Z=ae,x=G)}return x||p-N},d.prototype._chooseSplitAxis=function(I,N,p){var x=I.leaf?this.compareMinX:E,S=I.leaf?this.compareMinY:_;this._allDistMargin(I,N,p,x)<this._allDistMargin(I,N,p,S)&&I.children.sort(x)},d.prototype._allDistMargin=function(I,N,p,x){I.children.sort(x);for(var S=this.toBBox,C=w(I,0,N,S),M=w(I,p-N,p,S),P=A(C)+A(M),q=N;q<p-N;q++){var Y=I.children[q];L(C,I.leaf?S(Y):Y),P+=A(C)}for(var V=p-N-1;V>=N;V--){var Z=I.children[V];L(M,I.leaf?S(Z):Z),P+=A(M)}return P},d.prototype._adjustParentBBoxes=function(I,N,p){for(var x=p;x>=0;x--)L(N[x],I)},d.prototype._condense=function(I){for(var N=I.length-1,p=void 0;N>=0;N--)I[N].children.length===0?N>0?(p=I[N-1].children).splice(p.indexOf(I[N]),1):this.clear():g(I[N],this.toBBox)},d})}(si)),si.exports}class $u{constructor(u=[],f=ju){if(this.data=u,this.length=this.data.length,this.compare=f,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(u){this.data.push(u),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const u=this.data[0],f=this.data.pop();return this.length--,this.length>0&&(this.data[0]=f,this._down(0)),u}peek(){return this.data[0]}_up(u){const{data:f,compare:h}=this,l=f[u];for(;u>0;){const d=u-1>>1,y=f[d];if(h(l,y)>=0)break;f[u]=y,u=d}f[u]=l}_down(u){const{data:f,compare:h}=this,l=this.length>>1,d=f[u];for(;u<l;){let y=(u<<1)+1,g=f[y];const w=y+1;if(w<this.length&&h(f[w],g)<0&&(y=w,g=f[w]),h(g,d)>=0)break;f[u]=g,u=y}f[u]=d}}function ju(a,u){return a<u?-1:a>u?1:0}const Ju=Object.freeze(Object.defineProperty({__proto__:null,default:$u},Symbol.toStringTag,{value:"Module"})),Qu=fu(Ju);var pn={exports:{}},Wi,Ps;function Ku(){return Ps||(Ps=1,Wi=function(u,f,h,l){var d=u[0],y=u[1],g=!1;h===void 0&&(h=0),l===void 0&&(l=f.length);for(var w=(l-h)/2,L=0,E=w-1;L<w;E=L++){var _=f[h+L*2+0],T=f[h+L*2+1],A=f[h+E*2+0],R=f[h+E*2+1],B=T>y!=R>y&&d<(A-_)*(y-T)/(R-T)+_;B&&(g=!g)}return g}),Wi}var Zi,As;function el(){return As||(As=1,Zi=function(u,f,h,l){var d=u[0],y=u[1],g=!1;h===void 0&&(h=0),l===void 0&&(l=f.length);for(var w=l-h,L=0,E=w-1;L<w;E=L++){var _=f[L+h][0],T=f[L+h][1],A=f[E+h][0],R=f[E+h][1],B=T>y!=R>y&&d<(A-_)*(y-T)/(R-T)+_;B&&(g=!g)}return g}),Zi}var Ds;function tl(){if(Ds)return pn.exports;Ds=1;var a=Ku(),u=el();return pn.exports=function(h,l,d,y){return l.length>0&&Array.isArray(l[0])?u(h,l,d,y):a(h,l,d,y)},pn.exports.nested=u,pn.exports.flat=a,pn.exports}var kn={exports:{}},nl=kn.exports,Fs;function il(){return Fs||(Fs=1,function(a,u){(function(f,h){h(u)})(nl,function(f){const l=33306690738754706e-32;function d(B,z,U,I,N){let p,x,S,C,M=z[0],P=I[0],q=0,Y=0;P>M==P>-M?(p=M,M=z[++q]):(p=P,P=I[++Y]);let V=0;if(q<B&&Y<U)for(P>M==P>-M?(S=p-((x=M+p)-M),M=z[++q]):(S=p-((x=P+p)-P),P=I[++Y]),p=x,S!==0&&(N[V++]=S);q<B&&Y<U;)P>M==P>-M?(S=p-((x=p+M)-(C=x-p))+(M-C),M=z[++q]):(S=p-((x=p+P)-(C=x-p))+(P-C),P=I[++Y]),p=x,S!==0&&(N[V++]=S);for(;q<B;)S=p-((x=p+M)-(C=x-p))+(M-C),M=z[++q],p=x,S!==0&&(N[V++]=S);for(;Y<U;)S=p-((x=p+P)-(C=x-p))+(P-C),P=I[++Y],p=x,S!==0&&(N[V++]=S);return p===0&&V!==0||(N[V++]=p),V}function y(B){return new Float64Array(B)}const g=33306690738754716e-32,w=22204460492503146e-32,L=11093356479670487e-47,E=y(4),_=y(8),T=y(12),A=y(16),R=y(4);f.orient2d=function(B,z,U,I,N,p){const x=(z-p)*(U-N),S=(B-N)*(I-p),C=x-S;if(x===0||S===0||x>0!=S>0)return C;const M=Math.abs(x+S);return Math.abs(C)>=g*M?C:-function(P,q,Y,V,Z,G,ne){let j,ie,ae,le,F,ee,Q,me,J,fe,ge,ye,O,Ie,de,K,k,Ne;const Re=P-Z,Ce=Y-Z,Be=q-G,De=V-G;F=(de=(me=Re-(Q=(ee=134217729*Re)-(ee-Re)))*(fe=De-(J=(ee=134217729*De)-(ee-De)))-((Ie=Re*De)-Q*J-me*J-Q*fe))-(ge=de-(k=(me=Be-(Q=(ee=134217729*Be)-(ee-Be)))*(fe=Ce-(J=(ee=134217729*Ce)-(ee-Ce)))-((K=Be*Ce)-Q*J-me*J-Q*fe))),E[0]=de-(ge+F)+(F-k),F=(O=Ie-((ye=Ie+ge)-(F=ye-Ie))+(ge-F))-(ge=O-K),E[1]=O-(ge+F)+(F-K),F=(Ne=ye+ge)-ye,E[2]=ye-(Ne-F)+(ge-F),E[3]=Ne;let it=function(Ii,he){let _t=he[0];for(let kt=1;kt<Ii;kt++)_t+=he[kt];return _t}(4,E),H=w*ne;if(it>=H||-it>=H||(j=P-(Re+(F=P-Re))+(F-Z),ae=Y-(Ce+(F=Y-Ce))+(F-Z),ie=q-(Be+(F=q-Be))+(F-G),le=V-(De+(F=V-De))+(F-G),j===0&&ie===0&&ae===0&&le===0)||(H=L*ne+l*Math.abs(it),(it+=Re*le+De*j-(Be*ae+Ce*ie))>=H||-it>=H))return it;F=(de=(me=j-(Q=(ee=134217729*j)-(ee-j)))*(fe=De-(J=(ee=134217729*De)-(ee-De)))-((Ie=j*De)-Q*J-me*J-Q*fe))-(ge=de-(k=(me=ie-(Q=(ee=134217729*ie)-(ee-ie)))*(fe=Ce-(J=(ee=134217729*Ce)-(ee-Ce)))-((K=ie*Ce)-Q*J-me*J-Q*fe))),R[0]=de-(ge+F)+(F-k),F=(O=Ie-((ye=Ie+ge)-(F=ye-Ie))+(ge-F))-(ge=O-K),R[1]=O-(ge+F)+(F-K),F=(Ne=ye+ge)-ye,R[2]=ye-(Ne-F)+(ge-F),R[3]=Ne;const bn=d(4,E,4,R,_);F=(de=(me=Re-(Q=(ee=134217729*Re)-(ee-Re)))*(fe=le-(J=(ee=134217729*le)-(ee-le)))-((Ie=Re*le)-Q*J-me*J-Q*fe))-(ge=de-(k=(me=Be-(Q=(ee=134217729*Be)-(ee-Be)))*(fe=ae-(J=(ee=134217729*ae)-(ee-ae)))-((K=Be*ae)-Q*J-me*J-Q*fe))),R[0]=de-(ge+F)+(F-k),F=(O=Ie-((ye=Ie+ge)-(F=ye-Ie))+(ge-F))-(ge=O-K),R[1]=O-(ge+F)+(F-K),F=(Ne=ye+ge)-ye,R[2]=ye-(Ne-F)+(ge-F),R[3]=Ne;const On=d(bn,_,4,R,T);F=(de=(me=j-(Q=(ee=134217729*j)-(ee-j)))*(fe=le-(J=(ee=134217729*le)-(ee-le)))-((Ie=j*le)-Q*J-me*J-Q*fe))-(ge=de-(k=(me=ie-(Q=(ee=134217729*ie)-(ee-ie)))*(fe=ae-(J=(ee=134217729*ae)-(ee-ae)))-((K=ie*ae)-Q*J-me*J-Q*fe))),R[0]=de-(ge+F)+(F-k),F=(O=Ie-((ye=Ie+ge)-(F=ye-Ie))+(ge-F))-(ge=O-K),R[1]=O-(ge+F)+(F-K),F=(Ne=ye+ge)-ye,R[2]=ye-(Ne-F)+(ge-F),R[3]=Ne;const ct=d(On,T,4,R,A);return A[ct-1]}(B,z,U,I,N,p,M)},f.orient2dfast=function(B,z,U,I,N,p){return(z-p)*(U-N)-(B-N)*(I-p)},Object.defineProperty(f,"__esModule",{value:!0})})}(kn,kn.exports)),kn.exports}var qs;function rl(){if(qs)return Kn.exports;qs=1;var a=Zu(),u=Qu,f=tl(),h=il().orient2d;u.default&&(u=u.default),Kn.exports=l,Kn.exports.default=l;function l(p,x,S){x=Math.max(0,x===void 0?2:x),S=S||0;var C=A(p),M=new a(16);M.toBBox=function(Q){return{minX:Q[0],minY:Q[1],maxX:Q[0],maxY:Q[1]}},M.compareMinX=function(Q,me){return Q[0]-me[0]},M.compareMinY=function(Q,me){return Q[1]-me[1]},M.load(p);for(var P=[],q=0,Y;q<C.length;q++){var V=C[q];M.remove(V),Y=R(V,Y),P.push(Y)}var Z=new a(16);for(q=0;q<P.length;q++)Z.insert(T(P[q]));for(var G=x*x,ne=S*S;P.length;){var j=P.shift(),ie=j.p,ae=j.next.p,le=B(ie,ae);if(!(le<ne)){var F=le/G;V=d(M,j.prev.p,ie,ae,j.next.next.p,F,Z),V&&Math.min(B(V,ie),B(V,ae))<=F&&(P.push(j),P.push(R(V,j)),M.remove(V),Z.remove(j),Z.insert(T(j)),Z.insert(T(j.next)))}}j=Y;var ee=[];do ee.push(j.p),j=j.next;while(j!==Y);return ee.push(j.p),ee}function d(p,x,S,C,M,P,q){for(var Y=new u([],y),V=p.data;V;){for(var Z=0;Z<V.children.length;Z++){var G=V.children[Z],ne=V.leaf?z(G,S,C):g(S,C,G);ne>P||Y.push({node:G,dist:ne})}for(;Y.length&&!Y.peek().node.children;){var j=Y.pop(),ie=j.node,ae=z(ie,x,S),le=z(ie,C,M);if(j.dist<ae&&j.dist<le&&L(S,ie,q)&&L(C,ie,q))return ie}V=Y.pop(),V&&(V=V.node)}return null}function y(p,x){return p.dist-x.dist}function g(p,x,S){if(w(p,S)||w(x,S))return 0;var C=U(p[0],p[1],x[0],x[1],S.minX,S.minY,S.maxX,S.minY);if(C===0)return 0;var M=U(p[0],p[1],x[0],x[1],S.minX,S.minY,S.minX,S.maxY);if(M===0)return 0;var P=U(p[0],p[1],x[0],x[1],S.maxX,S.minY,S.maxX,S.maxY);if(P===0)return 0;var q=U(p[0],p[1],x[0],x[1],S.minX,S.maxY,S.maxX,S.maxY);return q===0?0:Math.min(C,M,P,q)}function w(p,x){return p[0]>=x.minX&&p[0]<=x.maxX&&p[1]>=x.minY&&p[1]<=x.maxY}function L(p,x,S){for(var C=Math.min(p[0],x[0]),M=Math.min(p[1],x[1]),P=Math.max(p[0],x[0]),q=Math.max(p[1],x[1]),Y=S.search({minX:C,minY:M,maxX:P,maxY:q}),V=0;V<Y.length;V++)if(_(Y[V].p,Y[V].next.p,p,x))return!1;return!0}function E(p,x,S){return h(p[0],p[1],x[0],x[1],S[0],S[1])}function _(p,x,S,C){return p!==C&&x!==S&&E(p,x,S)>0!=E(p,x,C)>0&&E(S,C,p)>0!=E(S,C,x)>0}function T(p){var x=p.p,S=p.next.p;return p.minX=Math.min(x[0],S[0]),p.minY=Math.min(x[1],S[1]),p.maxX=Math.max(x[0],S[0]),p.maxY=Math.max(x[1],S[1]),p}function A(p){for(var x=p[0],S=p[0],C=p[0],M=p[0],P=0;P<p.length;P++){var q=p[P];q[0]<x[0]&&(x=q),q[0]>C[0]&&(C=q),q[1]<S[1]&&(S=q),q[1]>M[1]&&(M=q)}var Y=[x,S,C,M],V=Y.slice();for(P=0;P<p.length;P++)f(p[P],Y)||V.push(p[P]);return N(V)}function R(p,x){var S={p,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return x?(S.next=x.next,S.prev=x,x.next.prev=S,x.next=S):(S.prev=S,S.next=S),S}function B(p,x){var S=p[0]-x[0],C=p[1]-x[1];return S*S+C*C}function z(p,x,S){var C=x[0],M=x[1],P=S[0]-C,q=S[1]-M;if(P!==0||q!==0){var Y=((p[0]-C)*P+(p[1]-M)*q)/(P*P+q*q);Y>1?(C=S[0],M=S[1]):Y>0&&(C+=P*Y,M+=q*Y)}return P=p[0]-C,q=p[1]-M,P*P+q*q}function U(p,x,S,C,M,P,q,Y){var V=S-p,Z=C-x,G=q-M,ne=Y-P,j=p-M,ie=x-P,ae=V*V+Z*Z,le=V*G+Z*ne,F=G*G+ne*ne,ee=V*j+Z*ie,Q=G*j+ne*ie,me=ae*F-le*le,J,fe,ge,ye,O=me,Ie=me;me===0?(fe=0,O=1,ye=Q,Ie=F):(fe=le*Q-F*ee,ye=ae*Q-le*ee,fe<0?(fe=0,ye=Q,Ie=F):fe>O&&(fe=O,ye=Q+le,Ie=F)),ye<0?(ye=0,-ee<0?fe=0:-ee>ae?fe=O:(fe=-ee,O=ae)):ye>Ie&&(ye=Ie,-ee+le<0?fe=0:-ee+le>ae?fe=O:(fe=-ee+le,O=ae)),J=fe===0?0:fe/O,ge=ye===0?0:ye/Ie;var de=(1-J)*p+J*S,K=(1-J)*x+J*C,k=(1-ge)*M+ge*q,Ne=(1-ge)*P+ge*Y,Re=k-de,Ce=Ne-K;return Re*Re+Ce*Ce}function I(p,x){return p[0]===x[0]?p[1]-x[1]:p[0]-x[0]}function N(p){p.sort(I);for(var x=[],S=0;S<p.length;S++){for(;x.length>=2&&E(x[x.length-2],x[x.length-1],p[S])<=0;)x.pop();x.push(p[S])}for(var C=[],M=p.length-1;M>=0;M--){for(;C.length>=2&&E(C[C.length-2],C[C.length-1],p[M])<=0;)C.pop();C.push(p[M])}return C.pop(),x.pop(),x.concat(C)}return Kn.exports}var sl=rl();const al=ea(sl);function ol(a,u={}){u.concavity=u.concavity||1/0;const f=[];if(pi(a,l=>{f.push([l[0],l[1]])}),!f.length)return null;const h=al(f,u.concavity);return h.length>3?Bo([h]):null}function ul(a,u={}){return Vo(a,(f,h)=>{const l=h.geometry.coordinates;return f+Js(l[0],l[1],u)},0)}const ya=Ln.create({withCredentials:!1});Ln.interceptors.response.use(a=>a,a=>{if(a.response&&(a.response.status===401||a.response.status===403)){console.log("Session expired detected by interceptor"),console.log("Error details:",a.response.status,a.response.data),console.log("Current path:",window.location.pathname);const u=localStorage.getItem("userProfile");console.log("User profile exists:",!!u);const f=window.location.pathname,h=f.includes("client.html")||f.includes("help.html");if(!u&&!h)return console.log("No user profile found, redirecting to login"),window.location.href="/pages/authentication/login.html",Promise.reject(a);if(!u&&h)return console.log("On public page without user profile, not redirecting"),Promise.reject(a);if(!f.includes("login.html")&&!f.includes("signup.html")){console.log("User profile exists but request failed, clearing storage and redirecting"),localStorage.removeItem("userProfile"),localStorage.removeItem("activityLog");const l=document.getElementById("messageContainer");if(l){const d=document.createElement("div");d.className="message error",d.textContent="Session expired. Redirecting to home page...",l.appendChild(d)}setTimeout(()=>{window.location.href="/index.html"},2e3)}else console.log("On login/signup page, not redirecting")}return Promise.reject(a)});const xn=document.querySelector(".toggleBtn.from"),En=document.querySelector(".toggleBtn.to"),pa=document.querySelector(".menu.markerConfirmation"),ll=document.querySelector(".menu.markerConfirmation .close_button"),cl=document.querySelector(".menu.markerConfirmation .btn.no"),hl=document.querySelector(".menu.markerConfirmation .btn.yes");let Bs;const fi=document.querySelector(".sourcePin"),gi=document.querySelector(".destPin"),_a=document.querySelector(".menu.cancelRoute"),fl=document.querySelector(".menu.cancelRoute .close_button"),gl=document.querySelector(".menu.cancelRoute .btn.no"),dl=document.querySelector(".menu.cancelRoute .btn.yes"),ml=document.querySelector(".search_container"),Ot=document.querySelector(".listSource"),en=document.querySelector(".listDestination"),on=document.querySelector(".search_input.source"),un=document.querySelector(".search_input.destination"),Sn=document.querySelector(".source .fa-search"),wn=document.querySelector(".dest .fa-search"),vl=document.querySelector("#ui_container .toggle-container"),yl=document.querySelector("#map .toggle-container"),ka=document.querySelector(".direction_container .sub_direction_container"),pl=document.querySelector(".default_direction_button");let nr=!1,di=!1,Vt=null,ai=null;const ir=document.getElementById("toggleBtn"),rr=document.querySelector(".map_container"),It=document.getElementById("map");let sr=!1;document.querySelector(".feedbackBtn");const je=new Map([["from",0],["to",0]]);let Je=null,Qe=null,ar=[],$i=!1,nt,_i=!1,Rn=!1,ki=-500,xi=-500,Ei="",Dt=!0,Ht={latitude:-500,longitude:-500},Wt={latitude:-500,longitude:-500},yt=[],dt=[];const _l=["Limpopo","Gauteng","Mpumalanga","Western Cape","kwazulu-natal","Eastern Cape","North West","Free State","Northern Cape"];let or=!1;const xa=["#D2CCA1","#757780","#387780","#A30B37","#EF626C","#361F27","#912F56","#68B684","#C3F73A","#FF36AB"],kl=["#CEE6C2","#C3C5F7","#ECB8B8","#ECBDF1","#F1E8BD","#BDE7F1","#BDF1DE","#ECBDF1","#CEE6C2"];let mi=[],mt=[];const hr="pk.eyJ1IjoiY2xpZXRpbiIsImEiOiJjbTR6eW1icmMxN3dyMmpzODBsZDQwNHN6In0.m5MSK2_0_SFpPPhB5BX86w";mapboxgl.accessToken=hr;const re=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[28.5,-26.2],zoom:8,maxBounds:[[16,-35],[33,-22]],minZoom:5,maxZoom:18});function Zt(){if(re){re.resize(),re.triggerRepaint();const a=document.getElementById("map");if(a){const u=window.getComputedStyle(a),f=u.width,h=u.height;(f==="0px"||h==="0px"||f==="auto"||h==="auto")&&(a.style.width="100%",a.style.height="100%",re.resize())}}}re.on("load",()=>{setTimeout(()=>{Zt()},100),setTimeout(()=>{Zt()},500),setTimeout(()=>{Zt()},1e3)});window.addEventListener("resize",()=>{re&&Zt()});document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{Zt()},200),fi&&(fi.style.color="#919191"),gi&&(gi.style.color="#919191")});window.addEventListener("load",()=>{setTimeout(()=>{Zt()},300)});setTimeout(()=>{xl()},1e3);async function xl(){try{const u=(await Ln.get(`${lr}/client/listOfAllRoutes`,{withCredentials:!0})).data.routes;let f=[];u.forEach(E=>{f=f.concat(E.coords)});const h=$t(f.map(E=>Pt(E))),l=ol(h),d=ga(l,1,{units:"kilometers"}),y={type:"Feature",geometry:{type:"Polygon",coordinates:[[[-180,-90],[-180,90],[180,90],[180,-90],[-180,-90]],d.geometry.coordinates[0]]}},g="mask-"+Date.now(),w="mask-fill-"+Date.now();re.addSource(g,{type:"geojson",data:y}),re.addLayer({id:w,type:"fill",source:g,paint:{"fill-color":"#ffffff","fill-opacity":.7}});const L=d.geometry.coordinates[0].reduce((E,_)=>E.extend(_),new mapboxgl.LngLatBounds(d.geometry.coordinates[0][0],d.geometry.coordinates[0][0]));re.fitBounds(L,{padding:50,maxZoom:12,duration:2e3})}catch(a){if(console.error("Error in HighlightRoutes:",a),a.response&&(a.response.status===401||a.response.status===403)){const u=window.location.pathname;!u.includes("login.html")&&!u.includes("signup.html")&&(console.log("Authentication error in HighlightRoutes, redirecting to login"),window.location.href="/pages/authentication/login.html")}}}re.on("load",()=>{Vl(),re.on("click","buffer-layer",async a=>{if($i=!0,_i===!0){console.error("Context menu is already open");return}if(je.get("to")===0&&je.get("from")===0){if(a.originalEvent.target.closest(".custom-mapbox, .mapboxgl-popup"))return;pt("Click from or to buttons , to Mark a location",!1);return}const{lng:u,lat:f}=a.lngLat;console.log(`Coordinates clicked: Longitude - ${u}, Latitude - ${f}`);const h=`https://api.mapbox.com/geocoding/v5/mapbox.places/${u},${f}.json?access_token=${mapboxgl.accessToken}&country=ZA`;try{const d=await(await fetch(h)).json(),y=d.features[0].place_name;d.features&&d.features.length>0?(Dl(),Fl(u,f,y)):console.error("No address found for the clicked location.")}catch(l){console.error("Error fetching address:",l)}}),re.on("click",a=>{if($i){$i=!1;return}a.lngLat,re.queryRenderedFeatures(a.point,{layers:["buffer-layer"]}).length===0&&pt("Click is outside of the radius",!1)}),hl.addEventListener("click",()=>{Rn=!0,ql()?(Bl(ki,xi,Ei),rn(),mr()):console.error("Not all information is available to be saved")})});function El(){const a=localStorage.getItem("teksimap_onboarding_completed");console.log("checkFirstTimeUser - hasSeenOnboarding:",a),a?console.log("Not showing onboarding modal - already seen"):(console.log("Showing onboarding modal"),Il())}function Il(){const a=document.createElement("div");a.className="onboarding-modal",a.innerHTML=`
    <div class="onboarding-content">
      <div class="onboarding-header">
        <h2> Welcome to TeksiMap!</h2>
        <button class="onboarding-close"></button>
      </div>
      
      <div class="onboarding-body">
        <div class="onboarding-step active" data-step="1">
          <h3> How to Use TeksiMap</h3>
          <p>Find the best taxi routes in South Africa with just a few clicks!</p>
          <div class="onboarding-feature">
            <span class="feature-icon"></span>
            <span>Type or search for your starting location in the "From" input</span>
          </div>
          <div class="onboarding-feature">
            <span class="feature-icon"></span>
            <span>Type or search for your destination in the "To" input</span>
          </div>
          <div class="onboarding-feature">
            <span class="feature-icon"></span>
            <span>Click the "From" or "To" button for more accurate location selection</span>
          </div>
          <div class="onboarding-feature">
            <span class="feature-icon"></span>
            <span>Routes are found automatically when both starting and destination markers are placed</span>
          </div>
          <div class="onboarding-feature">
            <span class="feature-icon"></span>
            <span>Use the direction buttons (D1, D2, D3...) to view step-by-step directions</span>
          </div>
          <div class="onboarding-feature">
            <span class="feature-icon"></span>
            <span>Use "Show price color codes" to change route colors based on price</span>
          </div>
        </div>

        <div class="onboarding-step" data-step="2">
          <h3> Understanding the Map</h3>
          <p><strong>Important:</strong> The white filtered areas should be ignored since the data for these areas are not yet available.</p>
          <div class="onboarding-feature">
            <span class="feature-icon"></span>
            <span>Blue areas = Available taxi routes</span>
          </div>
          <div class="onboarding-feature">
            <span class="feature-icon"></span>
            <span>White areas = No data available yet</span>
          </div>
          <div class="onboarding-feature">
            <span class="feature-icon"></span>
            <span>Use "Show Route Coverage" toggle to see available areas</span>
          </div>
        </div>

        <div class="onboarding-step" data-step="3">
          <h3> Mobile Tips</h3>
          <div class="onboarding-feature">
            <span class="feature-icon"></span>
            <span>Access search inputs by pressing the arrow button below the navigation bar</span>
          </div>
          <div class="onboarding-feature">
            <span class="feature-icon"></span>
            <span>Click the "From" or "To" button and click on your preferred location</span>
          </div>
          <div class="onboarding-feature">
            <span class="feature-icon"></span>
            <span>Hold to clear routes when you want to start over</span>
          </div>
          <div class="onboarding-feature">
            <span class="feature-icon"></span>
            <span>Use pinch-to-zoom for better map navigation</span>
          </div>
          <div class="onboarding-feature">
            <span class="feature-icon"></span>
            <span>Tap and drag to move around the map</span>
          </div>
        </div>

        <div class="onboarding-step" data-step="4">
          <h3> Suggest New Routes</h3>
          <p><strong>Help build the most comprehensive taxi map in South Africa!</strong></p>
          <div class="onboarding-feature">
            <span class="feature-icon"></span>
            <span><strong>Suggest Routes:</strong> Add new taxi routes you know about</span>
          </div>
          <div class="onboarding-feature">
            <span class="feature-icon"></span>
            <span><strong>Select Taxi Ranks:</strong> Choose pickup and drop-off locations</span>
          </div>
          <div class="onboarding-feature">
            <span class="feature-icon"></span>
            <span><strong>Draw Route:</strong> Create the route path on the map</span>
          </div>
          <div class="onboarding-feature">
            <span class="feature-icon"></span>
            <span><strong>Set Price:</strong> Add fare information for the route</span>
          </div>
          <div class="onboarding-feature">
            <span class="feature-icon"></span>
            <span><strong>Submit:</strong> Send your route suggestion for review</span>
          </div>
          <p style="margin-top: 16px; font-style: italic; color: #6c757d;">
            <strong>How it works:</strong> Click "Suggest route" in the menu  Choose taxi ranks  Draw your route  Set price  Submit!
          </p>
        </div>

        <div class="onboarding-step" data-step="5">
          <h3> You're All Set!</h3>
          <p>Start exploring taxi routes in South Africa. Remember:</p>
          <ul>
            <li>Only click within the blue highlighted areas</li>
            <li>Use the toggle buttons to customize your view</li>
            <li>Right-click to cancel routes anytime</li>
            <li>Suggest new routes to help your community</li>
            <li>Use "Feedback" to report issues or suggest improvements</li>
          </ul>
          <p><strong>Happy traveling! </strong></p>
        </div>
      </div>

      <div class="onboarding-footer">
        <div class="onboarding-progress">
          <span class="progress-dot active" data-step="1"></span>
          <span class="progress-dot" data-step="2"></span>
          <span class="progress-dot" data-step="3"></span>
          <span class="progress-dot" data-step="4"></span>
          <span class="progress-dot" data-step="5"></span>
        </div>
        <div class="onboarding-buttons">
          <button class="onboarding-btn secondary" id="prevBtn" style="display: none;">Previous</button>
          <button class="onboarding-btn primary" id="nextBtn">Next</button>
          <button class="onboarding-btn primary" id="completeBtn" style="display: none;">Get Started!</button>
        </div>
      </div>
    </div>
  `,document.body.appendChild(a);const u=a.querySelector(".onboarding-close"),f=a.querySelector("#prevBtn"),h=a.querySelector("#nextBtn"),l=a.querySelector("#completeBtn"),d=a.querySelectorAll(".progress-dot");u.addEventListener("click",Ia),f.addEventListener("click",Sl),h.addEventListener("click",Nl),l.addEventListener("click",wl),d.forEach(y=>{y.addEventListener("click",()=>{const g=parseInt(y.dataset.step);fr(g)})})}let Cn=1;const Ea=5;function fr(a){document.querySelectorAll(".onboarding-step").forEach(g=>g.classList.remove("active"));const f=document.querySelector(`[data-step="${a}"]`);f&&f.classList.add("active"),document.querySelectorAll(".progress-dot").forEach((g,w)=>{w+1<=a?g.classList.add("active"):g.classList.remove("active")});const l=document.getElementById("prevBtn"),d=document.getElementById("nextBtn"),y=document.getElementById("completeBtn");a===1?(l.style.display="none",d.style.display="inline-block",y.style.display="none"):a===Ea?(l.style.display="inline-block",d.style.display="none",y.style.display="inline-block"):(l.style.display="inline-block",d.style.display="inline-block",y.style.display="none"),Cn=a}function Nl(){Cn<Ea&&fr(Cn+1)}function Sl(){Cn>1&&fr(Cn-1)}function wl(){localStorage.setItem("teksimap_onboarding_completed","true"),Ia()}function Ia(){const a=document.querySelector(".onboarding-modal");a&&a.remove()}document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{console.log("Checking for first-time user..."),El()},1500)});Sn.addEventListener("click",async a=>{const u=on.value;u&&Na(u,!0)});wn.addEventListener("click",async a=>{const u=un.value;u&&Na(u,!1)});document.addEventListener("click",a=>{!ml.contains(a.target)&&!Ot.contains(a.target)&&!en.contains(a.target)&&(Ot.innerHTML="",en.innerHTML="")});It.addEventListener("contextmenu",a=>{console.log("Dected right click"),yt.length>0&&Dt===!0&&Al()});fl.addEventListener("click",()=>{Mn()});gl.addEventListener("click",()=>{Mn()});dl.addEventListener("click",a=>{yt.length>0&&(yi(),yt.length=0,Ca(),mt=[],dt=[],Je&&(Je.remove(),console.log("marker is removed")),Qe&&(Qe.remove(),console.log("marker is removed")),Ht={latitude:-500,longitude:-500},Wt={latitude:-500,longitude:-500},Ma(),ba(),vr(),pt("Successfully removed",!0),Ol(),Pl(),Mn())});xn.addEventListener("click",()=>{if(je.get("from")===1){tn(),Dt=!0;return}Mn(),tn(),je.set("from",1),xn.style.backgroundColor="#FFD52F",xn.style.color="white",Dt=!1});function Cl(){window.innerWidth<=768&&(Bs=document.querySelector(" #text-map .close_button"),Bs.addEventListener("click",()=>{yr(),ir.classList.toggle("down")}))}ir.addEventListener("click",()=>{if(ir.classList.toggle("down")===!0){sr=!0;let u=null;mt&&mt.length>0?(u=ur(mt,!1),rr.insertBefore(u,It),window.innerWidth>768&&(It.style.width="75%")):(console.log("Thee is no Information"),u=ur(["Oops: Text map is not loaded"],!0),rr.insertBefore(u,It),window.innerWidth>768&&(It.style.width="75%")),Tl(),Rl(),Cl()}else sr=!1,yr(),window.innerWidth>768&&(It.style.width="100%")});En.addEventListener("click",()=>{if(je.get("to")===1){tn(),Dt=!0;return}Mn(),tn(),je.set("to",1),En.style.backgroundColor="#FFD52F",En.style.color="white",Dt=!1});ll.addEventListener("click",()=>{mr(),rn(),Rn=!1});cl.addEventListener("click",()=>{mr(),rn(),Rn=!1});on.addEventListener("input",a=>{const u=a.target.value.trim();u===""?Sn.style.color="#919191":(Sn.style.color="#FFD52F",wa(Ot,u))});un.addEventListener("input",a=>{const u=a.target.value.trim();u===""?wn.style.color="#919191":(wn.style.color="#FFD52F",wa(en,u))});ka.addEventListener("click",async a=>{const u=a.target.closest(".direction_button");if(!mi){console.log("Could not find any  directions stored");return}const f=mi[u.id];if(console.log("Direcion combo chosen : ",f),!f){console.log(`Button id = ${u.id} , was nopt found`);return}let h=[];if(f.forEach(l=>{h.push(l.direction_coords)}),console.log("Direction combo chosen : ",h),!h){console.log("The variable directionCoords is null or  undefined ");return}sn(h,"Taxi","D1","yellow"),di===!0&&(nr=!0,di=!1),await Zl(h.flat(),"#CEE6C2")});pl.addEventListener("click",a=>{vr(),Sa()});vl.addEventListener("click",a=>{La()});yl.addEventListener("click",a=>{Yl()});const Gs=document.getElementById("zoomInBtn"),Ys=document.getElementById("zoomOutBtn");Gs&&Gs.addEventListener("click",()=>{if(re){const a=re.getZoom();re.zoomTo(a+1,{duration:300})}});Ys&&Ys.addEventListener("click",()=>{if(re){const a=re.getZoom();re.zoomTo(a-1,{duration:300})}});function Ll(a,u,f,h){return console.log("lastRoute : ",a),console.log("destIsFullyBounded : ",u),a.route_type==="Loop"?!(f===2&&h[0].id===h[1].id):u!==!0}async function vi(){if(Gl()===!0){yi(),Ca(),mt=[],dt=[];const a=on.value,u=un.value;console.log("sourceAdress : ",a),console.log("destinationAdress : ",u);const f=Us(a),h=Us(u);if(f.containsProv===!1||h.containsProv===!1){console.log("Could not extract a province"),console.log("sourceProv : ",f),console.log("destinationProv : ",h);return}if(Ht.latitude!=-500&&Ht.longitude!=-500&&Wt.latitude!=-500&&Wt.longitude!=-500)try{const d=(await Ln.post(`${lr}/client/findingPath`,{sourceCoords:Ht,sourceProvince:f.province,destinationCoords:Wt,destinationProvince:h.province},{withCredentials:!0})).data;console.log("Route results : ",d),pt("route found",!0);const y=d.routes;yt=y,y.forEach((C,M)=>{console.log(`Drawing route ${M}:`,C),sn(C.drawableCoords,C.travelMethod,M,"blue")});const g=y[0].drawableCoords.length>0?y[0].drawableCoords.flat():y[0].drawableCoords;console.log("Source Walking  : ",g);const w=await Xs(d.sourceCoord.latitude,d.sourceCoord.longitude,d.pointCloseToSource.latitude,d.pointCloseToSource.longitude,g);dt.push(w);const L=y.length-1;console.log("Route length : ",L),console.log("Destination Walking  : ",y[L].drawableCoords);const E=y[L].drawableCoords.length>0?y[L].drawableCoords.flat():y[L].drawableCoords,_=await Xs(d.destCoord.latitude,d.destCoord.longitude,d.pointCloseToDest.latitude,d.pointCloseToDest.longitude,E);console.log("destWalking coords: ",_),dt.push(_),sn(dt,"Walk","W1","blue");const T=dt.flat();Ra(T);const A=w.length-1,R=await zs(w[A][0],w[A][1]);y.length===1?ei(w[A][0],w[A][1],"start","","Raise the hand sign shown to stop a Taxi",R,d.chosenTaxiRanks[0].address):y.length>1&&ei(w[A][0],w[A][1],"start","","Raise the hand sign shown to stop a Taxi ",R,`${d.chosenTaxiRanks[0].address}, [TaxiRank :${d.chosenTaxiRanks[0].name}]`),mt.push(d.chosenTaxiRanks[0].address);const B=_.length-1,z=await zs(_[B][0],_[B][1]);ei(_[B][0],_[B][1],"stop","","Please ask the Taxi driver to stop at this point",z,"Empty");const U=d.chosenTaxiRanks.length;console.log("Taxiranks length : ",U," chosenTaxiRanks : ",d.chosenTaxiRanks);const I=Ll(y[y.length-1],d.destIsFullyBounded,y.length,y);console.log("isFullLength : ",I),console.log("listOfRoutes.length : ",y.length),console.log("Routes : ",y);let N;I===!0?N=U:N=U-1;for(let C=0;C<N;C++){let M=d.chosenTaxiRanks[C],P;if(C+1===N)P=`Next location is where you get off the Taxi:  ${z}`;else{let q=d.chosenTaxiRanks[C+1];P=`${q.address}, [TaxiRank :${q.name}]`}ei(M.location_coord.longitude,M.location_coord.latitude,"taxiRank",">>"," Take a Taxi that is going to the Next Location(Walk to the Next Location if the Path is in dots)",`${M.address}, [TaxiRank : ${M.name}] `,P),mt.push(`${M.address}, [TaxiRank : ${M.name}]`)}if(mt.push(z),sr===!0){yr();const C=ur(mt,!1);rr.insertBefore(C,It),It.style.width="75%"}Ma();const x=d.prices.listOfPrices;for(let C=0;C<x.length;C++){const M=x[C].price,P=y[C].name;Hl(P,M,x[C].travelMethod=="Walk"?"red":xa[C])}ba();const S=d.directions.result;mi=[...S],console.log("**** DIRECTIONS STORED **** : ",mi),S.forEach((C,M)=>{Wl(`D${M+1}`,kl[M],M)}),or===!0&&La()}catch(l){pt("No route found",!1),l.response?(console.log("Route results (ERROR):",l.response),console.log("Route error data:",l.response.data),console.log("Status:",l.response.status)):l.request?console.log("No response received:",l.request):console.log("Error setting up request:",l.message)}else{console.log("Some coordinates are equal to -500 , which is default");return}}}function Tl(){if(window.innerWidth<=768){const a=document.querySelector(".topnav"),u=document.querySelector("#text-map "),f=a.offsetHeight;u.style.top=`${f+40}px`}}function Rl(){const a=document.querySelector(".search_container");a.classList.contains("hidden")||a.classList.add("hidden")}function Ml(){const a=document.getElementById("popup-container");a&&(a.style.zIndex="3000")}function bl(){const a=document.getElementById("popup-container");a&&(a.style.zIndex="0")}function pt(a,u){Ml(),qo.showSuccessPopup(a,u,bl)}function gr(){fi.style.color="#19AE1E"}function Ol(){fi.style.color="#919191"}function dr(){gi.style.color="#F12D13"}function Pl(){gi.style.color="#919191"}async function Na(a,u){const f=`https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(a)}.json?access_token=${hr}&country=ZA&limit=1`;try{const l=(await ya.get(f)).data;if(l.features&&l.features.length>0){const d=l.features[0],y=d.place_name,[g,w]=d.center;if(Ta(g,w)===!1){pt("Click is outside of the radius",!1);return}u===!0?(Je&&(Je.remove(),console.log("marker is removed")),Je=new mapboxgl.Marker({color:"green"}).setLngLat([g,w]).addTo(re),re.flyTo({center:[g,w],zoom:12}),nn("source",w,g),on.value=y,Ot.innerHTML="",Sn.style.color="#919191",gr()):(Qe&&(Qe.remove(),console.log("marker is removed")),Qe=new mapboxgl.Marker({color:"red"}).setLngLat([g,w]).addTo(re),re.flyTo({center:[g,w],zoom:12}),nn("destination",w,g),un.value=y,en.innerHTML="",wn.style.color="#919191",dr()),vi(),rn()}else pt("No results found.",!1)}catch(h){console.error(h),pt("No results found.",!1)}}async function zs(a,u){const f=`https://api.mapbox.com/geocoding/v5/mapbox.places/${a},${u}.json?access_token=${mapboxgl.accessToken}&country=ZA`;try{return(await(await fetch(f)).json()).features[0].place_name}catch(h){return console.log(h),null}}function Sa(){if(!yt||yt.length===0)return;yt.forEach((u,f)=>{console.log(`Drawing route ${f}:`,u),sn(u.drawableCoords,u.travelMethod,f,"blue")}),console.log("Walking coords [in: redrawCoords ] : ",dt),sn(dt,"Walk","W2","blue");const a=dt.flat();Ra(a)}async function Xs(a,u,f,h,l){const d=await Vs(a,u,f,h),y=In(l),g=In(JSON.parse(d)),w=hu(y,g);if(w.features.length===0)return console.log("No intersection found."),JSON.parse(d);const L=w.features[0].geometry.coordinates;console.log("First intersection:",L);const E=await Vs(a,u,L[1],L[0]);return E.length===0?(console.log("Could not form the second coordinates"),JSON.parse(d)):JSON.parse(E)}function Us(a){if(a.length<=0){console.log("The address is empty");return}const f=a.replace(/\d+/g,"").trim().split(",").map(d=>d.trim().toLowerCase());let h="";return{containsProv:_l.some(d=>{const y=f.includes(d.trim().toLowerCase());return y&&(h=d),y}),province:h}}async function wa(a,u){if(!u){a.innerHTML="";return}const f=`https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(u)}.json?access_token=${mapboxgl.accessToken}&country=ZA&autocomplete=true&limit=10`;try{const l=await(await fetch(f)).json();a==Ot?en.innerHTML="":Ot.innerHTML="",a.innerHTML="",l.features.length>0&&l.features.forEach(d=>{const y=document.createElement("li");y.textContent=d.place_name,y.style.padding="10px",y.style.cursor="pointer",y.addEventListener("click",()=>{const[g,w]=d.center;if(Ta(g,w)===!1){pt("Click is outside of the radius",!1);return}console.log("Selected coordinates:",g,w),Ot===a?(Je&&(Je.remove(),console.log("marker is removed")),Je=new mapboxgl.Marker({color:"green"}).setLngLat([g,w]).addTo(re),re.flyTo({center:[g,w],zoom:12}),nn("source",w,g),on.value=y.textContent,a.innerHTML="",Sn.style.color="#919191",vi(),rn(),gr()):en===a?(Qe&&(Qe.remove(),console.log("marker is removed")),Qe=new mapboxgl.Marker({color:"red"}).setLngLat([g,w]).addTo(re),re.flyTo({center:[g,w],zoom:12}),nn("destination",w,g),un.value=y.textContent,a.innerHTML="",wn.style.color="#919191",vi(),rn(),dr()):console.error("There was no marker chosen or valid ")}),a.appendChild(y)})}catch(h){console.error("Error fetching suggestions:",h)}}function Al(){_a.style.visibility="visible"}function Mn(){_a.style.visibility="hidden"}function tn(){je.get("from")===1&&(xn.style.backgroundColor="white",xn.style.color="black",je.set("from",0)),je.get("to")===1&&(En.style.backgroundColor="white",En.style.color="black",je.set("to",0))}function mr(){pa.style.visibility="hidden",_i=!1,Rn=!1}function Dl(){pa.style.visibility="visible",_i=!0}function nn(a,u,f){a==="source"?(Ht.latitude=u,Ht.longitude=f):(Wt.latitude=u,Wt.longitude=f)}function Fl(a,u,f){ki=a,xi=u,Ei=f}function ql(){return ki>-500&&xi>-500&&Ei.length>0}function rn(){ki=-500,xi=-500,Ei=""}function Bl(a,u,f){_i===!0&&Rn===!0&&(je.get("from")===1?(Je&&(Je.remove(),console.log("marker is removed")),Je=new mapboxgl.Marker({color:"green"}).setLngLat([a,u]).addTo(re),re.flyTo({center:[a,u],zoom:12}),on.value=f,nn("source",u,a),tn(),Dt=!0,gr()):je.get("to")===1&&(Qe&&(Qe.remove(),console.log("marker is removed")),Qe=new mapboxgl.Marker({color:"red"}).setLngLat([a,u]).addTo(re),re.flyTo({center:[a,u],zoom:12}),un.value=f,nn("destination",u,a),tn(),Dt=!0,dr()),vi())}function Ca(){ar.length!==0&&ar.forEach(a=>{a.remove()})}function ei(a,u,f,h,l,d,y){let g;const w=document.createElement("div");w.className="custom-mapbox",w.innerHTML=h;const L=`
  <div class="map-popup-content">
      <div class="popup-main-message">${l}</div>
      <div class="popup-location-info">
          <div class="popup-location-item">
              <span class="popup-label">Current Location:</span>
              <span class="popup-value">${d}</span>
          </div>
          <div class="popup-location-item">
              <span class="popup-label">Next Location:</span>
              <span class="popup-value">${y}</span>
          </div>
      </div>
  </div>
`;f==="start"?w.style.setProperty("--marker-color","#27548A"):f==="stop"?w.style.setProperty("--marker-color","#00CED1"):w.style.setProperty("--marker-color","#F0F4F7"),g=new mapboxgl.Marker({element:w,anchor:"bottom"}).setLngLat([a,u]).setPopup(new mapboxgl.Popup({closeButton:!0,closeOnClick:!1,maxWidth:"320px",className:"custom-mapbox-popup"}).setHTML(L)).addTo(re),g&&ar.push(g)}function Gl(){return Je!=null&&Qe!=null}function La(){const a=document.getElementById("toggle");a.classList.toggle("active");const u=document.querySelector(".price-off"),f=document.querySelector(".price-on");a.classList.contains("active")?(u.style.opacity="0.5",f.style.opacity="1",Jl(),or=!0,yt?(yi(),yt.forEach((h,l)=>{console.log(`Drawing route ${l}:`,h),sn(h.drawableCoords,h.travelMethod,l,xa[l])})):console.error("listRoutes stored is null")):(u.style.opacity="1",f.style.opacity="0.5",yi(),Sa(),or=!1)}async function Yl(){const a=document.getElementById("areatoggle");a.classList.toggle("active"),a.classList.contains("active")?(console.log("We are on"),Xl()):Ul()}function zl(a,u=2){if(!nt||nt===null){const h=new jsts.io.GeoJSONReader,l=new jsts.io.GeoJSONWriter;let d=null;for(let y=0;y<a.length;y++){const g=a[y];if(!g||g.length<2)continue;const w=In(g),L=ga(w,u,{units:"kilometers"}),E=h.read(L.geometry);d?d=d.union(E):d=E}if(!d){console.warn("Nothing to show. Buffer union failed or input was empty.");return}nt={type:"Feature",geometry:l.write(d),properties:{}}}const f={type:"FeatureCollection",features:[nt]};re.getSource("route-buffer")?re.getSource("route-buffer").setData(f):re.addSource("route-buffer",{type:"geojson",data:f}),re.getLayer("buffer-layer")||re.addLayer({id:"buffer-layer",type:"fill",source:"route-buffer",layout:{},paint:{"fill-color":"#0074D9","fill-opacity":0,"fill-outline-color":"#005299"}})}function Xl(){if(re.getLayer("buffer-layer")&&(re.setPaintProperty("buffer-layer","fill-opacity",.3),nt)){const a=nt.geometry.coordinates[0].reduce((u,f)=>u.extend(f),new mapboxgl.LngLatBounds(nt.geometry.coordinates[0][0],nt.geometry.coordinates[0][0]));re.fitBounds(a,{padding:50,maxZoom:12,duration:2e3})}}function Ul(){re.getLayer("buffer-layer")&&re.setPaintProperty("buffer-layer","fill-opacity",0)}async function Vl(){try{const u=(await Ln.get(`${lr}/client/listOfAllRoutes`,{withCredentials:!0})).data.routes;let f=[];u.forEach(h=>{f.push(h.coords)}),zl(f)}catch(a){console.log(a)}}function Ta(a,u){const f=Pt([a,u]);return(!nt||nt===null)&&console.error("Buffer does not exist"),tu(f,nt)}function sn(a,u,f,h){a.forEach((l,d)=>{console.log(`route in loadMiniRoutes ${f}`);const y=`route-source-${f}-${d}`,g=`route-line-${f}-${d}`;if(!Array.isArray(l)||l.length===0){console.error(`Invalid coordinates for route ${d}:`,l);return}re.getSource(y)&&(re.removeLayer(g),re.removeSource(y));const w={type:"Feature",properties:{},geometry:{type:"LineString",coordinates:l}};re.addSource(y,{type:"geojson",data:{type:"FeatureCollection",features:[w]}});let L=u==="Walk"?{"line-color":"#FF0000","line-width":4,"line-dasharray":[0,2]}:{"line-color":h,"line-width":4};re.addLayer({id:g,type:"line",source:y,layout:{"line-cap":"round","line-join":"round"},paint:L})})}function yi(){if(!re.getStyle()||!re.getStyle().layers)return;re.getStyle().layers.map(u=>u.id).forEach(u=>{u.startsWith("route-line-")&&re.removeLayer(u)}),Object.keys(re.getStyle().sources).forEach(u=>{u.startsWith("route-source-")&&re.removeSource(u)})}function Ra(a){const u=a.reduce((f,h)=>f.extend(h),new mapboxgl.LngLatBounds(a[0],a[1]));re.fitBounds(u,{padding:50,maxZoom:15,duration:2e3})}function Hl(a,u,f){const h=document.querySelector(".list_right ul"),l=document.querySelector(".list_left ul"),d=document.createElement("li");d.className="rightPriceRow";const y=document.createElement("div");y.className="route_circle",y.style.backgroundColor=f,d.appendChild(y),d.appendChild(document.createTextNode(` ${a}`));const g=document.createElement("li");g.className="leftPriceRow",g.textContent=f==="red"?"walk":`R${u}`,h.appendChild(d),l.appendChild(g);let w=parseInt(document.querySelector(".total_price p:last-child").textContent.replace("R",""),10);w+=parseInt(u,10),document.querySelector(".total_price p:last-child").textContent=`R${w}`}function Ma(){const a=document.querySelectorAll(".rightPriceRow"),u=document.querySelectorAll(".leftPriceRow");a&&a.forEach(f=>{f.remove()}),u&&u.forEach(f=>{f.remove()}),document.querySelector(".total_price p:last-child").textContent="R0"}function Wl(a,u,f){const h=document.createElement("button");h.className="direction_button",h.textContent=a,h.id=f,h.backgroundColor=u,ka.appendChild(h)}function ba(){const a=document.querySelectorAll(".direction_button");a&&a.forEach(u=>{u.remove()})}async function Zl(a,u){if(di===!1&&(nr=!1),di=!0,!a){console.log("Coordinates are empty or null [In :movement function]");return}if(nr)return;const f=$l(a);vr(),console.log("directions coords of the chosen mode[in movement]  : ",f),Vt=new mapboxgl.Marker({element:jl(u)}).setLngLat(f[0]).addTo(re);let h=0;function l(){Vt!==null&&h<f.length-1&&(h===f.length-2?h=0:h++,Vt.setLngLat(f[h]),ai=setTimeout(l,200))}l()}function $l(a){const u=In(a),f=ul(u,{units:"kilometers"}),l=f/1e3,d=[];for(let y=0;y<=f;y+=l){const g=zo(u,y,{units:"kilometers"});d.push(g.geometry.coordinates)}return d}function vr(){ai&&(clearTimeout(ai),ai=null),Vt!==null&&(Vt.remove(),Vt=null)}function jl(a){const u=document.createElement("div");return u.classList.add("movingDirectionCircle"),u.style.width="20px",u.style.height="20px",u.style.backgroundColor=a,u.style.backgroundSize="cover",u.style.border="2px solid red",u.style.borderRadius="50%",u}async function Vs(a,u,f,h){const l=`https://api.mapbox.com/directions/v5/mapbox/walking/${u},${a};${h},${f}?geometries=geojson&access_token=${hr}`;try{const d=await ya.get(l);if(!d.data.routes||d.data.routes.length===0)return console.error("Error: No routes found in API response",d.data),null;let y=[];const g=d.data.routes[0].geometry.coordinates;return y.push(JSON.stringify(g)),console.log("Route:",y),y}catch(d){return console.error("Error fetching route:",d),null}}function Jl(){let a=document.querySelector('input[name="type"]:checked');a&&(a.checked=!1)}function ti(a,u,f,h){const l=document.createElement("div");l.classList.add("text-node");const d=document.createElement("div");d.classList.add("custom-mapbox"),d.innerHTML=h,d.style.setProperty("--marker-color",f);const y=document.createElement("div");if(y.classList.add("textDir","bubble"),y.textContent=a,l.appendChild(d),l.appendChild(y),u===!0){const g=document.createElement("i");g.className="far fa-arrow-alt-circle-down",g.style.fontSize="32px",l.appendChild(g)}return l}function ur(a,u){const f=document.createElement("div");if(f.id="text-map",window.innerWidth<=768){const h=document.createElement("button");h.className="close_button";const l=document.createElement("i");l.className="fa fa-times",l.setAttribute("style","font-size: 20px; color: rblackd"),l.setAttribute("aria-hidden","true"),h.appendChild(l),f.appendChild(h)}console.log("List : ",a);for(let h=0;h<a.length;h++){console.log("Im here");const l=h!==a.length-1;let d=null;h==0&&u==!1?d=ti(a[h],l,"#27548A",""):h==0&&u==!0?d=ti(a[h],l,"red","ER"):h==a.length-1?d=ti(a[h],l,"#00CED1",""):d=ti(a[h],l,"#F0F4F7",">>"),f.appendChild(d)}return f}function yr(){const a=document.getElementById("text-map");a&&(a.innerHTML=""),a.remove()}
