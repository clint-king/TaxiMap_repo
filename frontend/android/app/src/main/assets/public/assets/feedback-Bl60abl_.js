import{B as b}from"./AddressSelection-CWIIN_Gi.js";/* empty css               *//* empty css                 */import{r as h}from"./logout-DBLdyFVo.js";import{a as f}from"./axios-D4YhIzwJ.js";f.interceptors.response.use(e=>e,e=>{var t;return((t=e.response)==null?void 0:t.status)===401&&(localStorage.removeItem("userProfile"),window.location.href="/pages/authentication/login.html"),Promise.reject(e)});function E(){const e=document.getElementById("mobileMenu"),t=document.querySelector(".burger");e.classList.toggle("show"),t.classList.toggle("active")}document.addEventListener("click",e=>{const t=document.getElementById("mobileMenu"),r=document.querySelector(".burger");!t.contains(e.target)&&!r.contains(e.target)&&(t.classList.remove("show"),r.classList.remove("active"))});document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("feedbackForm");document.getElementById("successMessage"),x(),e.addEventListener("submit",async function(n){n.preventDefault();const s=document.querySelector(".submit-btn"),a=s.innerHTML;s.disabled=!0,s.innerHTML='<i class="fas fa-spinner fa-spin"></i> Sending...';try{const i=new FormData(e),c={feedback_type:i.get("feedback_type"),subject:i.get("subject"),message:i.get("message"),rating:i.get("rating")||null},u=document.getElementById("imageInput"),v=u?Array.from(u.files):[];await w(c,v),I()}catch(i){console.error("Error submitting feedback:",i),alert("There was an error submitting your feedback. Please try again.")}finally{s.disabled=!1,s.innerHTML=a}}),e.querySelectorAll("input, textarea").forEach(n=>{n.addEventListener("blur",F),n.addEventListener("input",p)});const r=document.querySelectorAll(".feedback-type-option");r.forEach(n=>{n.addEventListener("click",function(){r.forEach(s=>{s.classList.remove("selected")}),this.classList.add("selected")})}),document.querySelectorAll('.rating-stars input[type="radio"]').forEach(n=>{n.addEventListener("change",function(){const s=this.value,a=document.querySelector(".rating-text"),i={1:"Poor - We need to improve significantly",2:"Fair - Room for improvement",3:"Good - Decent experience",4:"Very Good - Almost perfect",5:"Excellent - Outstanding experience"};a.textContent=i[s]||"Rate your experience with TeksiMap"})})});async function w(e,t=[]){var r;try{if(!localStorage.getItem("userProfile"))throw new Error("Please log in to submit feedback");const n=new FormData;if(n.append("feedback_type",e.feedback_type),n.append("subject",e.subject),n.append("message",e.message),e.rating&&n.append("rating",e.rating),t&&t.length>0)for(let a=0;a<t.length;a++)n.append("images",t[a]);const s=await f.post(`${b}/feedback/submit`,n,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});return console.log("Feedback submitted successfully:",s.data),s.data}catch(o){if(console.error("Error submitting feedback:",o),o.response){const n=((r=o.response.data)==null?void 0:r.error)||o.response.statusText||"Failed to submit feedback";throw new Error(n)}else throw o.request?new Error("Network error. Please check your connection."):o}}function I(){const e=document.getElementById("feedbackForm"),t=document.getElementById("successMessage");e.style.display="none",t.style.display="block",window.scrollTo({top:0,behavior:"smooth"})}function k(){const e=document.getElementById("feedbackForm"),t=document.getElementById("successMessage");t.style.display="none",e.style.display="block",window.scrollTo({top:0,behavior:"smooth"})}window.showForm=k;window.clearForm=L;window.toggleMobileMenu=E;function L(){const e=document.getElementById("feedbackForm");e.reset(),e.querySelectorAll(".error").forEach(s=>{s.classList.remove("error")}),document.querySelectorAll(".feedback-type-option").forEach(s=>{s.classList.remove("selected")});const o=document.querySelector(".rating-text");o.textContent="Rate your experience with TeksiMap",B();const n=e.querySelector('input[type="text"]');n&&n.focus()}function x(){const e=document.getElementById("imageUploadArea"),t=document.getElementById("imageInput");!e||!t||(e.addEventListener("click",()=>{t.click()}),e.addEventListener("dragover",r=>{r.preventDefault(),e.classList.add("dragover")}),e.addEventListener("dragleave",()=>{e.classList.remove("dragover")}),e.addEventListener("drop",r=>{r.preventDefault(),e.classList.remove("dragover");const o=Array.from(r.dataTransfer.files);g(o)}),t.addEventListener("change",r=>{const o=Array.from(r.target.files);g(o)}))}function g(e){const t=document.getElementById("imagePreviewContainer"),r=document.getElementById("imagePreviewGrid");if(!t||!r)return;const o=e.filter(a=>a.type.startsWith("image/"));if(o.length===0){l("Please select only image files (PNG, JPG, GIF)");return}if(o.filter(a=>a.size>5*1024*1024).length>0){l("Some files are too large. Maximum size is 5MB per file.");return}if(r.children.length+o.length>5){l("Maximum 5 images allowed. Please remove some images first.");return}m(),o.forEach(a=>{const i=new FileReader;i.onload=c=>{P(c.target.result,a.name)},i.readAsDataURL(a)}),t.style.display="block"}function P(e,t){const r=document.getElementById("imagePreviewGrid");if(!r)return;const o=document.createElement("div");o.className="image-preview-item";const n=document.createElement("img");n.src=e,n.alt=t;const s=document.createElement("button");s.className="remove-image",s.innerHTML='<i class="fas fa-times"></i>',s.onclick=()=>M(o),o.appendChild(n),o.appendChild(s),r.appendChild(o)}function M(e){e.remove();const t=document.getElementById("imagePreviewGrid"),r=document.getElementById("imagePreviewContainer");t&&r&&t.children.length===0&&(r.style.display="none")}function B(){const e=document.getElementById("imageInput"),t=document.getElementById("imagePreviewContainer"),r=document.getElementById("imagePreviewGrid");e&&(e.value=""),r&&(r.innerHTML=""),t&&(t.style.display="none"),m()}function l(e){m();const t=document.createElement("div");t.className="image-error",t.textContent=e;const r=document.querySelector(".image-upload-container");r&&(r.appendChild(t),setTimeout(()=>{t.remove()},5e3))}function m(){const e=document.querySelector(".image-error");e&&e.remove()}function F(e){const t=e.target,r=t.value.trim();return p(e),t.hasAttribute("required")&&!r?(d(t,"This field is required"),!1):t.type==="text"&&r&&r.length<2?(d(t,"This field must be at least 2 characters long"),!1):t.tagName==="TEXTAREA"&&r&&r.length<10?(d(t,"Please provide more detailed feedback (at least 10 characters)"),!1):!0}function d(e,t){e.classList.add("error");const r=e.parentNode.querySelector(".error-message");r&&r.remove();const o=document.createElement("div");o.className="error-message",o.textContent=t,o.style.color="#dc3545",o.style.fontSize="0.85rem",o.style.marginTop="0.25rem",e.parentNode.appendChild(o)}function p(e){const t=e.target;t.classList.remove("error");const r=t.parentNode.querySelector(".error-message");r&&r.remove()}const y=document.createElement("style");y.textContent=`
  .form-group input.error,
  .form-group textarea.error {
    border-color: #dc3545;
    box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.1);
  }
  
  .feedback-type-option.selected .option-card {
    border-color: #01386A;
    background: rgba(1, 56, 106, 0.05);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(1, 56, 106, 0.2);
  }
  
  .feedback-type-option.selected .option-card i {
    color: #01386A;
  }
`;document.head.appendChild(y);document.addEventListener("DOMContentLoaded",()=>{h()});
