import{B as d}from"./AddressSelection-CWIIN_Gi.js";import{a as y}from"./sessionHandler-BYiIKMqf.js";import"./axios-D4YhIzwJ.js";const c=document.getElementById("loading"),a=document.getElementById("errorMessage"),i=document.getElementById("successMessage"),r=document.getElementById("actionButtons"),m=document.getElementById("resendSection");document.getElementById("verificationTitle");document.getElementById("verificationText");const p=new URLSearchParams(window.location.search),l=p.get("token");document.addEventListener("DOMContentLoaded",()=>{l?h(l):(n("No verification token found. Please check your email for the correct verification link."),f())});async function h(e){try{o(!0);const t=await y.get(`${d}/auth/verify/${e}`);o(!1),u(t.data.message),k()}catch(t){if(o(!1),t.response){const s=t.response.data.message||"Verification failed";n(s)}else n("Network error. Please check your internet connection and try again.");f()}}async function w(){const e=document.getElementById("resendEmail"),t=e.value.trim();if(!t){n("Please enter your email address.");return}if(!E(t)){n("Please enter a valid email address.");return}try{o(!0);const s=await y.post(`${d}/auth/resend-verification`,{email:t});o(!1),u(s.data.message),e.value=""}catch(s){if(o(!1),s.response){const g=s.response.data.message||"Failed to resend verification email";n(g)}else n("Network error. Please check your internet connection and try again.")}}function E(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function o(e){e?(c.classList.add("show"),a.style.display="none",i.style.display="none",r.style.display="none"):c.classList.remove("show")}function n(e){a.textContent=e,a.style.display="block",i.style.display="none",r.style.display="none"}function u(e){i.textContent=e,i.style.display="block",a.style.display="none"}function k(){r.style.display="block",m.style.display="none"}function f(){m.style.display="block",r.style.display="none"}window.resendVerification=w;
