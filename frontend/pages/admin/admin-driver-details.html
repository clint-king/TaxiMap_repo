<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Driver Details - Admin - TeksiMap</title>
  <link rel="stylesheet" href="../../css/adminStyle.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>
  <!-- Admin Navigation -->
  <nav class="admin-nav">
    <div class="nav-container">
      <div class="logo">
        <a href="admin.html">
          <img src="../../assets/icons/logo-advanced-white.svg" alt="TeksiMap Logo" class="h-10 w-auto" />
        </a>
        <span class="admin-badge">Admin</span>
      </div>

      <!-- Burger button for mobile -->
      <div class="burger" onclick="toggleAdminMobileMenu()">
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
      </div>

      <!-- Navigation links -->
      <div class="nav-links" id="adminMobileMenu">
        <a href="admin.html">Taxi Ranks</a>
        <a href="route.html">Routes</a>
        <a href="admin-reports.html">Reports</a>
        <a href="admin-pending.html">Pending Routes</a>
        <a href="admin-feedback.html">Feedback</a>
        <a href="admin-contributors.html">Contributors</a>
        <a href="admin-existing-routes.html">Existing Routes</a>
        <a href="admin-vehicles.html">Vehicles</a>
        <a href="admin-drivers.html" class="active">Drivers</a>
        <a href="admin-execute-booking.html">Execute Booking</a>
        <a href="../customer/client.html" class="user-link">User View</a>
        <a href="#" onclick="logout()" class="logout-link">Logout</a>
      </div>
    </div>
  </nav>

  <div class="admin-dashboard">
    <div class="admin-section">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
        <div>
          <h1><i class="fas fa-user-tie"></i> Driver Details</h1>
          <p style="color: #666; margin-top: 0.5rem;">View complete driver information and documents</p>
        </div>
        <a href="admin-drivers.html" class="btn btn-secondary">
          <i class="fas fa-arrow-left"></i> Back to Drivers
        </a>
      </div>

      <!-- Loading State -->
      <div id="loadingState" style="text-align: center; padding: 3rem;">
        <i class="fas fa-spinner fa-spin" style="font-size: 3rem; color: #01386A; margin-bottom: 1rem;"></i>
        <p>Loading driver details...</p>
      </div>

      <!-- Error State -->
      <div id="errorState" style="display: none; text-align: center; padding: 3rem; color: #dc3545;">
        <i class="fas fa-exclamation-circle" style="font-size: 3rem; margin-bottom: 1rem;"></i>
        <p id="errorMessage">Failed to load driver details</p>
        <button class="btn btn-primary" onclick="location.reload()" style="margin-top: 1rem;">
          <i class="fas fa-sync-alt"></i> Retry
        </button>
      </div>

      <!-- Driver Details Content -->
      <div id="driverDetailsContent" style="display: none;">
        <!-- Driver Information Card -->
        <div class="card" style="margin-bottom: 2rem;">
          <div class="card-header">
            <h2><i class="fas fa-info-circle"></i> Driver Information</h2>
            <span id="verificationStatusBadge" class="status-badge pending">Pending</span>
          </div>
          <div class="card-body">
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
              <div>
                <h3 style="margin-bottom: 1rem; color: #193148;">Personal Details</h3>
                <div class="info-group">
                  <label>Name:</label>
                  <p id="driverName">-</p>
                </div>
                <div class="info-group">
                  <label>Email:</label>
                  <p id="driverEmail">-</p>
                </div>
                <div class="info-group">
                  <label>Phone:</label>
                  <p id="driverPhone">-</p>
                </div>
                <div class="info-group">
                  <label>Location:</label>
                  <p id="driverLocation">-</p>
                </div>
                <div class="info-group">
                  <label>ID Number:</label>
                  <p id="idNumber">-</p>
                </div>
              </div>
              <div>
                <h3 style="margin-bottom: 1rem; color: #193148;">Driver & Status Information</h3>
                <div class="info-group">
                  <label>License Number:</label>
                  <p id="licenseNumber">-</p>
                </div>
                <div class="info-group">
                  <label>License Expiry:</label>
                  <p id="licenseExpiry">-</p>
                </div>
                <div class="info-group">
                  <label>Driver Status:</label>
                  <p><span id="driverStatusBadge" class="status-badge pending">-</span></p>
                </div>
                <div class="info-group">
                  <label>Verification Status:</label>
                  <p><span id="verificationStatusBadge2" class="status-badge pending">-</span></p>
                </div>
                <div class="info-group">
                  <label>Owner:</label>
                  <p id="ownerName">-</p>
                  <small id="ownerEmail" style="color: #666;">-</small>
                </div>
                <div class="info-group">
                  <label>Assigned Vehicles:</label>
                  <p id="vehicleCount">0</p>
                </div>
                <div class="info-group">
                  <label>Rating:</label>
                  <p id="rating">-</p>
                </div>
              </div>
            </div>
            <div id="verificationNotesSection" style="margin-top: 2rem; display: none;">
              <h3 style="margin-bottom: 1rem; color: #193148;">Verification Notes</h3>
              <p id="verificationNotes" style="color: #666; line-height: 1.6;">-</p>
            </div>
          </div>
        </div>

        <!-- Driver Documents -->
        <div class="card" style="margin-bottom: 2rem;">
          <div class="card-header">
            <h2><i class="fas fa-file-alt"></i> Driver Documents</h2>
            <span id="documentsCount" class="badge">0</span>
          </div>
          <div class="card-body">
            <div id="documentsList" style="display: grid; gap: 1.5rem;">
              <p style="text-align: center; color: #666; padding: 2rem;">Loading documents...</p>
            </div>
          </div>
        </div>

        <!-- Document Viewer Modal -->
        <div id="documentModal" class="modal" style="display: none; z-index: 10000;">
          <div class="modal-content" style="max-width: 95vw; max-height: 95vh; width: auto; height: auto; margin: 2rem auto;">
            <div class="modal-header" style="position: sticky; top: 0; background: white; z-index: 10001; border-bottom: 1px solid #ddd;">
              <h2 id="modalDocumentTitle" style="margin: 0;">Document Viewer</h2>
              <button class="modal-close" onclick="closeDocumentModal()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #666;">
                <i class="fas fa-times"></i>
              </button>
            </div>
            <div class="modal-body" style="overflow-y: auto; max-height: calc(95vh - 100px); padding: 1rem;">
              <div id="modalDocumentContent" style="text-align: center;">
                <!-- Document content will be inserted here -->
              </div>
            </div>
            <div class="modal-footer" style="position: sticky; bottom: 0; background: white; border-top: 1px solid #ddd; padding: 1rem; display: flex; justify-content: space-between; align-items: center;">
              <button id="prevPageBtn" class="btn btn-secondary" onclick="previousPage()" style="display: none;">
                <i class="fas fa-chevron-left"></i> Previous
              </button>
              <span id="pageCounter" style="color: #666;"></span>
              <button id="nextPageBtn" class="btn btn-secondary" onclick="nextPage()" style="display: none;">
                Next <i class="fas fa-chevron-right"></i>
              </button>
              <button class="btn btn-primary" onclick="closeDocumentModal()">
                Close
              </button>
            </div>
          </div>
        </div>

        <!-- Assigned Vehicles -->
        <div id="vehiclesSection" class="card" style="margin-bottom: 2rem; display: none;">
          <div class="card-header">
            <h2><i class="fas fa-car"></i> Assigned Vehicles</h2>
            <span id="vehiclesCount" class="badge">0</span>
          </div>
          <div class="card-body">
            <div id="vehiclesList" style="display: grid; gap: 1rem;">
              <!-- Vehicles will be inserted here -->
            </div>
          </div>
        </div>

        <!-- Admin Actions -->
        <div class="card" style="margin-bottom: 2rem;">
          <div class="card-header">
            <h2><i class="fas fa-tasks"></i> Admin Actions</h2>
          </div>
          <div class="card-body">
            <div id="pendingActions" style="display: none;">
              <p style="margin-bottom: 1.5rem; color: #666;">This driver is pending verification. Review all details and documents before making a decision.</p>
              <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                <button class="btn btn-success btn-lg" onclick="verifyDriver()">
                  <i class="fas fa-check"></i> Verify Driver
                </button>
                <button class="btn btn-danger btn-lg" onclick="rejectDriver()">
                  <i class="fas fa-times"></i> Reject Driver
                </button>
              </div>
            </div>
            <div id="verifiedActions" style="display: none;">
              <p style="margin-bottom: 1.5rem; color: #666;">This driver has been verified. You can suspend them if needed.</p>
              <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                <button class="btn btn-warning btn-lg" onclick="suspendDriver()">
                  <i class="fas fa-ban"></i> Suspend Driver
                </button>
                <button class="btn btn-primary btn-lg" onclick="activateDriver()">
                  <i class="fas fa-check-circle"></i> Activate Driver
                </button>
              </div>
            </div>
            <div id="otherActions" style="display: none;">
              <p style="margin-bottom: 1.5rem; color: #666;">This driver has been rejected or suspended.</p>
              <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                <button class="btn btn-success btn-lg" onclick="verifyDriver()">
                  <i class="fas fa-check"></i> Verify Driver
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script type="module" src="../../js/admin/adminDriverDetails.js"></script>
  <script type="module" src="../../js/authentication/logout.js"></script>

  <script>
    // Navigation functions
    function toggleAdminMobileMenu() {
      const menu = document.getElementById('adminMobileMenu');
      menu.classList.toggle('show');
    }

    window.toggleAdminMobileMenu = toggleAdminMobileMenu;
  </script>

</body>
</html>

